"use strict";(("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_forum_client=("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_forum_client||[]).push([[5862],{16144:(e,t,n)=>{n.r(t),n.d(t,{classes:()=>a,cssStates:()=>c,keyframes:()=>r,layers:()=>s,namespace:()=>o,st:()=>m,stVars:()=>i,style:()=>d,vars:()=>l});var o="oxA9KNC",a={root:"soPgQEE",arrowIcon:"smKWIX7",btn:"sg7OVNY",displayBlock:"stroHtS",content:"sZKMDMO",textContent:"sROzbsu",label:"s__1I7cWa",selectedValue:"s__2zWAJr"},r={},s={},i={},l={"wix-color-3":"--wix-color-3","wix-color-5":"--wix-color-5","wix-ui-tpa-floating-dropdown-base-main-text-color":"--wix-ui-tpa-floating-dropdown-base-main-text-color","wix-ui-tpa-floating-dropdown-base-main-text-font":"--wix-ui-tpa-floating-dropdown-base-main-text-font"},c=n.stc.bind(null,o),d=n.sts.bind(null,o),m=d},78496:(e,t,n)=>{var o,a,r;n.d(t,{Sk:()=>o}),function(e){e.OLDEST_FIRST="OLDEST_FIRST",e.NEWEST_FIRST="NEWEST_FIRST",e.MOST_REACTIONS_FIRST="REACTION_COUNT",e.MOST_VOTES_FIRST="NET_VOTE_COUNT",e.LEAST_VOTES_FIRST="NET_VOTE_COUNT_ASC",e.HIGHEST_RATED_FIRST="RATING",e.LOWEST_RATED_FIRST="RATING_ASC"}(o||(o={})),function(e){e.ASC="ASC",e.DESC="DESC"}(a||(a={})),function(e){e.GROUP="GROUP"}(r||(r={}))},20807:(e,t,n)=>{function o(e,{target:t=document.body}={}){const n=document.createElement("textarea"),o=document.activeElement;n.value=e,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";const a=document.getSelection();let r=!1;a.rangeCount>0&&(r=a.getRangeAt(0)),t.append(n),n.select(),n.selectionStart=0,n.selectionEnd=e.length;let s=!1;try{s=document.execCommand("copy")}catch(e){}return n.remove(),r&&(a.removeAllRanges(),a.addRange(r)),o&&o.focus(),s}n.d(t,{T:()=>o})},72069:(e,t,n)=>{n.d(t,{k:()=>r});var o=n(976),a=n(11509);const r=(e={type:"DEFAULT"})=>{switch(e.type){case"CUSTOM":return e.icon;case"NONE":return null;case"DEFAULT":return o.Z;default:throw(0,a.t1)(e)}}},60107:(e,t,n)=>{n.d(t,{Q:()=>o});const o=()=>window&&void 0!==window.ResizeObserver},73567:(e,t,n)=>{n.d(t,{Z:()=>E});var o=n(92712),a=n(27762),r=n.n(a),s=n(17760),i=n(96933);const l=e=>r().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),r().createElement("g",{transform:"translate(-1001 -239) translate(313 151) translate(64 84) translate(500) translate(63)"},r().createElement("path",{d:"M11.999 9L6 14.241 6.657 15 11.999 10.334 17.343 15 18 14.241z",transform:"translate(61 4) matrix(1 0 0 -1 0 24)"})));var c="oc373S5",d="s_cyV68",m="sTn41y5",u="sNJx5x_",p=n.sts.bind(null,c);const E=e=>{var{children:t,disabled:n,onClick:a,className:c}=e,E=(0,o.__rest)(e,["children","disabled","onClick","className"]);return r().createElement(s.z,Object.assign({className:p(d,c),disabled:n,priority:i.J.primary,onClick:n?void 0:a,upgrade:!0},E),r().createElement("div",{className:m},t,r().createElement(l,{className:u})))}},31130:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(92712),a=n(27762),r=n.n(a),s="oY9fovC",i="sXBdExS",l=n.sts.bind(null,s);const c=e=>{var{className:t,disabled:n=!1}=e,a=e.buttonProps,{children:s,className:c}=a,d=(0,o.__rest)(a,["children","className"]),{initialState:m=!1,onShowCallback:u,buttonComponent:p,children:E}=e;const[h,g]=r().useState({isVisible:m,isKbTriggered:!1}),v=r().useRef(null);r().useEffect((()=>(h.isVisible&&(document.addEventListener("click",b),document.addEventListener("keyup",C)),()=>{document.removeEventListener("click",b),document.removeEventListener("keyup",C)})),[h.isVisible]),r().useEffect((()=>{h.isVisible&&(null==u||u())}),[h.isVisible,u]);const y=r().useMemo((()=>({returnFocus:e})=>{var t;e&&(null===(t=v.current)||void 0===t||t.focus()),g({isKbTriggered:!1,isVisible:!1})}),[]),b=e=>{var t;(null===(t=v.current)||void 0===t?void 0:t.contains(e.target))||y({returnFocus:!1})},C=e=>{"Escape"!==e.key&&"Tab"!==e.key||y({returnFocus:"Escape"===e.key})},I=p||"button",f="function"==typeof E?E({isKbTriggered:h.isKbTriggered,closeDropdown:()=>{y({returnFocus:!0})}}):E;return r().createElement("div",{className:t},r().createElement("div",{ref:v},r().createElement(I,Object.assign({className:l(i,c)},d,{onClick:()=>{n||h.isVisible||g({isKbTriggered:!1,isVisible:!0})},onKeyDown:e=>{n||h.isVisible||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g({isKbTriggered:!0,isVisible:!0}))},"aria-haspopup":"true","aria-expanded":h.isVisible}),s||null)),h.isVisible?f:null)}},48562:(e,t,n)=>{n.d(t,{T:()=>r});var o=n(27762),a=n.n(o);const r=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",stroke:"none"},e),a().createElement("path",{fillRule:"evenodd",d:"M17.077 6l.923.923L12.923 12 18 17.077l-.923.923L12 12.923 6.923 18 6 17.077 11.076 12 6 6.923 6.923 6 12 11.077 17.077 6z"}))},82138:(e,t,n)=>{n.d(t,{p:()=>r});var o=n(27762),a=n.n(o);const r=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M15 4v2h4v1h-1v13H6V7H5V6h4V4h6zm2 3H7v12h10V7zm-3 2v8h-1V9h1zm-3 0v8h-1V9h1zm3-4h-4v1h4V5z",transform:"translate(-12 -470) translate(0 306) translate(0 155) translate(12 9)"}))},1124:(e,t,n)=>{n.d(t,{d:()=>r});var o=n(27762),a=n.n(o);const r=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{fillRule:"evenodd",d:"M16.679 5.602l1.702 1.704c.826.827.826 2.172 0 3l-8.17 8.18L4 20l1.512-6.218 8.17-8.18c.799-.802 2.196-.803 2.997 0zM8.661 16.046l1.312 1.314 5.652-5.658-3.336-3.341-5.652 5.659 1.317 1.319 3.193-3.193c.195-.195.512-.195.707 0 .195.196.195.512 0 .708L8.66 16.046zm7.645-5.026L17.7 9.624c.45-.451.45-1.186 0-1.637l-1.702-1.704c-.437-.437-1.197-.436-1.634 0L12.97 7.679l3.336 3.34zm-10.88 7.554l3.569-.83-2.741-2.745-.828 3.575z"}))},15105:(e,t,n)=>{n.d(t,{v:()=>r});var o=n(27762),a=n.n(o);const r=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M10 13c1.656854 0 3 1.343146 3 3v4H3v-4c0-1.656854 1.343146-3 3-3h4zm0 1H6c-1.054362 0-1.918165.815878-1.994514 1.850738L4 16v3h8v-3c0-1.054362-.815878-1.918165-1.850738-1.994514L10 14zm8-3c1.656854 0 3 1.343146 3 3v4h-7.000719v-1H20v-3c0-1.054362-.815878-1.918165-1.850738-1.994514L14 12c-.694263 0-1.305904.353748-1.66451.890832l-.832209-.554654C12.041197 11.530592 12.958635 11 14 11h4zM8 6c1.656854 0 3 1.343146 3 3s-1.343146 3-3 3-3-1.343146-3-3 1.343146-3 3-3zm0 1c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2zm8-3c1.656854 0 3 1.343146 3 3s-1.343146 3-3 3-3-1.343146-3-3 1.343146-3 3-3zm0 1c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2z"})," ")},30972:(e,t,n)=>{n.d(t,{t:()=>r});var o=n(27762),a=n.n(o);const r=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M15 12a3 3 0 0 1 3 3v5H7v-5a3 3 0 0 1 3-3h5Zm0 1h-5a2 2 0 0 0-1.995 1.85L8 15v4h9v-4a2 2 0 0 0-1.85-1.995L15 13Zm-2.5-9a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm0 1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Z"}))},74979:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(27762),a=n.n(o),r=n(17760),s=n(96933),i=n(36375),l=n(87609),c=n(34616),d=n(56987),m="oQylbOw",u="soyNwKc",p="syN4Vx9",E="siQ5Ieu",h=n.sts.bind(null,m);const g=({text:e,onClick:t,className:n,isPending:o=!1,dataHook:m,icon:g})=>{const{screenshotMode:v}=(0,d.m)();return a().createElement(r.z,{className:h(u,n),onClick:t&&t,priority:s.J.secondary,"data-hook":m,upgrade:!0},a().createElement(c.Z,{typography:"buttonSecondary",priority:"buttonSecondary"},e),g||null,o?a().createElement(i.$,{className:p,"data-hook":l.aS,diameter:17,isStatic:v}):a().createElement("div",{className:E}))}},94251:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var o=n(27762),a=n.n(o),r=n(48562),s=n(7342),i=n(30972),l=n(15105),c=n(56987),d=n(87609),m=n(73126),u=n(17215);const p=({toggle:e,onPublish:t})=>{const n=(0,s.q)(),{blackAndWhiteModals:o,hideActionMenusIcons:p}=(0,c.m)();return a().createElement(m.D,{toggle:e,dataHook:d.s4,isBlackAndWhite:o},a().createElement(u.Q,{isBlackAndWhite:o,dataHook:d.Mw,label:n("anonymous-publish-sheet-modal.publish-as-member"),onClick:()=>{t({asGuest:!1}),e()},icon:l.v}),a().createElement(u.Q,{isBlackAndWhite:o,dataHook:d.nh,label:n("anonymous-publish-sheet-modal.publish-as-guest"),onClick:()=>{t({asGuest:!0}),e()},icon:i.t}),a().createElement(u.Q,{isBlackAndWhite:o,dataHook:d.Yf,icon:!p&&r.T,label:n("anonymous-publish-sheet-modal.publish-cancel"),onClick:e}))}},17215:(e,t,n)=>{n.d(t,{Q:()=>m});var o=n(27762),a=n.n(o),r=n(34616),s="oBA_Hwb",i="scbE9uH",l="sJIaLb7",c="sngPNbL",d=n.sts.bind(null,s);const m=({label:e,onClick:t,icon:n,dataHook:o,isBlackAndWhite:s})=>a().createElement("div",{"data-hook":o,className:i,onClick:t},n&&a().createElement(n,{className:d(c,{isBlackAndWhite:!0===s})}),a().createElement(r.Z,{className:l,priority:!0===s?"black":"primary"},e))},73126:(e,t,n)=>{n.d(t,{D:()=>E});var o=n(27762),a=n.n(o);const r=()=>"undefined"!=typeof navigator&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent),s=()=>window&&void 0!==window.visualViewport;class i extends a().PureComponent{constructor(){super(...arguments),this.state={height:"100%"},this.handleViewportResize=()=>{this.props.enabled&&(this.props.preventScroll&&0!==window.scrollY&&window.scrollBy(0,-1*window.scrollY),this.setState({height:Math.round(window.visualViewport.height)}))}}componentDidMount(){r()&&s()&&(this.setState({height:Math.round(window.visualViewport.height)}),window.visualViewport.addEventListener("resize",this.handleViewportResize),window.visualViewport.addEventListener("scroll",this.handleViewportResize))}componentWillUnmount(){r()&&s()&&(window.visualViewport.removeEventListener("resize",this.handleViewportResize),window.visualViewport.removeEventListener("scroll",this.handleViewportResize))}render(){const{children:e,dataHook:t,className:n}=this.props;return a().createElement("div",{className:n,"data-hook":t,style:{height:this.state.height}},e)}}i.defaultProps={preventScroll:!0,enabled:!0};const l=i;var c="o__5Fw615",d="sRpYyzh",m="sEXjYKk",u="sDwWVVI",p=n.sts.bind(null,c);const E=({dataHook:e,toggle:t,isBlackAndWhite:n=!1,children:o})=>a().createElement(a().Fragment,null,a().createElement("div",{className:d,onClick:t}),a().createElement(l,{preventScroll:!1,className:m},a().createElement("div",{className:p(u,{isBlackAndWhite:!0===n}),"data-hook":e},o)))},44614:(e,t,n)=>{n.d(t,{KB:()=>c,M:()=>s,Ns:()=>a,V7:()=>l,eJ:()=>i,x5:()=>r});var o=n(27762);const a=(0,o.lazy)((()=>Promise.all([n.e(6686),n.e(7118)]).then(n.bind(n,85117)))),r=(0,o.lazy)((()=>Promise.all([n.e(6686),n.e(1099)]).then(n.bind(n,20308)))),s=(0,o.lazy)((()=>Promise.all([n.e(6686),n.e(9039)]).then(n.bind(n,41245)))),i=(0,o.lazy)((()=>n.e(1684).then(n.bind(n,48296)))),l=((0,o.lazy)((()=>Promise.resolve().then(n.bind(n,94251)))),(0,o.lazy)((()=>Promise.all([n.e(6686),n.e(6943),n.e(8206),n.e(121),n.e(2338),n.e(9116),n.e(9284)]).then(n.bind(n,55987))))),c=((0,o.lazy)((()=>Promise.all([n.e(6686),n.e(4712),n.e(420)]).then(n.bind(n,25968)))),(0,o.lazy)((()=>n.e(1640).then(n.bind(n,57885)))))},92638:(e,t,n)=>{n.d(t,{DY:()=>c,dd:()=>d,tC:()=>l});var o=n(27762),a=n.n(o),r=n(17607),s=n(6035),i=n(96154);const l=(0,i.kr)({showModal:()=>null,modals:{}}),c=e=>{const[t,n]=(0,o.useState)({}),s=a().useCallback(((e,t)=>{n((n=>Object.assign(Object.assign({},n),{[e]:{modal:t,prevFocusOwner:document.activeElement}})))}),[]),i=a().useCallback((e=>()=>{n((t=>{const n=t[e].prevFocusOwner;return n&&n.focus(),(0,r.omit)(t,e)}))}),[]),c=a().useCallback((e=>{const t=(0,r.uniqueId)();s(t,e(i(t)))}),[s,i]);return a().createElement(l.Provider,{value:a().useMemo((()=>({showModal:c,modals:t})),[c,t])},e.children)},d=()=>(0,i.Sz)(l,(e=>e.showModal),s.w)},53079:(e,t,n)=>{n.d(t,{T:()=>r,Z:()=>s});var o=n(27762),a=n.n(o);const r="external-plugin-toolbar",s=a().forwardRef((({toolbarId:e,className:t},n)=>{const o=e?`${r}-${e}`:r;return a().createElement("div",{className:t,id:o,ref:n})}))},23257:(e,t,n)=>{n.d(t,{Cf:()=>r,RF:()=>s,_4:()=>a});var o=n(11241);const a=e=>({mention:{onMentionHover:(t,n)=>{var o;null===(o=null==e?void 0:e.setHoverMentionData)||void 0===o||o.call(e,{mention:t,ref:n})}},[o.nr]:{},[o.Pd]:{giphySdkApiKey:"HLX7ZyF2g6G0dI3S1S4RdgjMtn9Zj1VR",componentDataDefaults:{config:{size:"small",alignment:"center"}}}}),r=e=>({}),s=[o.Ac,o.tp]},8608:(e,t,n)=>{n.d(t,{K:()=>o});const o=(e,t)=>Object.assign({},"viewer"===t?{p:{fontFamily:"var(--comment-font-family)",fontStyle:"var(--comment-font-style)",fontWeight:"var(--comment-font-weight)",color:"var(--comment-text-color)",fontSize:e?"var(--comment-font-size-mobile)":"var(--comment-font-size-desktop)",lineHeight:e?1.43:1.5,backgroundColor:"transparent"}}:{editor:{placeholder:{color:"var(--placeholder-text-color)"}},p:{color:"var(--box-text-color)",fontFamily:"var(--placeholder-font-family)",fontStyle:"var(--placeholder-font-style)",fontWeight:"var(--placeholder-font-weight)",fontSize:e?"var(--placeholder-font-size-mobile)":"var(--placeholder-font-size-desktop)",lineHeight:1.5,backgroundColor:"transparent"}})},28688:(e,t,n)=>{n.d(t,{fL:()=>ne,Vo:()=>ee,On:()=>te});var o=n(17607),a=n(38378),r=n(34313),s=n(47014),i=n(80641),l=n(79699),c=n(92468),d=n(35390),m=n(65037),u=n(9311);const p=e=>t=>{const n=[];var o;return(o=(t,o)=>{e(t,o)&&n.push(t)},({nodes:e})=>{const t=(e,t)=>e.map(((e,n,o)=>[e,{parents:t,previousSibling:o[n-1]}]));let n=t(e,[]);for(;n.length;){const[e,a]=n.shift();o(e,a);const r=[e,...a.parents];n=[...t(e.nodes||[],r),...n]}})(t),n},E=[l.J.APP_EMBED,l.J.AUDIO,l.J.BUTTON,l.J.CODE_BLOCK,l.J.DIVIDER,l.J.EMBED,l.J.EXTERNAL,l.J.FILE,l.J.GALLERY,l.J.GIF,l.J.HEADING,l.J.HTML,l.J.IMAGE,l.J.LINK_PREVIEW,l.J.MAP,l.J.PARAGRAPH,l.J.POLL,l.J.VIDEO];var h=Object.defineProperty,g=Object.defineProperties,v=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,I=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&I(e,n,t[n]);if(y)for(var n of y(t))C.call(t,n)&&I(e,n,t[n]);return e},N=(e,t)=>g(e,v(t));const R=e=>{return t=e.type,[l.J.APP_EMBED,l.J.AUDIO,l.J.BUTTON,l.J.DIVIDER,l.J.EMBED,l.J.EXTERNAL,l.J.FILE,l.J.GALLERY,l.J.GIF,l.J.HTML,l.J.IMAGE,l.J.LINK_PREVIEW,l.J.MAP,l.J.POLL,l.J.VIDEO].includes(t);var t},w=e=>{return t=e.type,[l.J.CODE_BLOCK,l.J.HEADING,l.J.PARAGRAPH].includes(t);var t},L=e=>e.type===l.J.PARAGRAPH&&0===e.nodes.length,k=e=>e.type===l.J.TEXT,O=e=>e.id,T=e=>(0,d.K)(e).map((({textData:e})=>{var t;return null!=(t=null==e?void 0:e.text)?t:""})).get().flat().join("").split(" ").filter((e=>""!==e)),S=e=>(0,d.K)(e).map((({textData:e})=>{var t,n;return null!=(n=null==(t=null==e?void 0:e.text)?void 0:t.length)?n:0})).get().flat().reduce(((e,t)=>e+t),0),M=(0,s.f)(T,r.R),D=e=>(0,s.p)([e,e],(0,i.b)(M,O)),A=(e,t)=>{if(M(e)===t)return e;const n=T(e).slice(0,t).join(" ").length,o=e.nodes.filter(k).map(S),a=o.reduce((([e,t],n)=>[[...e,Math.min(n,t)],Math.max(t-n,0)]),[[],n])[0],r=e=>a[e]>0&&a[e]<o[e]||a[e]>0&&0===a[e+1],s=e.nodes.filter(k).map(((e,t)=>{var n,o,s,i,l;return N(f({},e),{textData:N(f({},e.textData),{decorations:null!=(o=null==(n=e.textData)?void 0:n.decorations)?o:[],text:null!=(l=null==(i=null==(s=e.textData)?void 0:s.text)?void 0:i.slice(0,a[t]).concat(r(t)?"\u2026":""))?l:""})})})).filter((e=>{var t,n;return null==(n=null==(t=e.textData)?void 0:t.text)?void 0:n.length}));return N(f({},e),{nodes:s})},_=e=>!L(e)&&E.includes(e.type),P=p,x=e=>t=>(0,s.p)((0,d.K)(t.nodes).filter((0,c.a)([w,(0,r.n)(L)])).get(),(0,r.m)(D),(e=>t=>t.reduce((([e,t],[n,o])=>[[...e,[n,Math.min(t,o)]],Math.max(t-o,0)]),[[],e])[0])(e),u.sq,(e=>t=>(0,m.P)(e).filter((e=>Object.keys(t).includes(e.id))).set((e=>0===t[e.id]?[]:[A(e,t[e.id])])))(t)),B=e=>t=>(0,m.P)(e).set((e=>t.includes(e.id)?[]:[e])),H=e=>(0,m.P)(e).filter((e=>[l.J.LIST_ITEM,l.J.ORDERED_LIST,l.J.BULLETED_LIST,l.J.BLOCKQUOTE,l.J.TABLE,l.J.COLLAPSIBLE_LIST].includes(e.type))).set((e=>0===e.nodes.length?[]:[e])),F=e=>(0,m.P)(e).filter((e=>[l.J.TABLE_ROW,l.J.COLLAPSIBLE_ITEM].includes(e.type))).set((e=>e.nodes.every((e=>0===e.nodes.length))?[]:[e])),V=e=>(0,s.p)(e,p(((e,{previousSibling:t})=>!!(L(e)&&t&&L(t)))),(e=>e.map(O)),B(e)),W=(e,t,n)=>{const{nodeCount:o,wordCount:a,maxPlugins:r}=(e=>f(f({},{nodeCount:1/0,wordCount:1/0,maxPlugins:1/0}),e))(t);return(0,s.p)(e,(i=r,e=>(0,s.p)((0,d.K)(e.nodes).filter(R).map(O).get().slice(i),B(e))),((e,t)=>n=>(0,s.p)(n,P(t),(t=>t.slice(e).map(O)),B(n)))(o,(null==n?void 0:n.selectCountableNodes)||_),x(a),F,H,(null==n?void 0:n.keepEmptyParagraphs)?s.a:V);var i};var j=Object.defineProperty,G=Object.defineProperties,z=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,Z=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t)=>{for(var n in t||(t={}))U.call(t,n)&&Z(e,n,t[n]);if(Y)for(var n of Y(t))q.call(t,n)&&Z(e,n,t[n]);return e},J=(e,t)=>G(e,z(t));const Q=(e,t={})=>{const{blocks:n,entityMap:o}=e,{wordsCount:a=1/0,maxPlugins:r=1/0,blocksCount:s=1/0}=t;if(s<0||s>n.length&&a===1/0&&r===1/0)return{content:e,isTruncated:!1};const i={},l={},c=[];let d=0,m=0,u=!1;try{n.forEach(((e,t)=>{if(t===s)throw l;const n=e.text.split(" ").filter((e=>""!==e));if("atomic"===e.type&&m++,m>r)throw l;if(d+n.length>a?c.push(J(K({},e),{text:n.slice(0,a-d).join(" ")+"\u2026"})):c.push(e),d+=n.length,e.entityRanges.forEach((e=>{i[e.key]=o[e.key]})),d>=a)throw l}))}catch(e){if(e!==l)throw e;u=!0}return{content:J(K({},e),{blocks:c,entityMap:i}),isTruncated:u}};var $=n(23257);const X=(e,t,n)=>Object.assign(Object.assign(Object.assign({},(0,$._4)(n)[t]),e),(0,$.Cf)(n)[t]),ee=(e,t)=>{if((0,o.isPlainObject)(e)){return Object.keys(e).map((n=>{var o;const{editorModule:a,editorConfig:r={}}=e[n];if(!(null===(o=null==t?void 0:t.disabledPlugins)||void 0===o?void 0:o.includes(n)))return a?a(X(r,n,t)):void 0})).filter((e=>e))}return[]},te=(e,t)=>{if((0,o.isPlainObject)(e)){return Object.keys(e).map((n=>{const{viewerModule:o,viewerConfig:a={}}=e[n];return o?o(X(a,n,t)):void 0})).filter((e=>e))}return[]},ne=(e,{truncationThreshold:t})=>{const n=e&&t?((e,t,n)=>{if((0,a._)(e))return Q(e,t);if((0,a.l)(e)){const a=W(e,(e=>{var t,n,o;return{nodeCount:null!=(t=e.blocksCount)?t:1/0,wordCount:null!=(n=e.wordsCount)?n:1/0,maxPlugins:null!=(o=e.maxPlugins)?o:1/0}})(t),n);return{content:a,isTruncated:!(0,o.isEqual)(e,a)}}return{content:e,isTruncated:!1}})(e,{wordsCount:t}):void 0;return(0,a.l)(e)?n&&(0,a.l)(n.content)?{content:e,truncatedContent:(null==n?void 0:n.isTruncated)?n.content:void 0}:{content:e,truncatedContent:void 0}:{content:void 0,truncatedContent:void 0}}},64245:(e,t,n)=>{n.d(t,{V:()=>il});var o=n(27762),a=n.n(o),r=n(17607),s=n(49889),i=n(87609),l=n(95685),c=n.n(l),d=n(34616),m=n(35751);const u=a().createContext({t:e=>e});var p=n(80588),E=n(9907),h=n(17760),g=n(25702),v=n(85754),y=n(56987),b="oTxRaPw",C="suMbmIB",I=n.sts.bind(null,b);const f="KXUz7w",N="YbCfZD",R="KwuTZl",w=({children:e})=>{const{resourceId:t,hideAvatars:n,isLocked:o}=(0,y.m)(),{isRtl:r,isMobile:s,showContainerBorderDev:l,ssrLoadedCorrectly:d}=(0,v.h)(((e,n,o,a)=>({isRtl:(0,g.$0)(e),isMobile:(0,g.W7)(e),showContainerBorderDev:a.wcDevToolsState.showContainerBorder,ssrLoadedCorrectly:!!a.wcSsrLoadedCorrectly&&!!a.wcSsrLoadedCorrectly[t]}))),m=d?"div":"section",u=d?"SSR_LOADED":"CSR_LOADED";return a().createElement(m,{className:c()(f,R,"wc-comments-root",{[N]:l}),dir:r?"rtl":"ltr","data-hook":c()(i.Dx,t,o&&i.eS),"data-render":u},a().createElement("div",{className:I(C,{withoutAvatars:Boolean(n)},s?"wc-app-mobile":"wc-app-desktop")},e))};var L=n(85226),k="oEh_2wG",O="sp_bBFp",T="smkhtlH",S=n.sts.bind(null,k);const M=({className:e,type:t="default"})=>a().createElement(L.i,{className:S(O,{type:t},e)}),D=({className:e})=>a().createElement("div",{className:S(T,e)},"\u2022"),A={container:"PDgi2x",headerContainer:"i_XAD8",commentCount:"ptVXLW",text:"v32P9x",buttonContainer:"Tuj89s",errorCode:"IEHfwt"};var _=n(96154);const P={"error-boundary-fallback.message":"Hmm, that didn\u2019t work. Refresh the page and try again.","error-boundary-fallback.button-label":"Refresh","header.all-comments":"Comments"},x=e=>{var t,n,s,l,v,y,b;let C=P["header.all-comments"],I=P["error-boundary-fallback.message"],f=P["error-boundary-fallback.button-label"],N=r.noop,R=!1,L=!1,k="";const O=null===(t=null==e?void 0:e.workerError)||void 0===t?void 0:t.error,T=null===(n=null==e?void 0:e.workerError)||void 0===n?void 0:n.errorId;O&&console.info(O);try{const t=a().useContext(u),n=((e,t,n)=>(o,a)=>{if(e)return o;const s=(t||n||r.identity)(o,a);return s&&s!==o?s:P[o]})("undefined"!=typeof window&&window.location.search.includes("debug-translate"),e.t,t.t);I=n("error-boundary-fallback.message"),f=n("error-boundary-fallback.button-label"),C=n("header.all-comments",{count:null!==(s=e.commentCount)&&void 0!==s?s:0});const o=(0,_.qp)(m.G),i=a().useContext(p._);k=null!==(l=i.resourceId)&&void 0!==l?l:k,N=null!==(v=null==o?void 0:o.actions.biShowFallbackState)&&void 0!==v?v:N,R=null!==(y=(0,g.W7)(o))&&void 0!==y?y:R,L=null!==(b=(0,g.$0)(o))&&void 0!==b?b:L}catch(e){}return(0,o.useEffect)((()=>{N({resourceId:k})}),[]),a().createElement(E.CU,{value:{mobile:R,rtl:L}},a().createElement(w,null,R&&a().createElement(M,{type:"header"}),a().createElement("div",{className:A.headerContainer},a().createElement("div",{"data-hook":i.xH,className:A.left},a().createElement(d.B,{className:A.commentCount,typography:"titleSmall",mobile:R},C))),a().createElement("div",{className:c()(A.container,"wc-separator-color")},a().createElement("div",{className:A.text},a().createElement(d.B,{priority:"primary",mobile:R},I)),a().createElement("div",{className:A.buttonContainer},a().createElement(h.z,{onClick:()=>window.location.reload()},f)),T&&a().createElement("div",{className:A.text},a().createElement(d.B,{priority:"secondary",typography:"contentXSmall",mobile:R},"ErrorId: ",T)))))},B=e=>{try{return a().createElement(x,Object.assign({},e))}catch(e){return a().createElement("div",null,"Unexpected error")}},H=a().lazy((()=>n.e(847).then(n.bind(n,76939)))),F=()=>{const{resourceId:e}=(0,y.m)(),{toggle:t,enabled:n,isSSR:o}=(0,v.h)(((t,n,o,a)=>({enabled:e===a.wcDevToolsState.panelIsOpenForResource,toggle:()=>a.wcDevToolsApi.set("panelIsOpenForResource",e===a.wcDevToolsState.panelIsOpenForResource?null:e),isSSR:(0,g.Kv)(t)})));return a().createElement(a().Fragment,null,a().createElement("button",{style:{border:"1px solid #999",borderTop:"0px",padding:"0px 10px 3px",opacity:"0.5",backgroundColor:"#ccc",borderRadius:"0 0 6px 6px",textAlign:"center",position:"absolute",top:"0",left:"50%",marginLeft:"-50px",cursor:"pointer",zIndex:100},onClick:t},"comments debug"),!o&&n&&a().createElement(a().Suspense,{fallback:null},a().createElement(H,{toggle:t})))};var V=n(92712),W=n(78496);const j={replyShowMoreLimit:10,ordering:W.Sk.NEWEST_FIRST,initialPage:{commentLimit:5,replyLimit:1},pagination:{commentLimit:15,replyLimit:3},maxPagesBeforeDrop:{commentPages:4,replyPages:5}},G={commentReactions:{type:"likes",mainEmotion:"heart"},replyReactions:{type:"likes",mainEmotion:"heart"}};var z=n(17616);const Y=a().memo((function(e){const{devToolsState:t}=(0,v.h)(((e,t,n,o)=>({devToolsState:o.wcDevToolsState}))),n=a().useMemo((()=>{var n;const o=e.config,{reactions:a={}}=o,r=(0,V.__rest)(o,["reactions"]),s=Object.assign(Object.assign({},"auto"===t.commentReactions?{}:{commentReactions:{type:t.commentReactions}}),"auto"===t.replyReactions?{}:{replyReactions:{type:t.replyReactions}}),i="auto"===t.hideHeader?r.hideHeader:"on"===t.hideHeader,l="auto"===t.hideSorting?r.hideSorting:"on"===t.hideSorting,c="auto"===t.hideTitle?r.hideTitle:"on"===t.hideTitle;return Object.assign(Object.assign({pagination:e.config.pagination,reactions:Object.assign(Object.assign(Object.assign({},G),a),s)},r),{_showReportAction:"auto"===t.showReportAction?r._showReportAction:"on"===t.showReportAction,commentBoxPosition:"auto"===t.commentBoxPosition?r.commentBoxPosition:t.commentBoxPosition,hideHeader:i,hideSorting:l,hideTitle:c,hideReplyingTo:"auto"===t.hideReplyingTo?r.hideReplyingTo:"on"===t.hideReplyingTo,hidePublishDate:"auto"===t.hidePublishDate?r.hidePublishDate:"on"===t.hidePublishDate,hideAvatars:"auto"===t.hideAvatars?r.hideAvatars:"on"===t.hideAvatars,hideBadge:"auto"===t.hideBadge?r.hideBadge:"on"===t.hideBadge,hideHeaderDivider:"auto"===t.hideHeaderDivider?r.hideHeaderDivider:"on"===t.hideHeaderDivider,isLocked:"auto"===t.isLocked?r.isLocked:"on"===t.isLocked,hideZeroCommentsEmptyState:"auto"===t.hideZeroCommentsEmptyState?r.hideZeroCommentsEmptyState:"on"===t.hideZeroCommentsEmptyState,blackAndWhiteModals:"auto"===t.blackAndWhiteModals?r.blackAndWhiteModals:"on"===t.blackAndWhiteModals,markLabels:"auto"===t.markLabels?r.markLabels:"on"===t.markLabels?{markActionLabel:"Custom mark as text",unmarkActionLabel:"Custom unmark text",badgeLabel:"Custom badge label",icon:{type:"CUSTOM",icon:z.Z}}:"no-icon"===t.markLabels?{markActionLabel:"Custom mark as text",unmarkActionLabel:"Custom unmark text",badgeLabel:"Custom badge label",icon:{type:"NONE"}}:void 0,ratings:"auto"===t.ratings.type?r.ratings:"on"===t.ratings.type?{isRequired:t.ratings.isRequired}:void 0,userAuthDisplay:null!==(n=r.userAuthDisplay)&&void 0!==n?n:"LOGOUT_ONLY"})}),[e.config.isLocked,e.config.resourceId,e.config.reactions,e.config.hideHeader,e.config.hideTitle,e.config.hideHeaderDivider,e.config.hideSorting,e.config.hideZeroCommentsEmptyState,e.config.overlayLayerContainer,e.config.disableNavigationPrompt,e.config.transformCommentOnRender,e.config.blackAndWhiteModals,e.config.markLabels,t]);return a().createElement(p._.Provider,{value:n},e.children)}));var U=n(53542);var q=n(54801);const Z=a().memo((function(e){const t=a().useContext(u),n="undefined"!=typeof window&&window.location.search.includes("debug-translate");return a().createElement(q.y.Provider,{value:a().useMemo((()=>{const o=void 0!==e.t?{t:e.t}:t;return n?{t:r.identity}:o}),[e.t,t,n])},e.children)}));var K=n(92638),J=n(88677),Q=n(7342),$=n(11509);const X="data-rating",ee=({className:e})=>a().createElement("svg",{viewBox:"3 2 18 18",width:"18",height:"18",className:e},a().createElement("path",{d:"M20.9502,8.8922 C20.8322,8.5282 20.5222,8.2672 20.1432,8.2112 L15.1362,7.4842 L12.8962,2.9472 C12.5572,2.2592 11.4422,2.2592 11.1032,2.9472 L8.8642,7.4842 L3.8562,8.2112 C3.4772,8.2672 3.1682,8.5282 3.0492,8.8922 C2.9312,9.2562 3.0282,9.6502 3.3022,9.9172 L6.9262,13.4492 L6.0712,18.4362 C6.0062,18.8142 6.1582,19.1882 6.4682,19.4132 C6.7782,19.6412 7.1812,19.6692 7.5212,19.4912 L11.9992,17.1352 L16.4792,19.4912 C16.6262,19.5692 16.7862,19.6072 16.9452,19.6072 C17.1512,19.6072 17.3572,19.5412 17.5322,19.4132 C17.8422,19.1882 17.9942,18.8142 17.9292,18.4362 L17.0742,13.4502 L20.6982,9.9172 C20.9722,9.6502 21.0692,9.2562 20.9502,8.8922",fillRule:"evenodd",fill:"currentColor"}));var te="o__789mZx",ne="s__6mz_MM",oe="sQtKc_t",ae=n.sts.bind(null,te);const re=({rating:e=0})=>{const t=(0,Q.q)();return a().createElement("div",Object.assign({className:ae(ne,{withRating:!!e}),"data-hook":i.IL},{[X]:e}),a().createElement("span",{title:t("ratings-display.rating-aria-label",{rating:e}),role:"region"}),a().createElement("div",{"aria-hidden":"true",className:oe},a().createElement(ee,null)))},se={root:"x4hC7h",a11yLabel:"cIKXDG",a11YLabel:"cIKXDG",innerContainer:"XmB0Ao",largeGap:"XaHtdH",smallGap:"tmvosj",full:"swqzoP",empty:"tdqmPo",halfStarWrapper:"sZapWx",halfStarInnerWrapperStart:"lDph1S",halfStarInnerWrapperEnd:"UHth4t"};var ie="oJqL08z",le="sdXP3f7",ce=n.sts.bind(null,ie);const de=(e=>{let{Icon:t,gap:n}=e;return e=>{let{rating:o,a11yLabel:r,className:s="",dataHook:i,collapsed:l}=e;const c=Math.min(Math.max(o,0),5);return a().createElement("div",{className:[se.root,"small"===n?se.smallGap:se.largeGap,s].join(" "),"data-hook":i,"data-value":c},r&&a().createElement("span",{className:se.a11yLabel},r),a().createElement("div",{"aria-hidden":"true",className:se.innerContainer},(l?[1]:[1,2,3,4,5]).map((e=>{const n=function(e,t){if(t<=e)return"full";if(t-e<1){const n=t-e;return n<.25?"full":n>.75?"empty":"half"}return"empty"}(c,e);switch(n){case"full":return a().createElement(t,{key:e,className:se.full});case"empty":return a().createElement(t,{key:e,className:se.empty});case"half":return a().createElement("div",{className:se.halfStarWrapper,key:e},a().createElement(t,{key:"start",className:[se.halfStarInnerWrapperStart,se.full].join(" ")}),a().createElement(t,{key:"end",className:[se.halfStarInnerWrapperEnd,se.empty].join(" ")}));default:throw o=n,new Error("Unreachable case with value "+JSON.stringify(o))}var o}))))}})({Icon:ee,gap:"small"}),me=({className:e,rating:t=0,isPending:n=!1})=>{const o=(0,Q.q)();return a().createElement("div",Object.assign({"data-hook":i.IL},{[X]:t}),a().createElement(de,{className:ce(le,{isPending:n},e),a11yLabel:o("ratings-display.rating-aria-label",{rating:t}),rating:t}))};var ue="sQ3H2XE",pe="skbRnsg",Ee="sL2z67_";const he=e=>{const t=(0,v.h)(g.W7),n=(0,Q.q)();return a().createElement("div",Object.assign({className:ue,"data-hook":i.EK},{"data-count":"total"in e?e.total:0}),(()=>{switch(e.type){case"DISABLED":return t?a().createElement(re,null):a().createElement(me,null);case"ENABLED":return a().createElement(a().Fragment,null,t?a().createElement(re,{rating:e.average}):a().createElement(me,{className:pe,rating:e.average}),a().createElement("div",{className:Ee},(({total:e,average:o})=>t?n("header.rating-count-compact",{count:e,average:o}):0===e?n("header.no-ratings-yet"):`${o} | ${n("header.rating-count",{count:e})}`)({average:e.average.toFixed(1),total:e.total})));default:throw(0,$.t1)(e)}})())};var ge=n(83033),ve=n(36420),ye=n(87606),be=n(96933),Ce=n(31130),Ie=n(44614),fe=n(1181),Ne="s__8YtN_E",Re="sgVNvkc",we="sbpIwut",Le="sAkjGwt",ke="sJdbKD4",Oe="sS9IoHW";const Te=e=>{const{requestLogin:t,requestLogout:n,isMobile:o}=(0,v.h)(((e,t)=>({requestLogin:t.requestLogin,requestLogout:t.requestLogout,isMobile:(0,g.W7)(e)}))),r=(0,Q.q)(),s=(0,K.dd)();return a().createElement("div",{className:Ne},"login"===e.state?a().createElement(h.z,{className:ke,priority:be.J.secondary,size:be.q.tiny,onClick:()=>{t({mode:"login"})},upgrade:!0,"data-hook":i.Zq},a().createElement(d.Z,{className:Oe,typography:"buttonSecondary",priority:"buttonSecondary",size:"custom"},r("user-actions.log-in"))):(l=e.avatarUrl,o?a().createElement("button",{onClick:()=>s((e=>a().createElement(Ie.KB,{toggle:e,logout:()=>{n()}}))),"data-hook":i.ds},a().createElement(ge.q,{className:Le,src:l,size:ve.D.small})):a().createElement(Ce.Z,{className:Re,buttonProps:{children:a().createElement(ge.q,{className:Le,src:l,size:ve.D.small}),"data-hook":i.ds}},a().createElement(fe.N,{className:we,offset:32},a().createElement(ye.y,null,a().createElement(ye.y.Item,{content:r("user-actions.log-out"),onClick:()=>{n()}}))))));var l};var Se="oa5r9cV",Me="s__8Fxo7p",De="sAO9c62",Ae="sYEZwQN",_e="sZoDmVh",Pe="sP0Cq3J",xe="sic3u8D",Be="s__2QWj1F",He=n.sts.bind(null,Se);const Fe=({hideHeader:e,hideTitle:t,hideRatings:n,userAuthControlState:o})=>e||t&&n&&"HIDDEN"===o.type?{type:"HIDDEN"}:{type:"VISIBLE",visibilityProps:{userAuthControlState:o,hideTitle:!!t,hideRatings:!!n}},Ve=a().memo((e=>{var t,{commentCount:n,hideTitle:o,userAuthControlState:r}=e,s=(0,V.__rest)(e,["commentCount","hideTitle","userAuthControlState"]);const l=(0,Q.q)(),{a11yOptions:c,headerTitleText:d}=(0,y.m)(),m=(0,v.h)(g.W7),u=null!==(t=null==c?void 0:c.headerRank)&&void 0!==t?t:"span",{titleArea:p,ratingArea:E,userAuthArea:h}=(({isMobile:e,isTitleVisible:t,isRatingVisible:n,isUserAuthVisible:o})=>e?{titleArea:Ae,ratingArea:t?o?Pe:_e:Ae}:{titleArea:Ae,ratingArea:t?_e:Ae,userAuthArea:t&&n?Pe:_e})({isMobile:m,isTitleVisible:!o,isRatingVisible:!s.hideRatings,isUserAuthVisible:"HIDDEN"!==r.type});return a().createElement(a().Fragment,null,m&&a().createElement(M,{type:"header"}),a().createElement("div",{className:He(Me,{isMobile:m,isOneRow:o||s.hideRatings||"HIDDEN"===r.type}),"data-hook":i.JF},a().createElement("div",{className:De},!o&&a().createElement(u,{className:He(xe,p),"data-hook":i.xH},d?d(null!=n?n:0):l("header.all-comments",{count:null!=n?n:0})),"HIDDEN"!==r.type&&a().createElement("div",{className:He(Be,h)},a().createElement(Te,Object.assign({},"LOGOUT"===r.type?{state:"logout",avatarUrl:r.memberAvatarUrl}:{state:"login"}))),!s.hideRatings&&a().createElement("div",{className:E},a().createElement(he,Object.assign({},s.ratings))))))}));Ve.displayName="CommentsHeader";const We=["COMMENT_CREATE_PENDING","COMMENT_CREATE_ERROR","COMMENT_READY","COMMENT_EDITING","COMMENT_UPDATE_PENDING","COMMENT_DELETE_PENDING","COMMENT_DELETED","COMMENT_LIVE_PENDING"],je=((0,$.sl)(We),(0,$.sl)(We),(0,$.sl)(["COMMENT_READY","COMMENT_EDITING","COMMENT_UPDATE_PENDING","COMMENT_UPDATE_ERROR","COMMENT_DELETE_PENDING"]));var Ge=n(38945),ze=n(96320);const Ye=e=>Object.values(ze.$).map((t=>{const n=null==e?void 0:e.find((e=>e.reactionCode===t));return{reactionCode:t,hasReacted:(null==n?void 0:n.hasReacted)||!1,total:(null==n?void 0:n.total)||0,identities:(null==n?void 0:n.identities)||[]}})),Ue=(e,t)=>Object.assign(Object.assign({},e),{hasReacted:!0,identities:t?[t,...e.identities]:e.identities,total:e.total+1}),qe=(e,t)=>Object.assign(Object.assign({},e),{hasReacted:!1,identities:t?e.identities.filter((e=>e.identityId!==t.identityId)):e.identities,total:e.total-1}),Ze=(e,t)=>{var n;const{reactions:o,total:a}=e,r=Ye(o);return"IDLE"===e.type?{pending:!1,total:a,reactions:r,activeReaction:null===(n=r.find((e=>e.hasReacted)))||void 0===n?void 0:n.reactionCode}:Object.assign(Object.assign({},(({state:e,initiatorIdentity:t})=>{const n=Ye(e.reactions);switch(e.action){case"ADD":return{total:e.total+1,reactions:n.map((n=>n.reactionCode===e.reactionCode?Ue(n,t):n))};case"REPLACE":return{total:e.total,reactions:n.map((n=>n.hasReacted?qe(n,t):n.reactionCode===e.reactionCode?Ue(n,t):n))};case"REMOVE":return{total:e.total-1,reactions:e.reactions.map((e=>e.hasReacted?qe(e,t):e))};default:throw(0,$.t1)(e.action)}})({state:e,initiatorIdentity:(0,Ge.i6)(t)})),{pending:!0,activeReaction:e.reactionCode})},Ke={UPVOTE:1,DOWNVOTE:-1,NEUTRAL:0},Je=e=>e.scoresWithoutUserVote+Ke[e.currentUserVote.type],Qe=(e,t)=>"IDLE"===t.type?{isMarked:!!e.isMarked,pending:!1}:{isMarked:"ADD"===t.action,pending:!0},$e=(0,$.sl)(["COMMENT_READY","COMMENT_EDITING","COMMENT_UPDATE_PENDING","COMMENT_UPDATE_ERROR","COMMENT_DELETE_PENDING","REPLY_READY","REPLY_EDITING","REPLY_UPDATE_PENDING","REPLY_UPDATE_ERROR","REPLY_DELETE_PENDING"]),Xe=(e,t)=>{const n="reactions"in e?Ze(e.reactions,t):void 0,o=$e(e)?Qe(e.comment,e.marked):void 0,a=je(e)?(r=e.votes).currentUserVote.pendingState?{pending:!0,score:(s=r,s.scoresWithoutUserVote+Ke[null!==(i=s.currentUserVote.pendingState)&&void 0!==i?i:s.currentUserVote.type]),state:r.currentUserVote.pendingState}:{pending:!1,score:Je(r),state:r.currentUserVote.type}:void 0;var r,s,i;return Object.assign(Object.assign(Object.assign(Object.assign({},e),n&&{reactions:n}),(0,$.$K)(o)&&{marked:o}),a&&{votes:a})},et=(e,t)=>e.filter((e=>!t.includes(e))),tt=e=>{const{nextChunkState:t}=e.topLevelCommentList,n=ot(e.topLevelCommentList.chunks);return n&&n.nextCursor?"IDLE"===t.type?{type:"HAS",cursor:n.nextCursor}:{type:"PENDING"}:{type:"NONE"}},nt=e=>{const{prevChunkState:t}=e.topLevelCommentList,n=at(e.topLevelCommentList.chunks);return n&&n.previousCursor?"IDLE"===t.type?{type:"HAS",cursor:n.previousCursor}:{type:"PENDING"}:{type:"NONE"}},ot=e=>(0,r.last)(e.filter((e=>"FETCHED"===e.type))),at=e=>(0,r.first)(e.filter((e=>"FETCHED"===e.type))),rt=(e,t)=>{if(!e)return;const n=st(e,e.newRepliesToReplies),o=(e=>{if(!e)return{type:"NONE"};const{nextChunkState:t,chunks:n=[]}=e,o=(0,r.last)(n.filter((0,$.sl)(["FETCHED","INITIAL"])));return o&&o.nextCursor?"IDLE"===t.type?{type:"HAS",cursor:o.nextCursor}:{type:"PENDING"}:{type:"NONE"}})(e),a=(e=>{if(!e)return{type:"NONE"};const{prevChunkState:t,chunks:n=[]}=e,o=(0,r.first)(n.filter((0,$.sl)(["FETCHED","INITIAL"])));return o&&o.previousCursor?"IDLE"===t.type?{type:"HAS",cursor:o.previousCursor}:{type:"PENDING"}:{type:"NONE"}})(e),s=e.parentCommentId;if(0===n.length)return"NONE"===o.type?0===e.liveRepliesPurgatory.length?{type:"EMPTY",parentCommentId:s}:{type:"ONLY_VIEW_LIVE",parentCommentId:s,count:e.liveRepliesPurgatory.length}:0===e.liveRepliesPurgatory.length?{type:"ONLY_LOAD_MORE",parentCommentId:s,next:o}:{type:"ONLY_LOAD_MORE_AND_LIVE",parentCommentId:s,next:o};return{type:"FULL",parentCommentId:s,comments:n.map((e=>t[e])),next:o,prev:a,live:e.liveRepliesPurgatory.length?{type:"SOME",count:e.liveRepliesPurgatory.length}:{type:"NONE"}}},st=(e,t)=>{const n=e.chunks||[],o=(0,r.flatMap)(n,(e=>{switch(e.type){case"REPLY_TARGET":return e.commentId;case"NEW":return e.localOrCommentId;case"LIVE":return e.commentIds;case"FETCHED":case"INITIAL":return(0,r.difference)(e.commentIds,n.filter((0,$.sl)("REPLY_TARGET")).map((e=>e.commentId)),(0,r.flatten)(n.filter((0,$.sl)("LIVE")).map((e=>e.commentIds))),(0,r.flatten)((0,r.values)(t)),n.filter((0,$.sl)("NEW")).map((e=>e.localOrCommentId)),(0,r.flatten)(n.filter((0,$.sl)("LIVE")).map((e=>e.commentIds))));default:throw(0,$.t1)(e)}})).reverse();return it(o,t)},it=(e,t)=>{const n=e=>(0,r.flatMap)(t[e]||[],(e=>[e,...n(e)]));return(0,r.flatMap)(e,(e=>[e,...n(e)]))},lt=e=>0===e.total?0:Object.entries(e.breakdown).map((([e,t])=>t*e)).reduce(((e,t)=>e+t),0)/e.total,ct=e=>({total:e.total,average:lt(e),currentRating:"PENDING"===e.currentRating.type?{value:e.currentRating.pendingValue,isPending:!0}:{value:e.currentRating.value,isPending:!1},inputRating:{value:e.inputRating,isPending:"PENDING"===e.currentRating.type}}),dt=e=>{var t,n,o,a;const s=((e,t)=>{const n=(0,r.flatten)(e.chunks.map((e=>{switch(e.type){case"NEW":{const n=t[e.localOrCommentId];return"commentId"in n?[n.commentId]:[]}case"LIVE":return e.commentIds;case"FETCHED":return[];default:throw(0,$.t1)(e)}})).concat(e.liveCommentsPurgatory));return(0,r.flatMap)(e.chunks,(e=>"FETCHED"===e.type?et(e.commentIds,n):"LIVE"===e.type?e.commentIds:e.localOrCommentId))})(e.topLevelCommentList,e.commentsById),i=s.map((t=>e.commentsById[t])),l=(0,r.keyBy)(s.map((t=>rt(e.replyLists[t],e.commentsById))).filter($.$K),(e=>e.parentCommentId));return{type:"READY",commentList:i,next:tt(e),prev:nt(e),ordering:e.configs.pagination.ordering,totals:e.totals,isEmpty:0===i.length&&0===e.topLevelCommentList.liveCommentsPurgatory.length,replies:l,permissions:e.configs.permissions,scrollAnchor:null===(t=e.effects)||void 0===t?void 0:t.scrollAnchor,highlight:null===(n=e.effects)||void 0===n?void 0:n.highlight,ratings:ct(e.ratings),commentBox:null===(o=e.effects)||void 0===o?void 0:o.commentBox,showLiveCommentsButton:e.topLevelCommentList.liveCommentsPurgatory.length>0?{type:"VISIBLE",count:e.topLevelCommentList.liveCommentsPurgatory.length}:{type:"HIDDEN"},someoneIsTyping:(null===(a=e.effects)||void 0===a?void 0:a.someoneIsTyping)||"none"}},mt=(e,t)=>n=>{const o=((e,t)=>n=>{const o=e.comments[t];if("READY"===(null==o?void 0:o.type))return o.commentsById[n]})(e,t)(n);if(o&&(0,$.sl)(["COMMENT_READY","REPLY_READY"],o))return o.comment},ut=(e,t)=>{var n;const o=e.comments[t];if("READY"===(null==o?void 0:o.type))return null===(n=o.effects)||void 0===n?void 0:n.toast},pt="KTTXDd",Et="akaHZ4",ht="j33YNY";var gt=n(36375);const vt=()=>{const e=(0,Q.q)(),{screenshotMode:t}=(0,y.m)();return a().createElement("div",{"data-hook":i.Y7,className:c()(pt,"wc-separator-color")},a().createElement("div",{className:ht},a().createElement(gt.$,{diameter:17,isStatic:t})),a().createElement("div",{className:Et},a().createElement(d.Z,{priority:"primary"},e("empty-state.list-loading-text"))))},yt=e=>{var t;switch(e.type){case"UNKNOWN":return"UNKNOWN";case"ANONYMOUS":return"VISITOR";case"MEMBER":return null!==(t=e.member.privacyStatus)&&void 0!==t?t:"PRIVATE";default:throw(0,$.t1)(e)}},bt=({memberType:e,permissions:t,isConsumerPreconditionRequired:n,isVisitorToMemberDisabled:o})=>{switch(e){case"PUBLIC":case"PRIVATE":return n?{type:"ALLOW",precondition:"CONSUMER_PRECONDITION"}:{type:"DENY",reason:"UNKNOWN"};case"UNKNOWN":case"VISITOR":return o||!t.registrationData.registrationOpened||t.registrationData.registrationManuallyApproved||t.registrationData.requireEmailVerification?{type:"DENY",reason:"LOGIN_REQUIRED"}:{type:"ALLOW",precondition:"VISITOR_TO_MEMBER"};default:throw(0,$.t1)(e)}},Ct=e=>"ALLOW"===e.type&&"GUEST_FLOW"===e.precondition,It=(e,t,{forceDesktopWhenInlineMobile:n}={})=>o=>{var r=(0,V.__rest)(o,[]);const s=(0,v.h)((e=>(0,g.W7)(e))),{_useInlineMobile:i}=(0,y.m)(),l=!s||n&&i?t:e;return a().createElement(l,Object.assign({},r))};var ft=n(79050),Nt=n(28688);const Rt=(e,t,n)=>class extends a().Component{constructor(){super(...arguments),this.state={error:void 0},this.renderFallback=()=>t?a().createElement(t,{error:this.state.error}):null}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){n?n(e,t):console.log(e,t)}render(){return this.state.error?this.renderFallback():a().createElement(e,Object.assign({},this.props))}},wt=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M11.999 15L6 9.759 6.657 9l5.342 4.666L17.343 9l.657.759z"})),Lt=e=>a().createElement(wt,Object.assign({},e,{style:{transform:"scaleY(-1"}}));var kt=n(69808);const Ot=It((()=>null),(0,kt.Z)({importFn:()=>Promise.all([n.e(1061),n.e(4006),n.e(4544),n.e(6563),n.e(9127),n.e(8984),n.e(7972)]).then(n.bind(n,32928)),errorHandling:{type:"HANDLE"}}));var Tt=n(8608),St=n(60107);const Mt="qK7W_W",Dt="medlZo",At="_iiwXJ",_t="fqpxmM",Pt="GN5b3T",xt="_IHe96",Bt=Rt((({content:e,onShowMoreClick:t,disableShowMore:n=!1,contentId:o})=>{const[r,s,l,m,u,p,E,h,b]=(0,v.h)(((e,t,n)=>{var o;return[e.experiments,e.baseParams.biMetadata,(0,g.s8)(e),null===(o=e.baseParams)||void 0===o?void 0:o.language,(0,g.W7)(e),(0,g.D9)(e),(0,g.Bw)(e),n,(0,g.x5)(e)]})),{pluginConfig:C,ricosTheming:I,contentTruncationLimit:f,transformCommentOnRender:N}=(0,y.m)(),R=(0,Q.q)(),w=a().useRef(null),[L,k]=a().useState(null),O=a().useMemo((()=>C?(0,Nt.On)("async"===(null==C?void 0:C.type)?C.plugins:C,{setHoverMentionData:k}):[]),[C]),T=N&&e?N({content:e}):e,S=a().useMemo((()=>(0,Nt.fL)(T,{truncationThreshold:f})),[T,f]),[M,D]=a().useState("auto"),[A,_]=a().useState((()=>S.truncatedContent?"TruncatedCollapsed":"NonTruncated"));a().useEffect((()=>{if(w.current&&S.truncatedContent&&(0,St.Q)()){const e=new window.ResizeObserver((e=>{D(e[0].contentRect.height)}));return e.observe(w.current),()=>{e.disconnect()}}}),[]);const P={wixExperiments:r,plugins:O,locale:m,isMobile:u,seoSettings:p,theme:Object.assign(Object.assign({palette:h.style.siteColors},null==I?void 0:I.theme),{parentClass:Dt,customStyles:(0,Tt.K)(u,"viewer")}),instance:l,biSettings:{consumer:"wixComments",platform:"Livesite",defaultParams:s,contentId:o,postId:o,containerId:b},linkSettings:{relValue:"nofollow ugc"}},x="TruncatedCollapsed"===A?S.truncatedContent:S.content;return a().createElement("div",{className:Mt},E&&L&&L.ref&&a().createElement(Ot,{key:L.mention.id,viewedMemberId:L.mention.id,elementRef:L.ref}),a().createElement("div",{className:c()(Dt,"wc-content-font",{[At]:"TruncatedCollapsed"===A,[_t]:"TruncatedExpanded"===A,[Pt]:"TruncatedCollapsed"===A}),style:{height:M}},a().createElement("div",{ref:w},a().createElement(ft.Z,Object.assign({content:x},P)))),"NonTruncated"===A||n?null:a().createElement("button",{"data-hook":i.zX,className:c()(xt,"wc-button-secondary-icon-fill"),onClick:()=>{null==t||t("TruncatedCollapsed"===A),_("TruncatedCollapsed"===A?"TruncatedExpanded":"TruncatedCollapsed")}},a().createElement(d.Z,{typography:"content",priority:"buttonSecondary"},R("TruncatedExpanded"===A?"comment.show-less":"comment.show-more")),"TruncatedExpanded"===A?a().createElement(Lt,null):a().createElement(wt,null)))}));Bt.displayName="RicosViewer";const Ht=Bt;var Ft=n(95014);const Vt=e=>new Date(e).getTime()>(new Date).getTime()-6048e5,Wt=e=>{var{className:t}=e,n=(0,V.__rest)(e,["className"]);const{formatRelativeTime:o,screenshotMode:r}=(0,y.m)(),s=(0,Q.q)(),i=n.time?(e=>{const t=new Date,n=new Date(e);return n.getTime()>t.getTime()?t:n})(n.time):null;return i?a().createElement("span",{className:t,"data-hook":"time-ago"},r?"<time>":Vt(i)?o(i):(l=i,(new Date).getFullYear()!==new Date(l).getFullYear()?s("fullDate",{time:i}):s("shortDate",{time:i}))):null;var l};var jt=n(60233),Gt="omKSsGJ",zt="sNHEyVy",Yt="sa7kQu0",Ut="sKD7eYd",qt="sB1AljP",Zt="s__2twDA2",Kt="sr1lUFb",Jt="sppgcqI",Qt="sX0_HQP",$t="spmSvNg",Xt=n.sts.bind(null,Gt);var en="otdza5a",tn="sMgSvMz",nn="sd51dsa",on=n.sts.bind(null,en);const an=({className:e,label:t})=>a().createElement("div",{className:on(tn,e)},a().createElement("div",{className:nn},t)),rn=e=>{const t=a().Children.count(e.children);return a().createElement(a().Fragment,null,a().Children.map(e.children,((e,n)=>a().createElement(a().Fragment,null,e,!(e=>e+1===t)(n)&&a().createElement(D,{className:$t})))))},sn=({avatar:e,owner:t,time:n})=>{var o,r,s,l,c;const{roleIcons:d,roleBadges:m,hideBadge:u,hidePublishDate:p}=(0,y.m)(),{isMAInstalled:E,isMobile:h}=(0,v.h)((e=>({isMAInstalled:(0,g.Bw)(e),isMobile:(0,g.W7)(e)}))),b=(0,Q.q)(),[C,I]=a().useState(!1),f=a().useRef(null),{memberBadge:N,memberRole:R,member:w}="MEMBER"===t.type?{memberBadge:null!==(s=null===(r=null===(o=t.member)||void 0===o?void 0:o.memberBadges)||void 0===r?void 0:r[0])&&void 0!==s?s:void 0,memberRole:null===(c=null===(l=t.member)||void 0===l?void 0:l.memberRoles)||void 0===c?void 0:c[0],member:t.member}:{memberBadge:void 0,memberRole:void 0,member:void 0},L=R&&(null==d?void 0:d[R]),k=R&&(null==m?void 0:m[R]);return a().createElement("div",{ref:f,onMouseOver:()=>I(!0),className:Xt(zt,{isMobile:h})},E&&"MEMBER"===t.type&&C&&f.current&&a().createElement(Ot,{viewedMemberId:t.member.id,elementRef:f.current}),e||null,a().createElement("div",{className:Yt},a().createElement(jt.Z,{className:Qt,member:w},a().createElement("span",{className:Xt(Ut),"data-hook":i.S7},(0,Ge.gA)(t,b)),L?a().createElement("div",{className:Kt},a().createElement(L,null)):null,k?a().createElement(an,{className:Jt,label:null==k?void 0:k.label}):null),a().createElement("div",{className:Qt},a().createElement(rn,null,[n&&!p&&a().createElement(Wt,{className:qt,time:n,key:"time-ago"}),N&&!u&&a().createElement(Ft.Z,{className:Zt,badge:N,key:"member-badge"})].filter(Boolean)))))},ln=(0,kt.Z)({importFn:()=>n.e(1030).then(n.bind(n,35075)),errorHandling:{type:"HANDLE"}}),cn=(0,kt.Z)({importFn:()=>n.e(4474).then(n.bind(n,51035)),errorHandling:{type:"HANDLE"}}),dn=(0,kt.Z)({importFn:()=>n.e(4809).then(n.bind(n,36426)),errorHandling:{type:"HANDLE"}}),mn=(0,kt.Z)({importFn:()=>n.e(9696).then(n.bind(n,16921)),errorHandling:{type:"HANDLE"}}),un=It(cn,ln),pn=It(mn,dn),En=(0,kt.Z)({importFn:()=>n.e(3235).then(n.bind(n,64689)),errorHandling:{type:"HANDLE"}}),hn=(0,kt.Z)({importFn:()=>n.e(3235).then(n.bind(n,67093)),errorHandling:{type:"HANDLE"}});var gn="o__5eUUYL",vn="sYEIw4b",yn="sLqUrws",bn="s__3q5LhI",Cn=n.sts.bind(null,gn);const In=a().forwardRef((({id:e,isMarked:t,isReply:n,dataHook:o,isPending:r,children:s,className:i},l)=>{const{screenshotMode:c}=(0,y.m)(),d=(0,v.h)(g.W7);return a().createElement("div",{ref:l,tabIndex:-1,id:e,"data-hook":o,className:Cn(vn,{isMobile:d,isPending:r,isReply:n,noTransitions:!!c,isMarked:!!t},i)},a().createElement("div",{className:Cn(bn,"wc-comment-highlight")}),a().createElement("div",{className:yn},s))}));var fn="oiPsXOh",Nn="s__73JYhI",Rn=n.sts.bind(null,fn);var wn=n(72069);const Ln=({customBadgeLabel:e,customBadgeIcon:t})=>{const n=(0,Q.q)(),o=(0,wn.k)(t);return a().createElement("div",{className:Rn(Nn),"data-hook":i.hK},o&&a().createElement(o,null),e||n("featured-badge.featured"))};var kn=n(11749),On="oT2Ms_X",Tn={root:"sSu__Na",header:"sKji2lZ",leftSide:"sE_Fmbp",rightSide:"s__6kBcas",main:"s__4q5g6V",footer:"sEpQCw4",featuredBadge:"sa_Lb0A",avatar:"snp83zX",replyingTo:"sa3cyai",rating:"s__0rvk_j"},Sn=n.sts.bind(null,On);const Mn=({owner:e,createdAt:t,content:n,rating:o,isPending:r=!1,replyingTo:s,isReply:l,actionsMenu:d,id:m,onShowMoreClick:u,disableShowMore:p,isLive:E,isError:h,footer:g,commentId:v,isMarked:b,customBadgeLabel:C,customBadgeIcon:I})=>{const{hideAvatars:f}=(0,y.m)();return a().createElement(In,{id:m,dataHook:c()(i.xC,r&&i.hA,l?i.Bp:i.pi,h&&i.pn,b&&i.dn),className:Sn(Tn.root,{isReply:l}),isPending:r,isReply:l,isMarked:b},a().createElement("div",{className:Sn(Tn.header,{isMarked:!!b})},a().createElement("div",{className:Tn.leftSide},a().createElement(sn,{owner:e,time:t,avatar:!f&&a().createElement(kn.Y,{className:Tn.avatar,owner:e,avatarSize:l?ve.D.small:ve.D.medium})})),a().createElement("div",{className:Tn.rightSide},E&&a().createElement(hn,{position:"mobile-comment"}),d)),a().createElement("div",{className:Tn.main},b&&a().createElement("div",{className:Tn.featuredBadge},a().createElement(Ln,{customBadgeLabel:C,customBadgeIcon:I})),!l&&(null==o?void 0:o.value)&&a().createElement(me,{className:Tn.rating,rating:o.value,isPending:o.isPending&&r}),s&&a().createElement("div",{className:Tn.replyingTo},s),a().createElement("div",{"data-hook":i.kk,className:Tn.content},a().createElement(Ht,{content:n,onShowMoreClick:u,disableShowMore:p,contentId:v}))),a().createElement("div",{className:Tn.footer},g))};var Dn="oLH_AtG",An={root:"sXc_bdn",header:"s__4jd3OZ",rightSide:"s__6aynii",main:"sfs6Zfe",footer:"sl_v270",commentBoxContainer:"sU845Ik",avatar:"s_VLeLJ",featuredBadge:"s__9vjmS4",replyingTo:"sA6r5om",rating:"sVvAUm0",viewerClass:"s_rh2yh"},_n=n.sts.bind(null,Dn);const Pn=It(Mn,(({owner:e,content:t,createdAt:n,replyingTo:o,isPending:r=!1,isError:s=!1,isReply:l,actionsMenu:d,id:m,onShowMoreClick:u,disableShowMore:p,isLive:E,footer:h,commentId:g,rating:v,isMarked:b,customBadgeLabel:C,customBadgeIcon:I})=>{const{hideAvatars:f}=(0,y.m)();return a().createElement(In,{id:m,dataHook:c()(i.xC,r&&i.hA,l?i.Bp:i.pi,s&&i.pn,b&&i.dn),className:_n(An.root,{isReply:l}),isPending:r,isReply:l,isMarked:b},a().createElement("div",{className:_n(An.header,{isMarked:!!b})},a().createElement(sn,{owner:e,time:n,avatar:!f&&a().createElement(kn.Y,{className:An.avatar,owner:e,avatarSize:l?ve.D.small:ve.D.medium})}),a().createElement("div",{className:An.rightSide},E&&a().createElement(hn,{position:"desktop-comment"}),d)),a().createElement("div",{className:An.main},b&&a().createElement("div",{className:An.featuredBadge},a().createElement(Ln,{customBadgeLabel:C,customBadgeIcon:I})),!l&&(null==v?void 0:v.value)&&a().createElement(me,{className:An.rating,rating:v.value,isPending:v.isPending&&r}),o&&a().createElement("div",{className:An.replyingTo},o),a().createElement("div",{"data-hook":i.kk,className:An.content},a().createElement(Ht,{content:t,onShowMoreClick:u,disableShowMore:p,contentId:g}))),a().createElement("div",{className:An.footer},h))}));var xn="oOVBqTi",Bn="sPnYk5B",Hn="sm1O5Ja",Fn="sv_y_gf",Vn=n.sts.bind(null,xn);const Wn=({isReply:e=!1,isPending:t=!1,id:n})=>{const o=(0,v.h)(g.W7),{hideAvatars:r}=(0,y.m)(),s=(0,Q.q)();return a().createElement(In,{id:n,dataHook:c()(i.xC,i.oZ,e?i.Bp:i.pi,t&&i.hA),isPending:t,isReply:e},a().createElement("div",{"data-hook":i.oZ,className:Vn(Bn,{isReply:e,isMobile:o})},!r&&a().createElement(ge.q,{className:Hn,size:e?ve.D.small:ve.D.medium}),a().createElement("span",{className:Fn,"data-hook":i.kk},s(e?"reply.was-deleted":"comment.was-deleted"))))},jn=a().lazy((()=>Promise.all([n.e(1414),n.e(442)]).then(n.bind(n,99685)))),Gn=e=>{var t;const n="undefined"==typeof window,{pluginConfig:o}=(0,y.m)(),[r,s]=a().useState(),i="async"===(null==o?void 0:o.type)&&o.loadEditorPluginsAsync;return a().useEffect((()=>{i&&i().then(s)}),[i]),n?null:a().createElement(a().Suspense,{fallback:null!==(t=e.fallback)&&void 0!==t?t:null},a().createElement(jn,Object.assign({},e,{pluginConfig:"async"===(null==o?void 0:o.type)?{type:"async",plugins:r,onLoadFinished:async()=>{i&&await i()}}:{type:"sync",plugins:o}})))};var zn="o_W0jP_",Yn="s__8HZeIW",Un="sOTYuim",qn="spgc18r",Zn="sfGg4Or",Kn="sQ6Iq_9",Jn="sTvuaHr",Qn="shKtqqE",$n="szlHlqt",Xn=n.sts.bind(null,zn);const eo=({size:e,...t})=>o.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e||"24",height:e||"24",...t},o.createElement("path",{fillRule:"evenodd",d:"M20.9502,8.8922 C20.8322,8.5282 20.5222,8.2672 20.1432,8.2112 L15.1362,7.4842 L12.8962,2.9472 C12.5572,2.2592 11.4422,2.2592 11.1032,2.9472 L8.8642,7.4842 L3.8562,8.2112 C3.4772,8.2672 3.1682,8.5282 3.0492,8.8922 C2.9312,9.2562 3.0282,9.6502 3.3022,9.9172 L6.9262,13.4492 L6.0712,18.4362 C6.0062,18.8142 6.1582,19.1882 6.4682,19.4132 C6.7782,19.6412 7.1812,19.6692 7.5212,19.4912 L11.9992,17.1352 L16.4792,19.4912 C16.6262,19.5692 16.7862,19.6072 16.9452,19.6072 C17.1512,19.6072 17.3572,19.5412 17.5322,19.4132 C17.8422,19.1882 17.9942,18.8142 17.9292,18.4362 L17.0742,13.4502 L20.6982,9.9172 C20.9722,9.6502 21.0692,9.2562 20.9502,8.8922"}));eo.displayName="FavoriteFill";var to=eo;const no=({size:e,...t})=>o.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e||"24",height:e||"24",...t},o.createElement("path",{fillRule:"evenodd",d:"M11.9995,16.1943 C12.1595,16.1943 12.3205,16.2323 12.4665,16.3103 L16.9435,18.6643 L16.0885,13.6763 C16.0325,13.3533 16.1405,13.0223 16.3755,12.7923 L19.9995,9.2583 L14.9925,8.5323 C14.6665,8.4853 14.3845,8.2803 14.2395,7.9853 L11.9995,3.4483 L11.9985,3.4443 L9.7605,7.9853 C9.6155,8.2803 9.3335,8.4853 9.0075,8.5323 L3.9995,9.2593 L7.6245,12.7913 C7.8595,13.0223 7.9675,13.3533 7.9115,13.6763 L7.0565,18.6643 L11.5355,16.3093 C11.6805,16.2323 11.8395,16.1943 11.9995,16.1943 M16.9445,19.6653 C16.7865,19.6653 16.6265,19.6273 16.4785,19.5483 L11.9995,17.1943 L7.5205,19.5483 C7.1815,19.7263 6.7775,19.6983 6.4675,19.4713 C6.1575,19.2463 6.0055,18.8723 6.0705,18.4943 L6.9265,13.5063 L3.3025,9.9753 C3.0275,9.7083 2.9315,9.3143 3.0495,8.9503 C3.1675,8.5863 3.4775,8.3253 3.8565,8.2693 L8.8645,7.5423 L11.1035,3.0053 C11.4425,2.3173 12.5575,2.3173 12.8965,3.0053 L15.1355,7.5423 L20.1435,8.2693 C20.5225,8.3253 20.8325,8.5863 20.9505,8.9503 C21.0685,9.3143 20.9725,9.7083 20.6975,9.9753 L17.0745,13.5073 L17.9295,18.4943 C17.9945,18.8723 17.8425,19.2463 17.5325,19.4713 C17.3565,19.5993 17.1515,19.6653 16.9445,19.6653"}));no.displayName="Favorite";var oo=no;const ao=({size:e,...t})=>o.createElement("svg",{viewBox:"0 0 32 32",fill:"currentColor",width:e||"32",height:e||"32",...t},o.createElement("path",{fillRule:"evenodd",d:"M28.6265,13.6325 C28.9655,13.3015 29.0845,12.8175 28.9385,12.3665 C28.7925,11.9165 28.4105,11.5945 27.9415,11.5265 L20.5785,10.4565 C20.5015,10.4445 20.4345,10.3965 20.4005,10.3275 L17.1075,3.6545 L17.1075,3.6535 C16.8975,3.2295 16.4735,2.9655 16.0005,2.9655 L15.9995,2.9655 C15.5255,2.9655 15.1025,3.2295 14.8925,3.6545 L11.5985,10.3275 C11.5645,10.3965 11.4985,10.4445 11.4225,10.4565 L4.0575,11.5265 C3.5895,11.5945 3.2075,11.9165 3.0615,12.3665 C2.9155,12.8175 3.0345,13.3015 3.3735,13.6325 L8.7025,18.8265 C8.7575,18.8805 8.7835,18.9585 8.7705,19.0345 L7.5125,26.3695 C7.4325,26.8355 7.6205,27.2985 8.0035,27.5765 C8.2195,27.7345 8.4735,27.8145 8.7285,27.8145 C8.9245,27.8145 9.1215,27.7665 9.3045,27.6705 L15.8895,24.2085 C15.9595,24.1725 16.0415,24.1725 16.1085,24.2075 L22.6955,27.6705 C23.1155,27.8915 23.6135,27.8555 23.9965,27.5765 C24.3795,27.2985 24.5675,26.8355 24.4875,26.3695 L23.2305,19.0355 C23.2165,18.9585 23.2425,18.8805 23.2975,18.8265 L28.6265,13.6325 Z"}));ao.displayName="FavoriteFillLarge";var ro=ao;const so=({size:e,...t})=>o.createElement("svg",{viewBox:"0 0 32 32",fill:"currentColor",width:e||"32",height:e||"32",...t},o.createElement("path",{fillRule:"evenodd",d:"M16,3.966 C15.956,3.966 15.848,3.979 15.789,4.097 L12.496,10.77 C12.317,11.133 11.969,11.386 11.567,11.445 L4.202,12.515 C4.072,12.534 4.026,12.634 4.012,12.675 C3.999,12.717 3.978,12.824 4.072,12.917 L9.4,18.111 C9.691,18.394 9.824,18.803 9.755,19.204 L8.498,26.538 C8.476,26.668 8.556,26.742 8.591,26.768 C8.627,26.793 8.721,26.846 8.838,26.786 L15.426,23.323 C15.785,23.133 16.215,23.134 16.574,23.322 L23.162,26.786 C23.277,26.846 23.374,26.793 23.409,26.768 C23.444,26.742 23.524,26.668 23.502,26.538 L22.245,19.204 C22.176,18.803 22.309,18.394 22.6,18.111 L27.928,12.917 C28.022,12.824 28.001,12.717 27.988,12.675 C27.974,12.634 27.928,12.534 27.798,12.515 L20.434,11.445 C20.031,11.386 19.683,11.133 19.504,10.769 L16.211,4.097 C16.152,3.979 16.044,3.966 16,3.966 M8.728,27.814 C8.473,27.814 8.22,27.734 8.003,27.577 C7.62,27.299 7.432,26.836 7.512,26.369 L8.77,19.035 C8.783,18.958 8.758,18.881 8.702,18.826 L3.374,13.633 C3.035,13.302 2.915,12.817 3.061,12.367 C3.208,11.916 3.589,11.594 4.058,11.526 L11.422,10.456 C11.499,10.445 11.565,10.397 11.599,10.328 L14.893,3.654 C15.102,3.23 15.526,2.966 16,2.966 C16.474,2.966 16.898,3.23 17.107,3.654 L20.401,10.327 C20.435,10.397 20.501,10.445 20.579,10.456 L27.942,11.526 C28.411,11.594 28.792,11.916 28.939,12.367 C29.085,12.817 28.965,13.302 28.626,13.633 L23.298,18.826 C23.242,18.881 23.217,18.958 23.23,19.035 L24.488,26.369 C24.568,26.836 24.38,27.299 23.997,27.577 C23.614,27.855 23.116,27.892 22.696,27.671 L16.109,24.208 C16.042,24.173 15.959,24.172 15.891,24.208 L9.304,27.671 C9.122,27.767 8.924,27.814 8.728,27.814"}));so.displayName="FavoriteLarge";var io=so,lo=n(52945);const co="ratings-input-rating-star-wrapper",mo="ratings-input-rating-star",uo="ratings-input-container",po="ratings-input-label",Eo="ratings-input-reaction-label",ho="data-disabled",go="data-size",vo="data-layout",yo="data-active";var bo=n(44699);const Co=o.forwardRef(((e,t)=>{var{className:n,value:a,disabled:r,onSelect:s=(()=>{}),label:i,size:l="small",labelLayout:c="labelTop",errorMessage:d,getReactionLabel:m}=e,u=(0,V.__rest)(e,["className","value","disabled","onSelect","label","size","labelLayout","errorMessage","getReactionLabel"]);const[p,E]=o.useState(),h=o.useMemo((()=>(0,bo.Z)("error-message-id")),[]),g=o.useMemo((()=>(0,bo.Z)("rating-name")),[]),v=o.useRef(new Map);o.useImperativeHandle(t,(()=>({focus:()=>{v.current.get(1).focus()},blur:()=>{C&&v.current.get(C).blur()}}))),o.useEffect((()=>{void 0===a&&void 0!==p&&E(void 0)}),[a]);const y="small"===l?to:ro,b="small"===l?oo:io,C=p||a;return o.createElement(lo.Y,{"data-hook":u["data-hook"],visible:Boolean(d),message:d,messageId:h,className:Xn(Yn,{layout:c,size:l,disabled:r,withError:Boolean(d)},n)},o.createElement("fieldset",{className:Un,"data-hook":uo,[go]:l,[ho]:Boolean(r),[vo]:c},i?o.createElement("legend",{className:qn,"data-hook":po},i):null,o.createElement("div",{className:Kn},[1,2,3,4,5].map((e=>{const t=`${g}-rating-${e}`,n=e<=C;return o.createElement("div",{key:e,"data-hook":co,className:Jn,onMouseEnter:()=>!r&&E(e),onMouseLeave:()=>!r&&E(void 0),onMouseDown:()=>!r&&s(e)},o.createElement("input",{"data-hook":mo,[yo]:n,id:t,ref:t=>((e,t)=>{v.current.has(t)||v.current.set(t,e)})(t,e),className:$n,value:e,type:"radio",checked:e===a,name:g,disabled:r,onChange:()=>!r&&s(e),"aria-describedby":d&&h}),o.createElement("span",{className:Qn,"aria-hidden":!0},n?o.createElement(y,null):o.createElement(b,null)),m?o.createElement("label",{className:Xn(Zn,{srOnly:!0}),htmlFor:t},m(e)):null)}))),m&&C?o.createElement("span",{className:Xn(Zn,{srOnly:!1,size:l}),"aria-hidden":!0,"data-hook":Eo},m(C)):null))}));Co.displayName="RatingsInput";const Io=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},e),a().createElement("path",{fillRule:"evenodd",d:"M16 3.966a.23.23 0 0 0-.211.131l-3.293 6.673a1.237 1.237 0 0 1-.929.675l-7.365 1.07a.232.232 0 0 0-.19.16.234.234 0 0 0 .06.242L9.4 18.111c.291.283.424.692.355 1.093l-1.257 7.334a.23.23 0 0 0 .093.23c.036.025.13.078.247.018l6.588-3.463c.359-.19.789-.189 1.148-.001l6.588 3.464c.115.06.212.007.247-.018a.23.23 0 0 0 .093-.23l-1.257-7.334c-.069-.401.064-.81.355-1.093l5.328-5.194a.234.234 0 0 0 .06-.242.232.232 0 0 0-.19-.16l-7.364-1.07a1.235 1.235 0 0 1-.93-.676l-3.293-6.672A.23.23 0 0 0 16 3.966M8.728 27.814a1.234 1.234 0 0 1-1.216-1.445l1.258-7.334a.236.236 0 0 0-.068-.209l-5.328-5.193a1.229 1.229 0 0 1-.313-1.266c.147-.451.528-.773.997-.841l7.364-1.07a.234.234 0 0 0 .177-.128l3.294-6.674A1.226 1.226 0 0 1 16 2.966c.474 0 .898.264 1.107.688l3.294 6.673c.034.07.1.118.178.129l7.363 1.07c.469.068.85.39.997.841.146.45.026.935-.313 1.266l-5.328 5.193a.236.236 0 0 0-.068.209l1.258 7.334c.08.467-.108.93-.491 1.208a1.227 1.227 0 0 1-1.301.094l-6.587-3.463a.236.236 0 0 0-.218 0l-6.587 3.463c-.182.096-.38.143-.576.143"}));var fo=n(63691);const No=e=>({content:e,isEmpty:!e||!("nodes"in e)||(0,fo.g)(e),isBusy:!1,editorKey:Date.now()});var Ro=n(40301),wo=n(30716);var Lo=n(94251),ko=n(73567);const Oo=a().lazy((()=>n.e(9987).then(n.bind(n,14527)))),To=e=>{var{children:t}=e,n=(0,V.__rest)(e,["children"]);const{screenshotMode:o}=(0,y.m)(),[r,s]=a().useState({isLoaded:!!o,shouldShowOnMount:!1}),l=()=>a().createElement("div",{onKeyDown:e=>"Enter"===e.key&&s({isLoaded:!0,shouldShowOnMount:!0}),onClick:()=>s({isLoaded:!0,shouldShowOnMount:!0}),onMouseEnter:()=>s({isLoaded:!0,shouldShowOnMount:!1})},a().createElement(ko.Z,{"data-hook":i.J_,disabled:n.disabled},t));return r.isLoaded?a().createElement(a().Suspense,{fallback:a().createElement(l,null)},a().createElement(Oo,Object.assign({},n,{showOnMount:r.shouldShowOnMount}),t)):a().createElement(l,null)};var So="sIllo5b";var Mo="oyujDPz",Do="s__70qYFs",Ao=n.sts.bind(null,Mo);const _o=({priority:e,onClick:t,dataHook:n,disabled:o,children:r})=>a().createElement("button",{className:Ao(Do,{priority:e,isDisabled:o}),"data-hook":n,onClick:t,disabled:o},r),Po=({disabled:e,isEdit:t,withDropdown:n=!1,onCancel:o,onSubmit:r,onDropdownShow:s,publishButtonText:l})=>{const c=(0,Q.q)();return a().createElement("div",{className:So},a().createElement(_o,{dataHook:i.QG,onClick:o,priority:"secondary"},c("comment-box.cancel")),a().createElement(a().Fragment,null,n?a().createElement(To,{onPublish:e=>r(e),onDropdownShow:s,disabled:e},null!=l?l:c("comment-box.submit")):a().createElement(_o,{dataHook:i.J_,onClick:()=>{r()},priority:"primary",disabled:e},t?c("comment-box.save"):null!=l?l:c("comment-box.submit"))))},xo=(e,t)=>`${e}-${t}`,Bo=e=>e.isReply?"comment-box.placeholder-reply":e.withRating&&e.isMobile&&!e.isExpanded?"comment-box.placeholder-ratings":"comment-box.placeholder",Ho=(e,t)=>`${e}${t?"*":""}`;var Fo=n(71561),Vo="o_MRNY8",Wo="ss7xp2z",jo="sEQR6ae",Go="sXc7TIf",zo="szsg0tS",Yo=n.sts.bind(null,Vo);const Uo=({text:e})=>{const[t,n]=a().useState(!1),o=t?Fo.j:"div",r=a().useRef(null),s=a().useRef(null),l=a().useRef(!1),c=(0,v.h)(g.W7);return a().useEffect((()=>{r.current&&s.current&&r.current.getBoundingClientRect().width<s.current.getBoundingClientRect().width&&(l.current=!0)}),[e]),a().createElement(o,{className:Yo(Wo,{isMobile:c}),content:a().createElement("div",{className:zo},e),disabled:!l.current,showDelay:400,minWidth:400,placement:"top-start",appendTo:"window",flip:!0},a().createElement("div",{ref:r,className:jo,onMouseOver:()=>n(!0)},a().createElement("span",{className:Go,ref:s},e),a().createElement("span",{"data-hook":i.VF},e)))};var qo=n(53079);const Zo=()=>{const[e,t]=a().useState(),n=a().useRef(null),o=a().useRef(null);return a().useLayoutEffect((()=>{if(n.current&&o.current&&(0,St.Q)()){const e=new ResizeObserver((0,r.throttle)((([e])=>{var n,a;const{width:r}=e.contentRect,s=null!==(a=null===(n=o.current)||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==a?a:0;t(r-s)})));return e.observe(n.current),()=>{e.disconnect()}}}),[]),{maxWidth:e,containerRef:n,elementRef:o}};var Ko="ouUQNMb",Jo="sDDcbHv",Qo="sr6Zxz9",$o=n.sts.bind(null,Ko);const Xo=({className:e,publishControls:t,ricosToolbarId:n})=>{const o=(0,v.h)(g.W7),{maxWidth:r,containerRef:s,elementRef:i}=Zo();return a().createElement("div",{className:$o(Jo,{isMobile:o},e),ref:s},a().createElement(qo.Z,{className:Qo,toolbarId:n,ref:i}),a().createElement("div",{style:{maxWidth:null!=r?r:"auto"}},t))};var ea="sLBK_ak",ta="sXIzcQA",na="sFhdkBe",oa="s__2Lck1t",aa="sRkWmps";const ra=({publishControls:e,currentMember:t})=>{var n;const{maxWidth:o,containerRef:r,elementRef:s}=Zo(),i=(0,Q.q)();return a().createElement("div",{className:ea,ref:r},a().createElement("div",{className:ta,ref:s},(null==t?void 0:t.profile)&&[a().createElement(ge.q,{className:aa,size:ve.D.xSmall,src:null===(n=t.profile.photo)||void 0===n?void 0:n.url}),a().createElement("div",{className:na},i("comment-box-footer.commenting-as",{name:t.profile.nickname}))]),a().createElement("div",{className:oa,style:{maxWidth:null!=o?o:"auto"}},e))};var sa="oJos9ev",ia="spaugJR",la="sGK7pI3",ca="s__8Bs4we",da="sjk0saA",ma="slvZ_6C",ua="s__3lVXxZ",pa="sCw2HMG",Ea="s__85efAq",ha="sgu_8Mz",ga=n.sts.bind(null,sa);const va=(0,Ro.eT)((({onSubmit:e,onCancel:t,formName:n,className:o,mountExpanded:r=!1,initialContent:s,isEdit:l,isReply:d,isInList:m,id:u,dataHook:p,onTyping:E,withGuestFlow:h,editorEvents:b,commentId:C,isMarked:I=!1,forwardRef:f,rating:N,ratingLabel:R,onRatingChange:w})=>{var L;const{resourceId:k,placeholderText:O,publishButtonText:T}=(0,y.m)(),[S,M]=a().useState((()=>r)),[D,A]=a().useState("default"),{currentMember:_,biClickPublishSelectBtn:P,biInitiateImageUpload:x,biInitiateFileUpload:B,biCommentFormExpanded:H,isMobile:F}=(0,v.h)(((e,t)=>({currentMember:(0,Ge.R4)(e),biClickPublishSelectBtn:t.biClickPublishSelectBtn,biCommentFormExpanded:t.biCommentFormExpanded,isMobile:(0,g.W7)(e),biInitiateImageUpload:t.biInitiateImageUpload,biInitiateFileUpload:t.biInitiateFileUpload}))),V=a().useRef(!0),W=a().useRef(),j=a().useRef(null),G=(0,Q.q)(),z=(({initialContent:e,onTyping:t})=>{const[n,o]=a().useState(No(e));return Object.assign(Object.assign({},n),{onChange:e=>{o((o=>n.editorKey!==o.editorKey?o:(t&&!e.contentTraits.isEmpty&&e.contentTraits.isContentChanged&&t(),Object.assign(Object.assign({},o),{content:e.content,isEmpty:e.contentTraits.isEmpty,editorKey:o.editorKey}))))},onBusyChange:e=>{o((t=>n.editorKey!==t.editorKey?t:Object.assign(Object.assign({},t),{isBusy:e,editorKey:t.editorKey})))},reset:()=>o(No()),getIsValid:()=>!n.isBusy&&!n.isEmpty,getIsEmpty:()=>n.isEmpty})})({initialContent:s,onTyping:E}),Y=(0,K.dd)(),U=async({asGuest:t})=>{const n=await b.publish();V.current=!1;const o=(()=>{if(N)return N.value?{type:"ADD",value:N.value}:N.hasPrevious?{type:"REMOVE"}:void 0})();e({content:n,rating:o},z.reset,t)},q=(({onCancel:e,id:t,isReply:n})=>{const o=(0,K.dd)();return()=>{const r=e();if("SILENT_CANCEL"===r.type)return r;const s="COMMENT"===r.discard?Ie.x5:Ie.M;return{type:"PROMPT",onConfirm:r.onConfirm,highlightId:t,prompt:()=>new Promise((e=>{o((t=>a().createElement(s,{toggle:t,isReply:n,onClose:t=>{e(t?"CONFIRM_DISCARD":"CANCEL_DISCARD")}})))}))}}})({onCancel:()=>t(z.content,(()=>{z.reset(),M(!1),V.current=!0}),z.getIsEmpty()),isReply:d,id:u});(0,wo.Z5)({resolveCancelFlow:q,formIsMounted:S});const Z=(e=>()=>{const t=e();if("SILENT_CANCEL"!==t.type){const{prompt:e,onConfirm:n}=t;e().then((e=>"CONFIRM_DISCARD"===e&&n()))}else t.cleanup()})(q);a().useImperativeHandle(f,(()=>({getElementRef:()=>j.current,expand:async e=>{var t;void 0!==(null==e?void 0:e.autoFocus)&&(V.current=e.autoFocus),M(!0),H({resourceId:k}),j.current&&await(t=j.current,new Promise((e=>{t.addEventListener("transitionend",e,{once:!0}),setTimeout(e,500)})))},close:()=>M(!1),focus:()=>{var e;return W.current?(null===(e=W.current)||void 0===e||e.focus("end"),"focus_initiated"):"not_ready"}})));const J=!(!N||d)&&(!F||S),$=null!=O?O:G(Bo({isExpanded:S,isMobile:F,isReply:d,withRating:!!N})),X=()=>{return a().createElement(Po,{isEdit:l,disabled:!(z.getIsValid()&&(e=null==N?void 0:N.value,d||!(null==N?void 0:N.isRequired)||e)),onSubmit:e=>{h&&F?(P({resourceId:k,isReply:d}),Y((e=>a().createElement(Lo.default,{toggle:e,onPublish:({asGuest:e})=>{U({asGuest:e})}})))):U({asGuest:e||!1})},onCancel:Z,withDropdown:h&&!F,onDropdownShow:()=>P({resourceId:k,isReply:d}),publishButtonText:T});var e},ee=a().createElement(a().Fragment,null,a().createElement("div",{className:ga(la,{isHighlighted:"default"!==D,isExpanded:S}),onMouseEnter:()=>A((e=>"focus"===e?e:"hover")),onMouseLeave:()=>A((e=>"focus"===e?e:"default"))},J?a().createElement("div",{className:pa},a().createElement(Co,{className:Ea,"data-hook":i.eT,value:null!==(L=null==N?void 0:N.value)&&void 0!==L?L:void 0,label:R&&Ho(R,null==N?void 0:N.isRequired),labelLayout:F?"labelTop":"labelAside",size:F?"large":"small",disabled:!w,onSelect:e=>{const t=e===(null==N?void 0:N.value)?void 0:e;null==w||w(t),M(!0)}}),F&&a().createElement("div",{className:ha})):null,S?a().createElement(a().Fragment,null,a().createElement("div",{className:da,onFocus:()=>A("focus"),onBlur:()=>A("default")},a().createElement(Gn,{setRef:e=>W.current=e,key:z.editorKey,onChange:(e,t)=>z.onChange({content:e,contentTraits:t}),onBusyChange:z.onBusyChange,placeholder:$,initialContent:z.content||void 0,externalToolbarId:xo(k,n),onAddPluginContent:e=>{"image"===e?x({isReply:d,resourceId:k}):B({isReply:d,resourceId:k})},autoFocus:V.current,contentId:C,fallback:a().createElement(Uo,{text:$})})),a().createElement(Xo,{className:ma,ricosToolbarId:xo(k,n),publishControls:F?X():void 0})):a().createElement("button",{"data-hook":i.Iv,className:ca,onClick:()=>{H({resourceId:k}),M(!0)}},N&&F?a().createElement(Io,{className:ua}):null," ",a().createElement(Uo,{text:$}))),S&&a().createElement(ra,{currentMember:_,publishControls:F?void 0:X()}));return m?a().createElement(In,{ref:j,id:u,isPending:!1,isReply:d,dataHook:c()(i.xC,d?i.Bp:i.pi,i.rF,p),isMarked:I},a().createElement("div",{className:ga(ia,{isReply:d,isEdit:l,isMobile:F,withRating:!!N},o)},ee)):a().createElement("div",{id:u,ref:j,"data-hook":c()(i.rF,p),className:ga(ia,{isReply:d,isMobile:F,withRating:!!N},o)},ee)}));var ya=n(69017);const ba=(e,t)=>!(!e||!t)&&(0,ya.P)(e,t);var Ca=n(98082);const Ia="BND14u",fa="eBqbGj",Na="GJU0Gb",Ra="GfeFhV",wa="K8ELSV",La="cA3tD3",ka="ffnC8N",Oa=({onClick:e,isPending:t=!1,targetName:n})=>{const o=(0,Q.q)(),{screenshotMode:r}=(0,y.m)();return a().createElement("div",{className:Ia},a().createElement(d.Z,{className:fa,priority:"secondary",typography:"contentSmall"},o("comment.replying-to")),a().createElement(Fo.j,{className:Na,minWidth:170,appendTo:"window",content:a().createElement("div",{className:ka},o("comment.replying-to.tooltip"))},a().createElement("div",{className:Ra},a().createElement("button",{className:c()(wa,"wc-text-color-secondary"),"data-hook":i.G2,onClick:e},a().createElement(d.Z,{className:La,priority:"secondary",typography:"contentSmall"},n),t&&a().createElement(gt.$,{diameter:12,isStatic:r})))))},Ta=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M11.963 13A1.001 1.001 0 1 1 13 12a1.019 1.019 0 0 1-1.037 1zm0-4A1.001 1.001 0 1 1 13 8a1.019 1.019 0 0 1-1.037 1zm.074 6A1.001 1.001 0 1 1 11 16a1.02 1.02 0 0 1 1.037-1z"})),Sa="eGAC3Y",Ma=e=>{const t=(0,K.dd)(),n=!(e.share||e.edit||e.delete||e.report);return n&&!e.showDummy?null:a().createElement("button",{className:Sa,"data-hook":i.j8,onClick:n?void 0:()=>{var n;null===(n=e.onShowMenu)||void 0===n||n.call(e),t((t=>a().createElement(Ie.eJ,Object.assign({toggle:t},e))))}},a().createElement(Ta,{className:"wc-icon-fill"}))},Da=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M12.444 13.5A1.501 1.501 0 1 1 14 12a1.529 1.529 0 0 1-1.556 1.5zm0-6.5A1.501 1.501 0 1 1 14 5.5 1.529 1.529 0 0 1 12.444 7zm.112 10A1.501 1.501 0 1 1 11 18.5a1.531 1.531 0 0 1 1.556-1.5z"}));var Aa=n(82138),_a=n(1124),Pa=n(976),xa=n(65756),Ba="oNSzLlz",Ha="sGOhJ16",Fa=n.sts.bind(null,Ba);const Va="JmbCz0",Wa="JaPT0d",ja=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("defs",null,a().createElement("path",{id:"o97haut5cb",d:"M13.095 10.287l.137.142c1.505 1.63 1.678 4.01.282 5.406l-2.093 2.093-.137.13c-1.472 1.35-3.537 1.325-5.075-.213-1.59-1.59-1.593-3.774-.12-5.248l1.685-1.683.942.942-1.684 1.683-.106.112c-.845.944-.804 2.223.225 3.252 1.06 1.061 2.364 1.047 3.328.083l2.093-2.093.09-.097c.773-.895.595-2.463-.509-3.567l.942-.942zm-.38-4.31c1.473-1.348 3.538-1.324 5.076.214 1.59 1.59 1.593 3.774.12 5.248l-1.685 1.684-.942-.942 1.684-1.684.106-.112c.845-.944.804-2.223-.225-3.252-1.06-1.06-2.364-1.047-3.328-.083l-2.093 2.093-.09.097c-.773.895-.595 2.463.509 3.567l-.942.942-.137-.142c-1.505-1.63-1.678-4.01-.282-5.406l2.093-2.093z"})),a().createElement("g",{transform:"translate(-785 -169) translate(773 149) translate(12 12) translate(0 8)"},a().createElement("use",{xlinkHref:"#o97haut5cb"}))),Ga=({share:e,report:t,edit:n,mark:o,delete:r,shouldAutofocus:s})=>{const l=(0,Q.q)(),{blackAndWhiteModals:c,hideActionMenusIcons:d,markLabels:m}=(0,y.m)(),u=!0===c,p=(null==o?void 0:o.isMarked)?(null==m?void 0:m.unmarkActionLabel)||l("comment-actions.unmark"):(null==m?void 0:m.markActionLabel)||l("comment-actions.mark"),E=(0,wn.k)(null==m?void 0:m.icon)||Pa.Z,h=[e&&a().createElement(ye.y.Item,{prefixIcon:!d&&a().createElement(ja,{"data-hook":i.as}),content:l("comment-actions.copy-link"),onClick:e}),t&&a().createElement(ye.y.Item,{prefixIcon:!d&&a().createElement(xa.Z,null),content:l("comment-actions.report"),onClick:t}),n&&a().createElement(ye.y.Item,{prefixIcon:!d&&a().createElement(_a.d,{"data-hook":i.pA}),content:l("comment-actions.edit"),onClick:n}),o&&a().createElement(ye.y.Item,{prefixIcon:!d&&a().createElement(E,{"data-hook":i.ut}),content:p,onClick:o.action})].filter(Boolean),g=[r&&a().createElement(ye.y.Item,{prefixIcon:!d&&a().createElement(Aa.p,{"data-hook":i.B3}),content:l("comment-actions.delete"),onClick:r})].filter(Boolean),v=[...h,Boolean(h.length&&g.length)&&a().createElement(M,{className:Wa,type:u?"black":"default"}),...g].filter(Boolean);return 0===v.length?null:a().createElement("div",{className:Va},a().createElement(ye.y,{className:Fa(Ha,{theme:!u,blackAndWhite:u}),focusedIndex:s?0:void 0},v))},za="CvqBQw",Ya="cCRfIJ",Ua="NcsTV9",qa=e=>{const t=!(e.share||e.edit||e.delete||e.report),n=(0,Q.q)();return t&&!e.showDummy?null:a().createElement(Ce.Z,{className:za,buttonProps:{"data-hook":i.j8,className:c()("wc-icon-fill",Ya),"aria-label":n("more-button.more-actions"),children:a().createElement(Da,null)},disabled:t,onShowCallback:()=>{var t;return null===(t=e.onShowMenu)||void 0===t?void 0:t.call(e)}},(({isKbTriggered:t})=>a().createElement(fe.N,{dataHook:i.Vz,className:Ua,offset:36},a().createElement(Ga,Object.assign({},e,{shouldAutofocus:t})))))},Za=It(Ma,qa,{forceDesktopWhenInlineMobile:!0});var Ka=n(20807);function Ja({url:e,isMobile:t,afterCopy:n}){const o=()=>{(0,Ka.T)(e),n()};t?function({url:e},t){"undefined"!=typeof navigator&&navigator.share?navigator.share({url:e}):t()}({url:e},o):o()}const Qa=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M12 4c4.418 0 8 3.582 8 8s-3.582 8-8 8-8-3.582-8-8 3.582-8 8-8zm0 .889c-3.927 0-7.111 3.184-7.111 7.111 0 3.927 3.184 7.111 7.111 7.111 3.927 0 7.111-3.184 7.111-7.111 0-3.927-3.184-7.111-7.111-7.111zM12.5 15v1h-1v-1h1zm0-7v6h-1V8h1z",fill:"#DF3131"})),$a="SLyzvN",Xa="PNU_pt",er="qFbnLr",tr="EN3nbL",nr="Qm8ueN",or="GafID7",ar=({onRetry:e,onEdit:t,error:n})=>{const o=null!=n?n:{type:"SILENT"},r=(0,Q.q)();return a().createElement("div",{className:$a},a().createElement(Fo.j,{minWidth:170,appendTo:"window",content:a().createElement("div",{className:or},(()=>{switch(o.type){case"SILENT":return r("comment-footer.unable-to-publish");case"TRANSLATION":case"EXTERNAL_TRANSLATION":return r(o.key,o.keyValue);case"CUSTOM":return o.message;default:throw(0,$.t1)(o)}})())},a().createElement("div",{className:tr},a().createElement(Qa,{className:er}),a().createElement(d.Z,{className:nr,priority:"secondary",typography:"contentSmall"},r("comment-footer.unable-to-publish")))),a().createElement(d.Z,{priority:"secondary",typography:"contentSmall"},a().createElement("button",{"data-hook":i.NZ,className:c()("wc-button-secondary-text-color",Xa),onClick:e},a().createElement(d.Z,{priority:"buttonSecondary",typography:"contentSmall"},r("comment-footer.retry"))),` ${r("comment-footer.or")} `,a().createElement("button",{"data-hook":i.c2,className:c()("wc-link-button-color",Xa),onClick:t},a().createElement(d.Z,{priority:"buttonSecondary",typography:"contentSmall"},r("comment-footer.edit")))))},rr="IzJsT6",sr=()=>{const e=(0,Q.q)();return a().createElement("div",{className:rr},a().createElement(d.Z,{priority:"secondary",typography:"contentSmall"},e("comment-footer.publishing")))},ir=({size:e,...t})=>o.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e||"24",height:e||"24",...t},o.createElement("path",{fillRule:"evenodd",d:"M18.5,3.9997 C19.327,3.9997 20,4.6727 20,5.4997 L20,5.4997 L20,7.9977 L19,7.9977 L19,5.4997 C19,5.2247 18.776,4.9997 18.5,4.9997 L18.5,4.9997 L5.5,4.9997 C5.224,4.9997 5,5.2247 5,5.4997 L5,5.4997 L5,15.4997 C5,15.7757 5.224,15.9997 5.5,15.9997 L5.5,15.9997 L8.5,15.9997 C8.776,15.9997 9,16.2237 9,16.4997 L9,16.4997 L9,19.9287 L12.105,17.1087 L12.777,17.8487 L9.577,20.7547 C9.399,20.9177 9.175,21.0017 8.947,21.0017 C8.818,21.0017 8.687,20.9747 8.562,20.9197 C8.215,20.7667 8,20.4357 8,20.0567 L8,20.0567 L8,16.9997 L5.5,16.9997 C4.673,16.9997 4,16.3267 4,15.4997 L4,15.4997 L4,5.4997 C4,4.6727 4.673,3.9997 5.5,3.9997 L5.5,3.9997 Z M18.0664,9.1904 L21.3774,12.5014 L18.0664,15.8114 L17.3594,15.1044 L19.4634,13.0004 L15.5004,13.0004 C15.2244,13.0004 15.0004,13.2244 15.0004,13.5004 L15.0004,13.5004 L15.0004,18.0004 L14.0004,18.0004 L14.0004,13.5004 C14.0004,12.6724 14.6724,12.0004 15.5004,12.0004 L15.5004,12.0004 L19.4624,12.0004 L17.3594,9.8974 L18.0664,9.1904 Z"}));ir.displayName="Reply";var lr=ir,cr="ovxyWMg",dr="sELFvo9",mr="s__5EXzP_",ur="s__0YMyid",pr="swfu1r_",Er="s__2kJMkM",hr="seWMALA",gr="sGnRM93",vr="soaeJ68",yr=n.sts.bind(null,cr);var br=n(61153),Cr=n(59805);const Ir="_3N4_r",fr="dIKG_f",Nr="oSGR5g",Rr="YFSAwq",wr=({disabled:e,active:t,flip:n=!1,onClick:o,component:r,dataHook:s,className:i})=>{const[l,d]=a().useState(!1);return a().createElement("button",{"data-hook":s,className:c()(Ir,{[Nr]:t,[Rr]:e,[fr]:l},i),onClick:()=>{!l&&d(!0),null==o||o()}},a().cloneElement(r,{style:{transform:n?"scaleY(-1)":""}}))},Lr=e=>a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e),a().createElement("path",{d:"M12 3.8l6.96 8.7H14.5v7h-5v-7H5.04L12 3.8z"}));var kr="oGcYiJA",Or="szLL_mP",Tr="sgdKIH_",Sr="sOQxT5_",Mr=n.sts.bind(null,kr);const Dr=({onVote:e,voteState:t,disabled:n,className:o})=>{const r=(0,v.h)((e=>(0,g.W7)(e))),s=(0,Q.q)(),l={minWidth:100,showDelay:1e3,disabled:r,appendTo:"window"};return a().createElement("div",{"data-hook":c()(i.Jd,t.pending&&i.hA,n&&i.rr),className:Mr(Or,{isDisabled:n},o)},a().createElement(Fo.j,Object.assign({},l,{content:a().createElement("div",{style:{textAlign:"center"}},"UPVOTE"===t.state?s("voting.unupvote-tooltip"):s("voting.upvote-tooltip")),disabled:n}),(()=>{const o="UPVOTE"===t.state;return a().createElement(wr,{className:Mr(Sr,{isActive:o}),dataHook:c()(i.rk,o&&i.iN),onClick:()=>!n&&e(o?"NEUTRAL":"UPVOTE"),active:o,component:a().createElement(Lr,null),disabled:n})})()),a().createElement("span",{className:Tr,"data-hook":i.WD},t.score),a().createElement(Fo.j,Object.assign({},l,{content:a().createElement("div",{style:{textAlign:"center"}},"DOWNVOTE"===t.state?s("voting.undownvote-tooltip"):s("voting.downvote-tooltip")),disabled:n}),(()=>{const o="DOWNVOTE"===t.state;return a().createElement(wr,{className:Mr(Sr,{isActive:o}),dataHook:c()(i.mO,o&&i.iN),onClick:()=>!n&&e(o?"NEUTRAL":"DOWNVOTE"),active:o,component:a().createElement(Lr,null),flip:!0,disabled:n})})()))},Ar=a().createContext(void 0);var _r="sdm0ywx";const Pr=(0,kt.Z)({importFn:()=>Promise.all([n.e(6686),n.e(4712),n.e(2313)]).then(n.bind(n,20410)),errorHandling:{type:"HANDLE"}}),xr=(0,kt.Z)({importFn:()=>Promise.all([n.e(6686),n.e(4712),n.e(2313)]).then(n.bind(n,75706)),errorHandling:{type:"HANDLE"}}),Br=({replyButtonState:e,commentId:t,canReact:n,canVote:o,reactionsState:s,votesState:i})=>{const{resourceId:l,ctxFields:c,likeButtonText:d,replyButtonText:m}=(0,y.m)(),u=a().useContext(Ar),p=(0,Q.q)(),{reactToComment:E,voteOnComment:h,initReply:b,isMobile:C}=(0,v.h)(((e,t)=>({reactToComment:t.reactToComment,voteOnComment:t.voteOnComment,initReply:t.initReply,isMobile:(0,g.W7)(e)}))),I=(()=>{switch(e){case"hidden":return null;case"disabled":return a().createElement(Vr,{disabled:!0});case"enabled":return a().createElement(Vr,{onReply:()=>{const e=(0,Ca.ZS)();b({resourceId:l,targetId:t,localId:e})},replyButtonText:m});default:throw(0,$.t1)(e)}})();switch(u.type){case"none":return a().createElement(Fr,{aside:null},I);case"likes":return a().createElement(Fr,{aside:a().createElement(Pr,{reactionsState:s,commentId:t,config:u,t:p,isPending:s.pending})},a().createElement(br.d,{isDisabled:!n,onClick:e=>E({reactionCode:e,resourceId:l,commentId:t}),likeButtonText:d,activeReaction:s.activeReaction,config:u,isMobile:C,t:p}),I);case"emotions":return a().createElement(Fr,{aside:a().createElement(xr,{isPending:s.pending,reactionsState:s,commentId:t,config:u,t:p,isMobile:C})},a().createElement(Cr.O,{isPending:s.pending,isMobile:C,t:p,isDisabled:!n||s.pending,onClick:e=>E({reactionCode:e,resourceId:l,commentId:t}),reactions:s.reactions,config:u,className:vr}),I);case"votes":{const e=!o,n=e?{disabled:e}:{cb:e=>h({subaction:e,resourceId:l,commentId:t,ctxFields:c})};return a().createElement(Fr,{aside:null},a().createElement("div",{className:yr(mr,{defaultCursor:!0})},a().createElement(Dr,{className:hr,onVote:n.disabled?r.noop:n.cb,voteState:i,disabled:!!n.disabled})),I)}default:throw(0,$.t1)(u)}},Hr=e=>a().createElement(Br,Object.assign({},e,{canVote:!1,votesState:{pending:!1,state:"NEUTRAL",score:0}})),Fr=({children:e,aside:t})=>{const n=(0,v.h)(g.W7);return a().createElement("div",{className:yr(dr,{isMobile:n},_r)},a().createElement("div",{className:Er},e),t)},Vr=e=>{const t=(0,Q.q)(),n=e.disabled?void 0:e.replyButtonText;return a().createElement("button",{"data-hook":i.av,className:yr(mr,{defaultCursor:!!e.disabled},ur),onClick:e.disabled?void 0:e.onReply,disabled:e.disabled},a().createElement(lr,{className:gr}),a().createElement("span",{"data-hook":i.GZ,className:pr},null!=n?n:t("comment.reply")))},Wr="J3den4",jr="Qp8sMy",Gr=a().createContext(null),zr=()=>a().useContext(Gr),Yr=a().memo((({replyState:e,memberState:t})=>{var n,o;const{getPermission:s}=zr(),{resourceId:i,markLabels:l,hideReplyingTo:d,hideAvatars:m,ctxFields:u}=(0,y.m)(),p=(0,Q.q)(),E=((e,t)=>{const n="reactions"in e?Ze(e.reactions,t):void 0,o=$e(e)?Qe(e.comment,e.marked):void 0;return Object.assign(Object.assign(Object.assign({},e),n&&{reactions:n}),(0,$.$K)(o)&&{marked:o})})(e,t),{isMobile:h,createReply:b,updateReply:C,cancelEditingReply:I,cancelCreatingReply:f,editReply:N,viewReplyTo:R,biDiscardComment:w,biClickShowMoreBtn:L,editReplyCreateError:k,replyingToOwner:O,targetComment:T,owner:S}=(0,v.h)(((t,n)=>({isMobile:(0,g.W7)(t),createReply:n.createReply,updateReply:n.updateReply,cancelEditingReply:n.cancelEditingReply,cancelCreatingReply:n.cancelCreatingReply,editReply:n.editReply,viewReplyTo:n.viewReplyTo,biDiscardComment:n.biDiscardComment,replyingToOwner:(0,Ge.Ke)(t,i,e),biClickShowMoreBtn:n.biClickShowMoreBtn,editReplyCreateError:n.editReplyCreateError,biClickPublishSelectBtn:n.biClickPublishSelectBtn,owner:(0,Ge.ei)(E,t.members),targetComment:mt(t,i)(e.targetId)}))),M=a().useRef(!1),D=(({targetComment:e,replyingToOwner:t,replyState:n,t:o})=>{const a="targetStatus"in n?n.targetStatus:void 0;return"DELETED"===(null==e?void 0:e.status)||"DELETED"===a?o("comment.replying-to.deleted-comment"):(0,Ge.gA)(t,o)})({targetComment:T,replyState:E,replyingToOwner:O,t:p});switch(a().useEffect((()=>{switch(E.type){case"REPLY_UPDATE_PENDING":return void(M.current=!0);case"REPLY_EDITING":case"REPLY_CREATE_ERROR_EDITING":case"REPLY_TYPING":case"REPLY_READY":case"REPLY_UPDATE_ERROR":case"REPLY_DELETED":case"REPLY_CREATE_PENDING":case"REPLY_DELETE_PENDING":case"REPLY_LIVE_PENDING":case"REPLY_CREATE_ERROR":return;default:throw(0,$.t1)(E)}}),[E.type]),E.type){case"REPLY_TYPING":{const{localId:e,targetId:t,content:n}=E;return a().createElement(va,{className:c()(Wr,{[jr]:m}),key:(0,Ca.km)({localId:e}),id:(0,Ca.ld)({localId:e}),isReply:!0,isEdit:!1,isInList:!0,formName:`comment-reply-${e}`,initialContent:n,mountExpanded:!0,withGuestFlow:Ct(s({action:"CREATE_REPLY"})),onSubmit:({content:n},o,a)=>{b({content:n,resourceId:i,ctxFields:u,targetId:t,localId:e,asGuest:a})},onCancel:(n,o,a)=>a?{type:"SILENT_CANCEL",cleanup:()=>f({resourceId:i,targetId:t,localId:e})}:{type:"PROMPT",discard:"COMMENT",onConfirm:()=>{w({type:"reply",resourceId:i}),f({resourceId:i,targetId:t,localId:e})}}})}case"REPLY_CREATE_ERROR":{const{localId:e,content:t,targetId:n,error:o,asGuest:r}=E;return a().createElement(Pn,{key:(0,Ca.km)({localId:e}),id:(0,Ca.ld)({localId:e}),commentId:e,content:t,owner:S,isPending:!1,isError:!0,isReply:!0,createdAt:(new Date).toISOString(),replyingTo:d?null:a().createElement(Oa,{onClick:()=>R({ctxFields:u,resourceId:i,targetCommentId:n,sourceCommentId:e}),targetName:D}),actionsMenu:null,disableShowMore:!0,footer:a().createElement(ar,{error:o,onEdit:()=>k({resourceId:i,targetId:n,localId:e}),onRetry:()=>b({content:t,resourceId:i,ctxFields:u,targetId:n,localId:e,asGuest:r})})})}case"REPLY_CREATE_ERROR_EDITING":{const{localId:e,content:t,targetId:n}=E;return a().createElement(va,{className:c()(Wr,{[jr]:m}),key:(0,Ca.km)({localId:e}),id:(0,Ca.ld)({localId:e}),commentId:e,isReply:!0,isEdit:!1,isInList:!0,formName:`comment-reply-${e}`,initialContent:t,withGuestFlow:Ct(s({action:"CREATE_REPLY"})),mountExpanded:!0,onSubmit:({content:t},o,a)=>{b({content:t,resourceId:i,ctxFields:u,targetId:n,localId:e,asGuest:a})},onCancel:(t,o,a)=>a?{type:"SILENT_CANCEL",cleanup:()=>f({resourceId:i,targetId:n,localId:e})}:{type:"PROMPT",discard:"COMMENT",onConfirm:()=>{w({type:"reply",resourceId:i}),f({resourceId:i,targetId:n,localId:e})}}})}case"REPLY_CREATE_PENDING":{const{localId:e,content:t}=E;return a().createElement(Pn,{key:(0,Ca.km)({localId:e}),id:(0,Ca.ld)({localId:e}),commentId:e,content:t,owner:S,isPending:!0,isReply:!0,createdAt:(new Date).toISOString(),replyingTo:d?null:a().createElement(Oa,{onClick:r.noop,targetName:D}),actionsMenu:a().createElement(Za,{showDummy:!0}),disableShowMore:!0,footer:a().createElement(sr,null)})}case"REPLY_UPDATE_ERROR":{const{marked:e,localId:t,content:n,targetId:o,error:r,commentId:s,comment:l}=E;return a().createElement(Pn,{key:(0,Ca.km)({localId:t,commentId:s}),id:(0,Ca.ld)({localId:t,commentId:s}),commentId:s,content:n,owner:S,isPending:!1,isError:!0,isMarked:e.isMarked,isReply:!0,createdAt:l.createdAt,replyingTo:d?null:a().createElement(Oa,{onClick:()=>R({resourceId:i,ctxFields:u,targetCommentId:o,sourceCommentId:s}),targetName:D,isPending:E.replyingToTargetLoading}),actionsMenu:a().createElement(Ur,{commentId:s,comment:l,isMobile:h,marked:e}),disableShowMore:!0,footer:a().createElement(ar,{error:r,onEdit:()=>{N({resourceId:i,commentId:s})},onRetry:()=>C({content:n,resourceId:i,ctxFields:u,commentId:s,revisionId:l.revisionId})})})}case"REPLY_READY":{const{marked:e,comment:t,localId:o,commentId:r,targetId:c,reactions:m}=E;return"DELETED"===t.status?a().createElement(Wn,{key:(0,Ca.km)({localId:o,commentId:r}),id:(0,Ca.ld)({localId:o,commentId:r}),isReply:!0}):a().createElement(Pn,{key:(0,Ca.km)({localId:o,commentId:r}),id:(0,Ca.ld)({localId:o,commentId:r}),commentId:r,content:null===(n=t.content)||void 0===n?void 0:n.richContent,owner:S,createdAt:t.createdAt,isMarked:e.isMarked,customBadgeLabel:null==l?void 0:l.badgeLabel,customBadgeIcon:null==l?void 0:l.icon,replyingTo:d?null:a().createElement(Oa,{onClick:()=>R({resourceId:i,ctxFields:u,targetCommentId:c,sourceCommentId:r}),targetName:D,isPending:E.replyingToTargetLoading}),isReply:!0,isLive:E.isLive,isPending:e.pending,actionsMenu:a().createElement(Ur,{commentId:r,comment:t,isMobile:h,marked:e}),onShowMoreClick:e=>{L({isShowMore:e,resourceId:i,commentId:r})},disableShowMore:!!o||M.current,footer:a().createElement(Hr,{commentId:r,reactionsState:m,canReact:"ALLOW"===s({action:"REACT"}).type,replyButtonState:"ALLOW"===s({action:"CREATE_REPLY"}).type?"enabled":"hidden"})})}case"REPLY_EDITING":{const{marked:e,comment:t,content:n,commentId:r,localId:s}=E,l=n||(null===(o=t.content)||void 0===o?void 0:o.richContent);return a().createElement(va,{className:c()(Wr,{[jr]:m}),key:(0,Ca.km)({localId:s,commentId:r}),id:(0,Ca.ld)({localId:s,commentId:r}),commentId:r,isReply:!0,isEdit:!0,isInList:!0,isMarked:e.isMarked,initialContent:l,formName:`comment-reply-${t.commentId}`,mountExpanded:!0,onSubmit:({content:e})=>{C({content:e,resourceId:i,commentId:r,ctxFields:u,revisionId:t.revisionId})},onCancel:e=>{var n;return ba(e,null===(n=t.content)||void 0===n?void 0:n.richContent)?{type:"SILENT_CANCEL",cleanup:()=>I({resourceId:i,commentId:r})}:{type:"PROMPT",discard:"CHANGES",onConfirm:()=>{w({type:"reply",resourceId:i}),I({resourceId:i,commentId:r})}}}})}case"REPLY_DELETED":{const{localId:e,commentId:t}=E;return a().createElement(Wn,{key:(0,Ca.km)({localId:e,commentId:t}),id:(0,Ca.ld)({localId:e,commentId:t}),isReply:!0})}case"REPLY_UPDATE_PENDING":{const{content:e,marked:t,localId:n,commentId:o,comment:s}=E;return a().createElement(Pn,{key:(0,Ca.km)({localId:n,commentId:o}),id:(0,Ca.ld)({localId:n,commentId:o}),commentId:o,content:e,owner:S,isMarked:t.isMarked,isPending:!0,isReply:!0,createdAt:s.createdAt,replyingTo:d?null:a().createElement(Oa,{onClick:r.noop,targetName:D}),actionsMenu:a().createElement(Za,{showDummy:!0}),disableShowMore:!0,footer:a().createElement(sr,null)})}case"REPLY_LIVE_PENDING":{const{commentId:e,content:t}=E;return a().createElement(Pn,{key:(0,Ca.km)({commentId:e}),id:(0,Ca.ld)({commentId:e}),commentId:e,content:t,owner:S,isPending:!0,isReply:!0,isLive:!0,replyingTo:d?null:a().createElement(Oa,{onClick:()=>{},targetName:D,isPending:!1}),createdAt:(new Date).toISOString(),actionsMenu:a().createElement(Za,{showDummy:!0}),footer:a().createElement(Hr,{commentId:E.commentId,reactionsState:{total:0,pending:!1,reactions:[]},canReact:!1,replyButtonState:"ALLOW"===s({action:"CREATE_REPLY"}).type?"disabled":"hidden"})})}case"REPLY_DELETE_PENDING":{const{localId:e,commentId:t}=E;return a().createElement(Wn,{isPending:!0,isReply:!0,key:(0,Ca.km)({commentId:t,localId:e}),id:(0,Ca.ld)({commentId:t,localId:e})})}default:throw(0,$.t1)(E)}})),Ur=({marked:e,commentId:t,comment:n,isMobile:o})=>{const{getPermission:r}=zr(),{resourceId:s,deepLink:i,_showReportAction:l}=(0,y.m)(),c=(0,K.dd)(),{editReply:d,deleteReply:m,markComment:u,biSelectCommentAction:p,biOpenCommentActions:E,showToast:h,reportComment:g}=(0,v.h)(((e,t)=>({editReply:t.editReply,deleteReply:t.deleteReply,markComment:t.markComment,biSelectCommentAction:t.biSelectCommentAction,biOpenCommentActions:t.biOpenCommentActions,showToast:t.showToast,reportComment:t.reportComment})));return a().createElement(Za,{onShowMenu:()=>E({type:"reply",resourceId:s,commentId:t}),edit:"ALLOW"===r({action:"UPDATE",comment:n}).type?()=>{p({type:"reply",action:"edit",resourceId:s,commentId:t}),d({resourceId:s,commentId:t})}:void 0,mark:"ALLOW"===r({action:"MARK"}).type&&e&&!e.pending?{isMarked:e.isMarked,action:()=>{p({type:"reply",action:e.isMarked?"unmark":"mark",resourceId:s,commentId:t}),u({resourceId:s,commentId:t,subaction:e.isMarked?"REMOVE":"ADD"})}}:void 0,delete:"ALLOW"===r({action:"DELETE",comment:n}).type?()=>{p({type:"reply",action:"delete",resourceId:s,commentId:t}),c((e=>a().createElement(Ie.Ns,{isReply:!0,toggle:e,onClose:e=>{e&&m({resourceId:s,commentId:t})}})))}:void 0,share:i?()=>{p({type:"reply",action:"share",resourceId:s,commentId:t}),Ja({url:i.generateLink(t),isMobile:o,afterCopy:()=>h({skin:"success",message:{type:"TRANSLATION",key:"toast.share-success"},resourceId:s})})}:void 0,report:"ALLOW"===r({action:"REPORT"}).type&&l?()=>g({commentId:t,resourceId:s,isReply:!0}):void 0})};var qr=n(74979);const Zr=({onClick:e,text:t,className:n,state:o,dataHook:r,icon:s})=>{switch(o.type){case"HAS":return a().createElement(qr.Z,{className:n,text:t,onClick:e,dataHook:r,icon:s});case"PENDING":return a().createElement(qr.Z,{className:n,text:t,isPending:!0,dataHook:r,icon:s});default:return null}},Kr=e=>a().createElement(Ar.Provider,{value:e.config},e.children);var Jr="ojkiZZ7",Qr="spy1J2b",$r="slBozY_",Xr="swTSmzK",es="sqJmq_p",ts="sBYY2dy",ns=n.sts.bind(null,Jr);const os=(e,t,n)=>{if(0===e)return null;const o=t[e],r=t[e-1],s=$e(o)&&Qe(o.comment,o.marked).isMarked,i=$e(r)&&Qe(r.comment,r.marked).isMarked;return a().createElement(L.i,{className:ns(ts,{isMobile:n,noTopMargin:i,noBottomMargin:s})})},as=({fetchNextReplies:e,fetchPrevReplies:t,state:n,id:o,memberState:r})=>{const{resourceId:s,reactions:l}=(0,y.m)(),d=l&&l.replyReactions,m=(0,Q.q)(),{revealLiveReplies:u,isMobile:p}=(0,v.h)(((e,t)=>({revealLiveReplies:t.revealLiveReplies,isMobile:(0,g.W7)(e)})));switch(n.type){case"EMPTY":return a().createElement("div",{"data-hook":i.wl,id:o});case"ONLY_VIEW_LIVE":return a().createElement("div",{"data-hook":i.wl,id:o},a().createElement(pn,{text:m("reply-list.view-replies",{count:n.count}),onClick:()=>u({resourceId:s,parentId:n.parentCommentId}),dataHook:i.J2}));case"ONLY_LOAD_MORE":return a().createElement("div",{"data-hook":i.wl,id:o},a().createElement(Zr,{text:m("reply-list.show-more-replies"),onClick:e,state:n.next,className:ns($r,{isMobile:p}),dataHook:i.Ej}));case"ONLY_LOAD_MORE_AND_LIVE":return a().createElement("div",{"data-hook":i.wl,id:o},a().createElement(Zr,{text:m("reply-list.show-more-replies"),onClick:e,state:n.next,className:ns($r,{isMobile:p,isLive:!0}),dataHook:c()(i.Ej,i.Hm),icon:p?a().createElement(hn,{position:"mobile-button"}):void 0}));case"FULL":return a().createElement(Kr,{config:d},a().createElement("div",{"data-hook":i.wl,id:o,className:ns(Qr,{isMobile:p},"wc-separator-color")},a().createElement(Zr,{text:m("reply-list.show-more-replies"),onClick:e,state:n.next,className:Xr,dataHook:i.M0}),n.comments.map(((e,t)=>a().createElement(a().Fragment,{key:"localId"in e?e.localId:e.commentId},os(t,n.comments,p),a().createElement(Yr,{key:"localId"in e?e.localId:e.commentId,replyState:e,memberState:r})))),"SOME"===n.live.type&&a().createElement(un,{onClick:()=>u({resourceId:s,parentId:n.parentCommentId}),text:m("live-updates.show-live-replies",{count:n.live.count}),position:"reply-end",dataHook:i.hq}),a().createElement(Zr,{text:m("reply-list.show-more-replies"),onClick:t,state:n.prev,className:es,dataHook:i.d5})));default:throw(0,$.t1)(n)}},rs="J4SCrp",ss=({commentId:e,marked:t,comment:n,isMobile:o,commentByCurrentOwner:r})=>{const{resourceId:s,deepLink:i,_showReportAction:l}=(0,y.m)(),{getPermission:c}=zr(),d=(0,K.dd)(),{editComment:m,deleteComment:u,biSelectCommentAction:p,biOpenCommentActions:E,showToast:h,markComment:g,reportComment:b}=(0,v.h)(((e,t)=>({deleteComment:t.deleteComment,editComment:t.editComment,markComment:t.markComment,biSelectCommentAction:t.biSelectCommentAction,biOpenCommentActions:t.biOpenCommentActions,showToast:t.showToast,reportComment:t.reportComment})));return a().createElement(Za,{onShowMenu:()=>E({type:"comment",resourceId:s,commentId:e}),edit:"ALLOW"===c({action:"UPDATE",comment:n}).type?()=>{p({type:"comment",action:"edit",resourceId:s,commentId:e}),m({resourceId:s,commentId:e},{commentByCurrentOwner:r})}:void 0,mark:"ALLOW"===c({action:"MARK"}).type&&t&&!t.pending?{isMarked:t.isMarked,action:()=>{p({type:"comment",action:t.isMarked?"unmark":"mark",resourceId:s,commentId:e}),g({resourceId:s,commentId:e,subaction:t.isMarked?"REMOVE":"ADD"})}}:void 0,delete:"ALLOW"===c({action:"DELETE",comment:n}).type?()=>{p({type:"comment",action:"delete",resourceId:s,commentId:e}),d((t=>a().createElement(Ie.Ns,{isReply:!1,toggle:t,onClose:t=>{t&&u({resourceId:s,commentId:e})}})))}:void 0,share:i?()=>{p({type:"comment",action:"share",resourceId:s,commentId:e}),Ja({url:i.generateLink(e),isMobile:o,afterCopy:()=>h({skin:"success",message:{type:"TRANSLATION",key:"toast.share-success"},resourceId:s})})}:void 0,report:"ALLOW"===c({action:"REPORT"}).type&&l?()=>b({commentId:e,resourceId:s}):void 0})},is=a().memo((({commentState:e,currentRating:t,inputRating:n,isByCurrentOwner:o,memberState:r})=>{var s,i;const l=Xe(e,r),{resourceId:c,ctxFields:d,markLabels:m,ratings:u}=(0,y.m)(),p=(0,Q.q)(),{updateComment:E,retryCreateComment:h,cancelCreatingComment:b,cancelEditingComment:C,isMobile:I,editComment:f,editCommentCreateError:N,biDiscardComment:R,biClickShowMoreBtn:w,setInputRating:L,owner:k}=(0,v.h)(((e,t)=>({updateComment:t.updateComment,cancelCreatingComment:t.cancelCreatingComment,cancelEditingComment:t.cancelEditingComment,retryCreateComment:t.retryCreateComment,isMobile:(0,g.W7)(e),editComment:t.editComment,editCommentCreateError:t.editCommentCreateError,biDiscardComment:t.biDiscardComment,biClickShowMoreBtn:t.biClickShowMoreBtn,biClickPublishSelectBtn:t.biClickPublishSelectBtn,setInputRating:t.setInputRating,owner:(0,Ge.ei)(l,e.members)}))),O=a().useRef(!1),{getPermission:T}=zr(),S=u&&T({action:"RATE"})&&o;switch(a().useEffect((()=>{switch(l.type){case"COMMENT_UPDATE_PENDING":return void(O.current=!0);case"COMMENT_EDITING":case"COMMENT_CREATE_ERROR_EDITING":case"COMMENT_CREATE_ERROR":case"COMMENT_UPDATE_ERROR":case"COMMENT_DELETED":case"COMMENT_READY":case"COMMENT_CREATE_PENDING":case"COMMENT_DELETE_PENDING":case"COMMENT_LIVE_PENDING":return;default:throw(0,$.t1)(l)}}),[l.type]),l.type){case"COMMENT_CREATE_PENDING":{const{localId:e,content:n}=l;return a().createElement(Pn,{key:(0,Ca.km)({localId:e}),id:(0,Ca.ld)({localId:e}),commentId:e,content:n,owner:k,isPending:!0,isReply:!1,createdAt:(new Date).toISOString(),rating:u&&{value:null==t?void 0:t.value,isPending:!0},actionsMenu:a().createElement(Za,{showDummy:!0}),disableShowMore:!0,footer:a().createElement(sr,null)})}case"COMMENT_CREATE_ERROR":{const{localId:e,content:t,error:n,asGuest:o,pendingRatingAction:r}=l;return a().createElement(Pn,{key:(0,Ca.km)({localId:e}),id:(0,Ca.ld)({localId:e}),commentId:e,content:t,owner:k,isPending:!1,isReply:!1,isError:!0,createdAt:(new Date).toISOString(),rating:{value:"ADD"===(null==r?void 0:r.type)?r.value:void 0,isPending:!0},actionsMenu:null,disableShowMore:!0,footer:a().createElement(ar,{error:n,onRetry:()=>{h({ctxFields:d,content:t,resourceId:c,localId:e,asGuest:o,rating:r})},onEdit:()=>{N({resourceId:c,localId:e})}})})}case"COMMENT_CREATE_ERROR_EDITING":{const{localId:e,content:o}=l;return a().createElement(va,{className:rs,key:(0,Ca.km)({localId:e}),id:(0,Ca.ld)({localId:e}),commentId:e,isReply:!1,isEdit:!1,isInList:!0,formName:`comment-${e}`,mountExpanded:!0,initialContent:o,withGuestFlow:Ct(T({action:"CREATE_COMMENT"})),onSubmit:({content:t,rating:n},o,a)=>{h({ctxFields:d,content:t,resourceId:c,localId:e,asGuest:a,rating:n})},onCancel:()=>({type:"PROMPT",discard:"CHANGES",onConfirm:()=>{R({type:"comment",resourceId:c}),b({localId:e,resourceId:c})}}),rating:u&&{value:null==n?void 0:n.value,isRequired:!!u.isRequired,hasPrevious:!!(null==t?void 0:t.value)},ratingLabel:u?u.addRatingText?u.addRatingText:p((null==t?void 0:t.value)?"comment-box.update-rating":"comment-box.add-a-rating"):void 0,onRatingChange:S?e=>L({resourceId:c,rating:e}):void 0})}case"COMMENT_READY":{const{comment:e,localId:n,commentId:r,isLive:i,marked:d}=l;return"DELETED"===e.status?a().createElement(Wn,{key:(0,Ca.km)({commentId:r,localId:n}),id:(0,Ca.ld)({commentId:r,localId:n})}):a().createElement(Pn,{key:(0,Ca.km)({commentId:r,localId:n}),id:(0,Ca.ld)({commentId:r,localId:n}),commentId:r,isMarked:d.isMarked,customBadgeLabel:null==m?void 0:m.badgeLabel,customBadgeIcon:null==m?void 0:m.icon,content:null===(s=e.content)||void 0===s?void 0:s.richContent,owner:k,createdAt:e.createdAt,isReply:!1,isLive:i,isPending:d.pending,rating:u&&{value:o?null==t?void 0:t.value:e.rating,isPending:!!o&&(null==t?void 0:t.isPending)},actionsMenu:a().createElement(ss,{commentId:r,comment:e,isMobile:I,marked:d,commentByCurrentOwner:o}),onShowMoreClick:e=>{w({isShowMore:e,resourceId:c,commentId:r})},disableShowMore:!!n||O.current,footer:a().createElement(Br,{commentId:r,reactionsState:l.reactions,votesState:l.votes,canReact:"ALLOW"===T({action:"REACT"}).type,canVote:"ALLOW"===T({action:"VOTE"}).type,replyButtonState:"ALLOW"===T({action:"CREATE_REPLY"}).type?"enabled":"hidden"})})}case"COMMENT_DELETED":{const{commentId:e,localId:t}=l;return a().createElement(Wn,{key:(0,Ca.km)({commentId:e,localId:t}),id:(0,Ca.ld)({commentId:e,localId:t})})}case"COMMENT_EDITING":{const{marked:e,commentId:r,localId:s,comment:m,content:h}=l,g=h||(null===(i=m.content)||void 0===i?void 0:i.richContent);return a().createElement(va,{className:rs,key:(0,Ca.km)({commentId:r,localId:s}),id:(0,Ca.ld)({commentId:r,localId:s}),commentId:r,isReply:!1,isEdit:!0,isInList:!0,isMarked:e.isMarked,initialContent:g,formName:`comment-${r}`,mountExpanded:!0,onSubmit:({content:e,rating:t},n)=>{E({content:e,resourceId:c,ctxFields:d,commentId:r,revisionId:m.revisionId,rating:t,commentByCurrentOwner:o})},onCancel:e=>{var t;return ba(e,null===(t=m.content)||void 0===t?void 0:t.richContent)?{type:"SILENT_CANCEL",cleanup:()=>C({resourceId:c,commentId:r})}:{type:"PROMPT",discard:"CHANGES",onConfirm:()=>{R({type:"comment",resourceId:c}),C({resourceId:c,commentId:r})}}},rating:u&&{value:o?null==n?void 0:n.value:m.rating,isRequired:!!o&&!!u.isRequired,hasPrevious:!!o&&!!(null==t?void 0:t.value)},ratingLabel:u&&o?u.addRatingText?u.addRatingText:p((null==t?void 0:t.value)?"comment-box.update-rating":"comment-box.add-a-rating"):void 0,onRatingChange:S?e=>L({resourceId:c,rating:e}):void 0})}case"COMMENT_UPDATE_PENDING":{const{commentId:e,marked:n,localId:o,content:r,comment:s}=l;return a().createElement(Pn,{key:(0,Ca.km)({commentId:e,localId:o}),id:(0,Ca.ld)({commentId:e,localId:o}),commentId:e,content:r,owner:k,isPending:!0,isReply:!1,rating:u&&t&&Object.assign({},t),createdAt:s.createdAt,actionsMenu:a().createElement(Za,{showDummy:!0}),disableShowMore:!0,footer:a().createElement(sr,null),isMarked:n.isMarked})}case"COMMENT_UPDATE_ERROR":{const{marked:e,commentId:t,localId:n,content:r,comment:s,error:i,pendingRatingAction:m}=l;return a().createElement(Pn,{key:(0,Ca.km)({commentId:t,localId:n}),id:(0,Ca.ld)({commentId:t,localId:n}),commentId:t,content:r,owner:k,isPending:!1,isError:!0,isReply:!1,createdAt:s.createdAt,isMarked:e.isMarked,actionsMenu:a().createElement(ss,{commentId:t,comment:s,isMobile:I,marked:e,commentByCurrentOwner:o}),disableShowMore:!0,rating:{value:"ADD"===(null==m?void 0:m.type)?m.value:void 0,isPending:!0},footer:a().createElement(ar,{error:i,onRetry:()=>{E({ctxFields:d,content:r,resourceId:c,commentId:t,revisionId:s.revisionId,rating:m,commentByCurrentOwner:o})},onEdit:()=>{f({resourceId:c,commentId:t},{commentByCurrentOwner:o})}})})}case"COMMENT_LIVE_PENDING":{const{commentId:e,content:t}=l;return a().createElement(Pn,{key:(0,Ca.km)({commentId:e}),id:(0,Ca.ld)({commentId:e}),commentId:e,content:t,owner:k,isPending:!0,isReply:!1,isLive:!0,createdAt:(new Date).toISOString(),actionsMenu:a().createElement(Za,{showDummy:!0}),footer:a().createElement(Br,{commentId:e,reactionsState:{total:0,pending:!1,reactions:[]},votesState:{pending:!1,state:"NEUTRAL",score:0},canReact:!1,canVote:!1,replyButtonState:"disabled"})})}case"COMMENT_DELETE_PENDING":{const{commentId:e,localId:t}=l;return a().createElement(Wn,{isPending:!0,key:(0,Ca.km)({commentId:e,localId:t}),id:(0,Ca.ld)({commentId:e,localId:t})})}default:throw(0,$.t1)(l)}}));function ls(e,t){const n=t-e.getBoundingClientRect().top;window.scroll(e.ownerDocument.defaultView.pageXOffset,e.ownerDocument.defaultView.pageYOffset-n),e.focus()}var cs=n(86130),ds="o__3Zm4jk",ms="sGpM7L9",us="s__1R3fvj",ps="sWj2fR7",Es="sswbbSQ",hs="sShuEMC",gs=n.sts.bind(null,ds);const vs=a().forwardRef((({fetchNextComments:e,fetchPrevComments:t,fetchNextReplies:n,fetchPrevReplies:o,state:r,isMobile:s,liveCommentsLayout:l},c)=>{const{reactions:d,screenshotMode:m,resourceId:u,ratings:p}=(0,y.m)(),E=(0,Q.q)(),h=d&&d.commentReactions;(e=>{if("undefined"==typeof document)return;const t=e?document.getElementById(e.id):void 0,n=t?t.getBoundingClientRect().top:void 0;a().useLayoutEffect((()=>{if(t&&n){if((null==e?void 0:e.onlyIfAboveVieport)&&n>0)return;if(ls(t,n),(0,St.Q)()){const e=new window.ResizeObserver((()=>ls(t,n)));e.observe(document.body),setTimeout((()=>e.disconnect()),0)}}}),[null==e?void 0:e.id,null==e?void 0:e.timestamp])})(r.scrollAnchor),(0,cs.jo)(r.highlight,s,m);const{revealLiveComments:g,showLiveCommentsButtonDev:b,showLoadMoreCommentsDev:C,currentOwnerId:I,getCommentOwner:f,memberState:N}=(0,v.h)(((e,t,n,o)=>({revealLiveComments:t.revealLiveComments,showLiveCommentsButtonDev:o.wcDevToolsState.showLiveCommentsButton,showLoadMoreCommentsDev:o.wcDevToolsState.showLoadMoreComments,currentOwnerId:(0,Ge.bG)(e.members.currentOwner),getCommentOwner:t=>(0,Ge.ei)(t,e.members),memberState:e.members})));return a().createElement(Kr,{config:h},a().createElement("div",{className:gs(ms,{isMobile:s,isEmpty:r.isEmpty,isLastComponent:"TOP"===l}),"data-hook":i.rE},(()=>{switch(C){case"auto":return a().createElement(Zr,{text:E("comment-list.show-more-comments"),onClick:t,state:r.prev,className:Es,dataHook:i.BA});case"on":case"on-spinner":return a().createElement(Zr,{text:E("comment-list.show-more-comments"),onClick:()=>{},state:"on-spinner"===C?{type:"PENDING"}:{type:"HAS",cursor:""},className:Es,dataHook:i.BA});case"off":return null;default:throw(0,$.t1)(C)}})(),(()=>{if("BOTTOM"!==l)switch(b){case"auto":return"VISIBLE"===r.showLiveCommentsButton.type?a().createElement(un,{text:E("live-updates.show-live-comments",{count:r.showLiveCommentsButton.count}),dataHook:i.$v,onClick:()=>g({resourceId:u,position:"start"}),position:"start"}):null;case"on":return a().createElement(un,{text:E("live-updates.show-live-comments",{count:1}),dataHook:i.$v,onClick:()=>{},position:"start"});case"off":return null;default:throw(0,$.t1)(b)}})(),a().createElement("div",{ref:c,id:(0,Ca.oq)(u),className:us},r.commentList.map(((e,t)=>{const i="commentId"in e?r.replies[e.commentId]:void 0,l="localId"in e?void 0===e.localId&&"commentId"in e?e.commentId:e.localId:e.commentId;(0,$.Nh)(l);const c=I===(0,Ge.nT)(f(e));return a().createElement(a().Fragment,{key:l},ys(t,r.commentList,s),a().createElement(is,{commentState:e,currentRating:p&&c?r.ratings.currentRating:void 0,inputRating:p&&c?r.ratings.inputRating:void 0,isByCurrentOwner:c,memberState:N}),i&&a().createElement(as,{state:i,fetchNextReplies:()=>"commentId"in e&&n(e.commentId),fetchPrevReplies:()=>"commentId"in e&&o(e.commentId),id:`reply-list-${l}`,memberState:N}))}))),(()=>{if("TOP"===l)return null;switch(b){case"auto":return"VISIBLE"===r.showLiveCommentsButton.type?a().createElement(un,{text:E("live-updates.show-live-comments",{count:r.showLiveCommentsButton.count}),dataHook:i.IB,onClick:()=>g({resourceId:u,position:"end"}),position:"end"}):null;case"on":return a().createElement(un,{text:E("live-updates.show-live-comments",{count:1}),dataHook:i.IB,onClick:()=>{},position:"end"});case"off":return null;default:throw(0,$.t1)(b)}})(),(()=>{switch(C){case"auto":return a().createElement(Zr,{text:E("comment-list.show-more-comments"),onClick:e,state:r.next,className:ps,dataHook:i.RL});case"on":case"on-spinner":return a().createElement(Zr,{text:E("comment-list.show-more-comments"),onClick:()=>{},state:"on-spinner"===C?{type:"PENDING"}:{type:"HAS",cursor:""},className:ps,dataHook:i.RL});case"off":return null;default:throw(0,$.t1)(C)}})()))})),ys=(e,t,n)=>{if(0===e)return null;const o=t[e],r=t[e-1],s=$e(o)&&Qe(o.comment,o.marked).isMarked,i=$e(r)&&Qe(r.comment,r.marked).isMarked;return a().createElement(L.i,{className:gs(hs,{isMobile:n,noTopMargin:i,noBottomMargin:s})})};vs.displayName="CommentList";const bs=vs,Cs="uddfVM",Is="o7Me2Y",fs="NIU3CR",Ns=()=>{const e=(0,Q.q)(),{resourceId:t}=(0,y.m)(),{biShowZeroCommentsEmptyState:n}=(0,v.h)(((e,t)=>t));return(0,o.useEffect)((()=>{n({resourceId:t})}),[]),a().createElement("div",{className:Cs},a().createElement(d.Z,{dataHook:i.YZ,className:Is,typography:"titleSmall"},e("empty-state.zero-comments-title")),a().createElement(d.Z,{dataHook:i.rg,className:fs},e("empty-state.zero-comments-text")))},Rs=e=>{var t=(0,V.__rest)(e,[]);return a().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"18",viewBox:"0 0 16 18",style:{fillRule:"evenodd"}},t),a().createElement("path",{d:"M8.386 13C8.262 13 8.142 13.046 8.05 13.13L4.5 16.347V13.5C4.5 13.224 4.276 13 4 13H2C1.724 13 1.5 12.775 1.5 12.5V3.5C1.5 3.225 1.724 3 2 3H2.293L12.293 13H8.386ZM14 3C14.276 3 14.5 3.225 14.5 3.5V12.5C14.5 12.775 14.276 13 14 13H13.706L3.706 3H14ZM16 15.293L14.587 13.88C15.123 13.651 15.5 13.119 15.5 12.5V3.5C15.5 2.673 14.827 2 14 2H2.706L0.706 0L0 0.707L1.413 2.12C0.877 2.349 0.5 2.881 0.5 3.5V12.5C0.5 13.327 1.173 14 2 14H3.5V16.347C3.5 16.748 3.728 17.099 4.094 17.261C4.227 17.32 4.366 17.349 4.504 17.349C4.745 17.349 4.982 17.26 5.171 17.089C5.171 17.089 5.171 17.088 5.172 17.088L8.579 14H13.293L15.293 16L16 15.293Z"}))};var ws="oDqeoij",Ls="sUWu5Ot",ks="sG5SJBv",Os="sRA7GMS",Ts=n.sts.bind(null,ws);const Ss=()=>{const e=(0,v.h)(g.W7),t=(0,Q.q)();return a().createElement("div",{className:Ts(Ls,{isMobile:e})},a().createElement(Rs,{className:Os}),a().createElement("span",{className:ks},t("empty-state.commenting-locked-text")))},Ms=a().createContext(null),Ds=({className:e,position:t,shoudDispatchIAmTyping:n,withGuestFlow:o,canRate:s,boxRating:l})=>{const{resourceId:c,ctxFields:d,ratings:m}=(0,y.m)(),u=(0,Q.q)(),{createComment:p,biDiscardComment:E,iAmTyping:h,setInputRating:g}=(0,v.h)(((e,t)=>({createComment:t.createComment,biDiscardComment:t.biDiscardComment,iAmTyping:t.iAmTyping,setInputRating:t.setInputRating}))),b=a().useRef(null),C=a().useContext(Ms);a().useEffect((()=>{if(b.current)return C.optIn({position:t,box:b.current}),()=>C.optOut(t)}),[C,t]);const I=a().useMemo((()=>(0,r.throttle)((()=>h({resourceId:c})),3e3,{leading:!0,trailing:!1})),[c,h]);return a().createElement(va,{forwardRef:b,id:`root-comment-box-${t}-${c}`,className:e,dataHook:"start"===t?i.YD:i.N9,isEdit:!1,isReply:!1,isInList:!1,formName:`comment-${t}`,onTyping:n?I:void 0,withGuestFlow:o,onSubmit:({content:e,rating:n},o,a)=>{p({localId:(0,Ca.ZS)(),content:e,resourceId:c,ctxFields:d,position:t,asGuest:a,rating:n}),o()},onCancel:(e,t,n)=>n?{type:"SILENT_CANCEL",cleanup:t}:{type:"PROMPT",discard:"COMMENT",onConfirm:()=>{t(),E({type:"comment",resourceId:c})}},rating:m&&{value:l.value,isRequired:!!m.isRequired,hasPrevious:l.hasPrevious},ratingLabel:m?m.addRatingText?m.addRatingText:u(l.hasPrevious?"comment-box.update-rating":"comment-box.add-a-rating"):void 0,onRatingChange:s&&!l.isPending?e=>g({resourceId:c,rating:e}):void 0})};function As(e,t,n){switch(t){case"off":return a().createElement(En,{position:e,isTyping:!1});case"on":return a().createElement(En,{position:e,isTyping:!0});case"auto":return"none"!==n?a().createElement(En,{position:e,isTyping:"started"===n}):null;default:(0,$.t1)(t)}return null}const _s=({onClick:e,className:t})=>{const{placeholderText:n,ratings:o}=(0,y.m)(),[r,s]=a().useState("default"),{isMobile:l}=(0,v.h)((e=>({isMobile:(0,g.W7)(e)}))),c=(0,Q.q)();return a().createElement("div",{className:ga(ia,{isMobile:l},t),style:{cursor:"pointer"},onClick:e},a().createElement("div",{className:ga(la,{isHighlighted:"default"!==r}),onMouseEnter:()=>s("hover"),onMouseLeave:()=>s("default")},o&&!l?a().createElement("div",{className:pa},a().createElement(Co,{className:Ea,"data-hook":i.eT,value:void 0,label:Ho(c("comment-box.add-a-rating"),o.isRequired),labelLayout:l?"labelTop":"labelAside",size:l?"large":"small",disabled:!0})):null,a().createElement("button",{"data-hook":i.Iv,className:ca},o&&l?a().createElement(Io,{className:ua}):null,a().createElement(Uo,{text:null!=n?n:c(Bo({isExpanded:!1,isReply:!1,withRating:Boolean(o),isMobile:l}))}))))};var Ps=n(21145),xs=n(24316),Bs=n(39971),Hs="oYanlhO",Fs={root:"sXGWrHY",dropdown:"sn9qf5Q",divider:"sWR0lh7",floatingDropdownBase:"s__05WWjQ",displayInline:"sv403HE",optionDivider:"sNTMs79",option:"slfMeDg"},Vs=n.sts.bind(null,Hs);var Ws=n(27009),js=n(68771),Gs=n(91190);const zs="floating-dropdown-base",Ys="floating-dropdown-base-selected-value",Us="core-dropdown",qs="floating-dropdown-native-select",Zs="floating-dropdown-button";var Ks=n(16144);class Js extends o.Component{constructor(){super(...arguments),this._getSelectedOption=e=>{const{options:t}=this.props;return t.find((({id:t})=>e===t))},this._onSelect=e=>{const{onChange:t}=this.props,n=e.target.value;t&&t(this._getSelectedOption(n))}}_getContent(){const{value:e,placeholder:t,label:n,options:a,"aria-labelledby":r,mobile:s,disabled:i,name:l}=this.props,c=this._getSelectedOption(e);return o.createElement(o.Fragment,null,o.createElement("div",{className:Ks.classes.content},o.createElement("div",{className:Ks.classes.textContent},o.createElement("span",{className:Ks.classes.label},n),o.createElement("div",{className:Ks.classes.selectedValue,"data-hook":Ys},(null==c?void 0:c.value)||t)),o.createElement(Ws.Z,{className:Ks.classes.arrowIcon})),s?o.createElement("select",{value:e,name:l,className:Ks.classes.select,"aria-labelledby":r,"data-hook":qs,onChange:this._onSelect,disabled:i},t?o.createElement("option",{value:"",disabled:!0},t):null,a.map((e=>e.divider?null:o.createElement("option",{value:e.id,disabled:!e.isSelectable,key:e.id},e.value)))):null)}render(){const{"aria-label":e,"aria-labelledby":t,"aria-activedescendant":n,mobile:a,id:r,disabled:s,className:i,displayBlock:l}=this.props;let d=this._getContent();return a||(d=o.createElement(js.A,{"aria-haspopup":"menu","aria-expanded":this.props.isExpanded,"aria-label":e,"aria-labelledby":t||r,"aria-activedescendant":n,disabled:s,"data-hook":Zs,priority:Gs.Q.secondary,className:Ks.classes.btn},d)),o.createElement("div",{className:(0,Ks.st)(Ks.classes.root,{mobile:a,disabled:s},c()(Ks.classes.overrideStyleParams,i,{[Ks.classes.displayBlock]:l})),"data-hook":zs},d)}}var Qs=n(30213),$s=n(40139),Xs=n(90190),ei=n(92668);class ti extends o.Component{constructor(e){super(e),this.state={isExpanded:!1,ariaActivedescendant:null},this._onSelect=e=>{e&&(this.setState({ariaActivedescendant:null}),this.props.onChange&&this.props.onChange(e))},this._onCoreSelect=e=>{if(!e)return;const t=this.props.options.find((({id:t})=>e.id===t));this._onSelect(t)},this._onExpandedChange=e=>{const{onExpandedChange:t}=this.props;this.setState(Object.assign({isExpanded:!this.state.isExpanded},!e&&{ariaActivedescendant:null}),(()=>t&&t(e)))},this._onOptionHover=e=>{const t=e?e._DOMid:null;this.setState({ariaActivedescendant:t})},this.contentId=(0,bo.Z)("floating-dropdown-options-container_")}componentDidMount(){this.props.removeElementMinWidth||(0,ei.M$)("FloatingDropdown","The current `FloatingDropdown` component API will be deprecated in a future version. Please use the `removeElementMinWidth` prop in order to use the new API.")}_generateCoreOptions(){const{options:e}=this.props;return{coreOptions:e.map((e=>e.divider?Qs.B.createDivider({className:Fs.optionDivider}):Qs.B.create(Object.assign(Object.assign({},e),{isSelectable:!(!e.unavailable||void 0!==e.isSelectable)||e.isSelectable,render:()=>o.createElement(xs.Q,Object.assign({className:Fs.option},e))}))))}}_getContent(e){const{"aria-label":t,"aria-labelledby":n,disabled:a,forceContentElementVisibility:r,label:s,placeholder:i,value:l,options:c,name:d,id:m,placement:u,appendTo:p,displayBlock:E,dynamicWidth:h,removeElementMinWidth:g}=this.props,{coreOptions:v}=this._generateCoreOptions(),y=u||(g?"bottom-start":"bottom"),b=o.createElement(Js,{className:Fs.floatingDropdownBase,"aria-label":t,"aria-labelledby":n,disabled:a,label:s,placeholder:i,value:l,name:d,mobile:e,options:(0,$s.By)(c),id:m,"aria-activedescendant":this.state.ariaActivedescendant,isExpanded:this.state.isExpanded,onChange:this._onSelect,displayBlock:E});return e?b:o.createElement(Ps.d,{className:Fs.dropdown,contentClassName:Xs.classes.dropdownContainer,"data-hook":Us,"data-mobile":e,forceContentElementVisibility:r,initialSelectedIds:l?[l]:[],onInitialSelectedOptionsSet:()=>{},onDeselect:this._onCoreSelect,onSelect:this._onCoreSelect,openTrigger:"click",disabled:a,options:v,placement:y,onExpandedChange:this._onExpandedChange,appendTo:p,onOptionHover:this._onOptionHover,dynamicWidth:h||"window"===p,contentId:this.contentId,dropdownA11yFixes:!0},b)}render(){const{removeElementMinWidth:e}=this.props;return o.createElement(Bs.ko,null,(({mobile:t})=>o.createElement("div",{"data-mobile":t,"data-hook":this.props["data-hook"],className:Vs(Fs.root,{mobile:t,removeElementMinWidth:e},c()(Fs.overrideStyleParams,this.props.className,{[Fs.displayInline]:!this.props.displayBlock}))},this._getContent(t))))}}ti.displayName="FloatingDropdown",ti.defaultProps={disabled:!1,options:[],displayBlock:!1};var ni="oNsZTEi",oi="smBuZmu",ai=n.sts.bind(null,ni);const ri=({className:e,selectedSort:t})=>{const{blackAndWhiteModals:n}=(0,y.m)(),o=(0,v.h)(g.W7),r=(0,Q.q)(),{sortOptions:s,onSortChange:l}=(()=>{var e,t,n;const{resourceId:o,pagination:r=j,ctxFields:s,reactions:i,ratings:l}=(0,y.m)(),{changeOrdering:c}=(0,v.h)(((e,t)=>({changeOrdering:t.changeOrdering}))),d=(0,Q.q)(),m="votes"===(null===(e=null==i?void 0:i.commentReactions)||void 0===e?void 0:e.type),u="emotions"===(null===(t=null==i?void 0:i.commentReactions)||void 0===t?void 0:t.type)||"likes"===(null===(n=null==i?void 0:i.commentReactions)||void 0===n?void 0:n.type),p=Boolean(l);return{sortOptions:a().useMemo((()=>[{id:W.Sk.NEWEST_FIRST,value:d("comments-ordering.latest-first"),isSelectable:!0},{id:W.Sk.OLDEST_FIRST,value:d("comments-ordering.oldest-first"),isSelectable:!0},...u?[{id:W.Sk.MOST_REACTIONS_FIRST,value:d("comments-ordering.most-reactions-first"),isSelectable:!0}]:[],...m?[{id:W.Sk.MOST_VOTES_FIRST,value:d("comments-ordering.descending-first"),isSelectable:!0},{id:W.Sk.LEAST_VOTES_FIRST,value:d("comments-ordering.ascending-first"),isSelectable:!0}]:[],...p?[{id:W.Sk.HIGHEST_RATED_FIRST,value:d("comments-ordering.most-rated-first"),isSelectable:!0},{id:W.Sk.LOWEST_RATED_FIRST,value:d("comments-ordering.least-rated-first"),isSelectable:!0}]:[]]),[d,u,m,p]),onSortChange:a().useCallback((e=>c({resourceId:o,pagination:r,ctxFields:s,ordering:e,withVotes:m,withRatings:p})),[o,r,s,c,m,p])}})();return a().createElement(ti,{"data-hook":i.OF,className:ai(oi,{isMobile:o,blackAndWhite:!!n},e),label:o?"":r("header.sort-by"),value:t,options:s,onChange:e=>null==l?void 0:l(e.id)})};var si="o_nDOI2",ii="sGyiKLq",li="sUhmbtq",ci="sgOVEvI",di="s__1I8vDV",mi="sxh_KLq",ui=n.sts.bind(null,si);const pi=a().memo((e=>{var{isListEmpty:t,someoneIsTyping:n,appHeaderIsVisible:o,shouldShowCommentBox:r,boxRating:s}=e,i=(0,V.__rest)(e,["isListEmpty","someoneIsTyping","appHeaderIsVisible","shouldShowCommentBox","boxRating"]);const{hideZeroCommentsEmptyState:l,hideHeaderDivider:c,resourceId:d}=(0,y.m)(),{getPermission:m}=zr(),{loginRequiredDev:u,someoneIsTypingDev:p,isSSR:E,isMobile:h,biAttemptLoginSignup:b,requestLoginAction:C}=(0,v.h)(((e,t,n,o)=>({loginRequiredDev:"login_required"===o.wcDevToolsState.specialStates,someoneIsTypingDev:o.wcDevToolsState.showSomeoneIsTyping,isSSR:(0,g.Kv)(e),isMobile:(0,g.W7)(e),biAttemptLoginSignup:t.biAttemptLoginSignup,requestLoginAction:t.requestLogin}))),I=()=>{b({type:"login",resourceId:d}),C({mode:"login"})},f=o&&!c,N=()=>i.hideSort?null:a().createElement(ri,{className:mi,selectedSort:i.selectedSort}),R=m({action:"CREATE_COMMENT"});return a().createElement("div",{className:ui(ii,{isMobile:h,withTopMargin:o&&!!c,withoutCommentBox:!r})},f?a().createElement(M,{className:li,type:"header"}):null,(()=>{if(u)return[r&&a().createElement(_s,{className:ci,onClick:I}),N()];if("ALLOW"===R.type)return a().createElement(a().Fragment,null,r?a().createElement(a().Fragment,null,a().createElement(Ds,{className:ci,position:"start",shoudDispatchIAmTyping:"NONE"===R.precondition||"GUEST_FLOW"===R.precondition,withGuestFlow:"GUEST_FLOW"===R.precondition,canRate:"ALLOW"===m({action:"RATE"}).type,boxRating:s}),N(),!E&&As("start",p,n)," ",!r&&N()):null,t&&!l&&a().createElement(Ns,null));switch(R.reason){case"LOCKED":return[r&&a().createElement("div",{className:di},a().createElement(Ss,null)),N()];case"LOGIN_REQUIRED":return[r&&a().createElement(_s,{className:ci,onClick:I}),N()];case"UNKNOWN":return null;default:throw(0,$.t1)(R.reason)}})())}));var Ei="oEuLDGs",hi="sBpNNaM",gi="sZ_1ycQ",vi="s__1f9cg4",yi=n.sts.bind(null,Ei);const bi=a().memo((({someoneIsTyping:e,boxRating:t})=>{const{resourceId:n}=(0,y.m)(),{getPermission:o}=zr(),{someoneIsTypingDev:r,isSSR:s,isMobile:i,loginRequiredDev:l,biAttemptLoginSignup:c,requestLoginAction:d}=(0,v.h)(((e,t,n,o)=>({loginRequiredDev:"login_required"===o.wcDevToolsState.specialStates,someoneIsTypingDev:o.wcDevToolsState.showSomeoneIsTyping,isSSR:(0,g.Kv)(e),isMobile:(0,g.W7)(e),biAttemptLoginSignup:t.biAttemptLoginSignup,requestLoginAction:t.requestLogin}))),m=()=>{c({type:"login",resourceId:n}),d({mode:"login"})},u=o({action:"CREATE_COMMENT"});return a().createElement("div",{className:yi(hi,{isMobile:i})},(()=>{if(l)return a().createElement(_s,{className:gi,onClick:m});if("ALLOW"===u.type)return a().createElement(a().Fragment,null,!s&&As("end",r,e),a().createElement(Ds,{className:gi,position:"end",shoudDispatchIAmTyping:"NONE"===u.precondition||"GUEST_FLOW"===u.precondition,withGuestFlow:"GUEST_FLOW"===u.precondition,canRate:"ALLOW"===o({action:"RATE"}).type,boxRating:t}));switch(u.reason){case"LOCKED":return a().createElement("div",{className:vi},a().createElement(Ss,null));case"LOGIN_REQUIRED":return a().createElement(_s,{className:gi,onClick:m});case"UNKNOWN":return null;default:throw(0,$.t1)(u.reason)}})())})),Ci=e=>{const t=e.getBoundingClientRect(),n=t.top<0,o=t.top+t.height>document.documentElement.clientHeight;return n||o},Ii=({effectState:e,children:t})=>{const[n]=a().useState(new Map),o=e=>{if(n.size>0){const t=document.documentElement.clientHeight/2+document.documentElement.scrollTop,o=((e,t)=>{const n=[...e.values()].map((e=>{const n=e.getElementRef();if(n){const o=n.getBoundingClientRect(),a=o.height/2+o.top+window.scrollY;return Object.assign(Object.assign({},e),{node:n,distance:Math.abs(t-a)})}})).filter($.$K);return(0,r.minBy)(n,(e=>e.distance))})(n,t);if(!o)return;const{shouldScroll:a,shouldFocus:s}=e,i=()=>{const e=t=>{Ci(o.node)?setTimeout((()=>{e(t)}),250):t(null)};return new Promise((t=>{if(!a||!Ci(o.node))return t(null);o.node.scrollIntoView({behavior:"smooth",block:"center"}),e(t)}))};o.expand({autoFocus:!1}).then((()=>i())).then((()=>s&&(e=>{let t=10,n=100;const o=setInterval((()=>{"focus_initiated"===e()?clearInterval(o):(t--,n+=50,0===t&&clearInterval(o))}),n)})(o.focus)))}};return a().useEffect((()=>{if(e)switch(e.type){case"open":const{shouldFocus:t,shouldScroll:a}=e;return void o({shouldFocus:t,shouldScroll:a});case"close":return void n.forEach((e=>e.close()));default:(0,$.t1)(e)}}),[e]),a().createElement(Ms.Provider,{value:a().useMemo((()=>({optIn:({position:e,box:t})=>{n.set(e,t)},optOut:e=>{n.delete(e)}})),[n])},t)},fi=({children:e,permissionsState:t})=>{const n=a().useMemo((()=>({getPermission:e=>"comment"in e?t[e.action](e.comment):t[e.action]})),[t]);return a().createElement(Gr.Provider,{value:n},e)},Ni=({listState:e,appHeaderIsVisible:t})=>{const{resourceId:n,isLocked:o,isPreconditionRequiredForAction:r,repliesCreation:s,disableWriteBeforeLogin:i,commentBoxPosition:l,hideSorting:c,ctxFields:d}=(0,y.m)(),{fetchNextComments:m,fetchPrevComments:u,fetchNextReplies:p,fetchPrevReplies:E,currentOwner:h,isMobile:b,forceShowCommentBoxes:C}=(0,v.h)(((e,t,n,o)=>({fetchNextComments:t.fetchNextComments,fetchPrevComments:t.fetchPrevComments,fetchNextReplies:t.fetchNextReplies,fetchPrevReplies:t.fetchPrevReplies,currentOwner:e.members.currentOwner,isMobile:(0,g.W7)(e),forceShowCommentBoxes:o.wcDevToolsState.forceShowCommentBoxes}))),{listRef:I,listFitsToScreen:f}=((e,t)=>{const[n,o]=a().useState(!0),[r,s]=a().useState(null);return a().useEffect((()=>{o(!0)}),[e]),a().useEffect((()=>{if(!r||!(0,St.Q)())return;const e=new window.ResizeObserver((()=>{!(r.clientHeight<=document.documentElement.clientHeight)&&n&&o(!1)}));return e.observe(r),()=>e.disconnect()}),[r]),a().useEffect((()=>{(0,St.Q)()||t>5&&n&&o(!1)}),[t]),{listRef:s,listFitsToScreen:n}})(n,e.commentList.length),N="READY"===e.type?e.permissions:null,R=a().useMemo((()=>(({isLocked:e,isRepliesDisabled:t,permissions:n,currentOwner:o,isPreconditionRequiredForAction:a,isWriteBeforeLoginDisabled:r,srcResourceId:s})=>{const i=yt(o);return{CREATE_COMMENT:e?{type:"DENY",reason:"LOCKED"}:n.permissions.createComment?{type:"ALLOW",precondition:"VISITOR"===i?"GUEST_FLOW":"NONE"}:bt({memberType:i,permissions:n,isConsumerPreconditionRequired:null==a?void 0:a("CREATE_COMMENT",{srcResourceId:s,memberType:i}),isVisitorToMemberDisabled:r}),UPDATE:e=>{var t;return n.permissions.updateAnyComment||(null===(t=e.author)||void 0===t?void 0:t.identityId)===(0,Ge.bG)(o)?{type:"ALLOW",precondition:"NONE"}:{type:"DENY",reason:"UNKNOWN"}},DELETE:e=>{var t;return n.permissions.deleteAnyComment||(null===(t=e.author)||void 0===t?void 0:t.identityId)===(0,Ge.bG)(o)?{type:"ALLOW",precondition:"NONE"}:{type:"DENY",reason:"UNKNOWN"}},CREATE_REPLY:e||t?{type:"DENY",reason:"LOCKED"}:n.permissions.createReply?{type:"ALLOW",precondition:"VISITOR"===i?"GUEST_FLOW":"NONE"}:bt({memberType:i,permissions:n,isConsumerPreconditionRequired:null==a?void 0:a("CREATE_REPLY",{srcResourceId:s,memberType:i}),isVisitorToMemberDisabled:r}),REACT:n.permissions.reactToComment?{type:"ALLOW",precondition:"NONE"}:e?{type:"DENY",reason:"LOCKED"}:bt({memberType:i,permissions:n,isConsumerPreconditionRequired:null==a?void 0:a("REACT",{srcResourceId:s,memberType:i})}),VOTE:n.permissions.voteComment?{type:"ALLOW",precondition:"NONE"}:e?{type:"DENY",reason:"LOCKED"}:bt({memberType:i,permissions:n,isConsumerPreconditionRequired:null==a?void 0:a("VOTE",{srcResourceId:s,memberType:i})}),RATE:e?{type:"DENY",reason:"LOCKED"}:n.permissions.rateResource?{type:"ALLOW",precondition:"VISITOR"===i?"GUEST_FLOW":"NONE"}:bt({memberType:i,permissions:n,isConsumerPreconditionRequired:null==a?void 0:a("RATE",{srcResourceId:s,memberType:i}),isVisitorToMemberDisabled:r}),MARK:n.permissions.markComment?{type:"ALLOW",precondition:"NONE"}:{type:"DENY",reason:"UNKNOWN"},REPORT:n.permissions.reportComment?{type:"ALLOW",precondition:"NONE"}:{type:"DENY",reason:"UNKNOWN"}}})({isLocked:o,permissions:N,currentOwner:h,isPreconditionRequiredForAction:r,isRepliesDisabled:"DISABLED"===s,isWriteBeforeLoginDisabled:i,srcResourceId:n})),[o,N,h,r,s,i,n]),w=C?"BOTH":l?"TOP_ONLY"===l?"TOP":"BOTTOM":f?"TOP":"BOTH",L=a().useMemo((()=>Object.assign(Object.assign({},e.ratings.inputRating),{hasPrevious:!!e.ratings.currentRating.value})),[e.ratings.inputRating,e.ratings.currentRating.value]);return a().createElement(fi,{permissionsState:R},a().createElement(Ii,{effectState:e.commentBox},a().createElement(pi,{isListEmpty:e.isEmpty,someoneIsTyping:e.someoneIsTyping,appHeaderIsVisible:t,shouldShowCommentBox:"BOTTOM"!==w,boxRating:L,selectedSort:e.ordering,hideSort:c||e.isEmpty}),a().createElement(bs,{ref:I,fetchNextComments:()=>m({resourceId:n,ctxFields:d}),fetchPrevComments:()=>u({resourceId:n,ctxFields:d}),fetchNextReplies:e=>p({resourceId:n,commentId:e,ctxFields:d}),fetchPrevReplies:e=>E({resourceId:n,commentId:e,ctxFields:d}),state:e,isMobile:b,liveCommentsLayout:w}),"TOP"!==w?a().createElement(bi,{someoneIsTyping:e.someoneIsTyping,boxRating:L}):null))};Ni.displayName="AppReady";const Ri=Ni;var wi="o__7h3p8O",Li="sSR1xQW",ki="s__3y8M4I",Oi="sgzqLoV",Ti="sJNSNc7",Si="s__1x4fOu",Mi=n.sts.bind(null,wi);var Di=n(73122),Ai=n(63567),_i="s__7xN9yi";const Pi=function(e){return o.createElement(Di.h,Object.assign({icon:o.createElement(Ai.Z,null)},e,{className:_i}))};class xi extends o.Component{constructor(){super(...arguments),this.handleOnCloseClick=e=>{const{onClose:t}=this.props;t&&t(e)}}render(){const{skin:e,shouldShowCloseButton:t,children:n,shouldAnimate:a,isShown:r,placement:s,className:i}=this.props;return o.createElement(Bs.ko,null,(({mobile:l,rtl:c})=>o.createElement("div",{className:Mi(Li,{mobile:l,skin:e,shouldAnimate:a,isShown:r,placement:s,rtl:c},i),role:"alert","data-is-shown":r,"data-skin":e,"data-mobile":l,"data-hook":this.props["data-hook"]},o.createElement("span",{role:"presentation",className:ki}),o.createElement("span",{className:Ti,"data-hook":"message"},n),t?o.createElement("div",{className:Si},o.createElement(Pi,{onClick:this.handleOnCloseClick,"data-hook":"closeButton"})):o.createElement("span",{role:"presentation",className:Oi}))))}}var Bi,Hi;xi.displayName="Toast",xi.defaultProps={shouldShowCloseButton:!1,isShown:!0},function(e){e.status="status",e.success="success",e.error="error",e.preview="preview"}(Bi||(Bi={})),function(e){e.inline="inline",e.bottomFullWidth="bottomFullWidth"}(Hi||(Hi={}));var Fi="s__0HFrp2",Vi="s__7APjM4",Wi="sooRooT";const ji=a().memo((()=>{const{resourceId:e}=(0,y.m)(),{isMobile:t,toastConfig:n}=(0,v.h)((t=>({isMobile:(0,g.W7)(t),toastConfig:ut(t,e)}))),o=(0,Q.q)(),[r,s]=a().useState(void 0),l=()=>{s(null==n?void 0:n.timestamp)};if(a().useEffect((()=>{if(n){const e=setTimeout(l,5e3);return()=>clearTimeout(e)}}),[null==n?void 0:n.timestamp]),!n||r===(null==n?void 0:n.timestamp))return null;const{message:c,skin:d,isHidden:m}=n,u=a().createElement(xi,{"data-hook":i.ot,skin:Bi[d],onClose:l,className:Fi,placement:t&&!m?Hi.bottomFullWidth:Hi.inline,shouldShowCloseButton:!0},(()=>{switch(c.type){case"TRANSLATION":case"EXTERNAL_TRANSLATION":return o(c.key,c.keyValue);case"CUSTOM":return c.message;default:throw(0,$.t1)(c)}})());return n.isHidden?a().createElement("div",{className:Wi},u):t?u:a().createElement("div",{className:Vi},u)})),Gi=ji,zi="v1Vi07",Yi="M_bsB2",Ui=({isMobile:e})=>{const[t,n]=a().useState({x:null,y:null}),[o,r]=a().useState({}),s=a().useRef(null),i=a().useRef(null),l=(0,Q.q)();return a().useLayoutEffect((()=>{var n,o;if(t.y){const a=null===(n=null==i?void 0:i.current)||void 0===n?void 0:n.getBoundingClientRect(),l=null===(o=null==s?void 0:s.current)||void 0===o?void 0:o.getBoundingClientRect();if(a&&l){const n=a.right-t.x>150;r({top:t.y-(a?a.y:0)+20,[n?"left":"right"]:n?e?Math.min(t.x,200):t.x-(a?a.x:0)-10:a.right-t.x-10})}}}),[t]),a().createElement("div",{ref:i,className:zi,title:l("preview-blocker.title"),onClick:e=>n({x:e.clientX,y:e.clientY})},t.y&&a().createElement("span",{ref:s,className:Yi,style:Object.assign({},o)},l("preview-blocker.popup")))};var qi=n(6035);const Zi="dn80T1",Ki=()=>{const e=(0,_.Sz)(K.tC,(e=>e.modals),qi.w),t=Object.keys(e);return t.length?a().createElement("div",{className:Zi},t.map((t=>a().createElement(a().Fragment,{key:t},a().createElement(a().Suspense,{fallback:null},e[t].modal))))):null},Ji=()=>{const{isMobile:e,isPreview:t,isEditor:n}=(0,v.h)((e=>({isMobile:(0,g.W7)(e),isPreview:(0,g.Yh)(e),isEditor:(0,g.iO)(e)})));return a().createElement(a().Fragment,null,(t||n)&&a().createElement(Ui,{isMobile:e}),a().createElement(Ki,null),a().createElement(Gi,null))},Qi="Lnhtz1",$i="by65Qm",Xi="HkC_qu",el=({onRetry:e,dataHook:t,primaryKey:n,secondaryKey:o,ctaKey:r})=>{const s=(0,Q.q)();return a().createElement("div",{"data-hook":t,className:c()(Qi,"wc-separator-color")},a().createElement("div",{className:$i},a().createElement(d.Z,{priority:"primary"},s(n))),a().createElement("div",{className:$i},a().createElement(d.Z,{priority:"secondary"},s(o))),a().createElement("div",{className:Xi},a().createElement(h.z,{onClick:e,"data-hook":i.kN},s(r))))},tl=({onRetry:e})=>a().createElement(el,{onRetry:e,dataHook:i.dI,primaryKey:"empty-state.thread-comment-not-found",secondaryKey:"empty-state.thread-comment-not-found-subtext",ctaKey:"empty-state.thread-comment-not-found-refresh"}),nl=({onRetry:e})=>a().createElement(el,{onRetry:e,dataHook:i.Sx,primaryKey:"empty-state.list-fetch-error",secondaryKey:"empty-state.list-fetch-error-subtext",ctaKey:"empty-state.list-fetch-error-try-again"}),ol=a().memo((()=>{var e;const{resourceId:t,pagination:n=j,ctxFields:o,deepLink:r,hideHeader:s,hideTitle:i,reactions:l,disableResourceAutoFetching:c=!1,disableResourceCleanup:d=!1,ratings:m,userAuthDisplay:u}=(0,y.m)(),{fetchComments:p,fetchDeepLink:E,resourceComponentMounted:h,resourceComponentUnmounted:b,resourceState:C,shouldLog:I,isSSR:f,currentMember:N}=(0,v.h)(((e,n)=>({fetchComments:n.fetchComments,fetchDeepLink:n.fetchDeepLink,resourceComponentMounted:n.resourceComponentMounted,resourceComponentUnmounted:n.resourceComponentUnmounted,shouldLog:(0,g.C7)(e),isSSR:(0,g.Kv)(e),resourceState:e.comments[t],currentMember:(0,Ge.R4)(e)}))),R=(e=>{if(!e)return{type:"PENDING",ordering:j.ordering};switch(e.type){case"PENDING":return{type:"PENDING",ordering:e.configs.pagination.ordering,lastTotals:e.lastTotals};case"ERROR":return{type:"ERROR",error:e.error,subType:e.subType};case"READY":return dt(e);default:throw(0,$.t1)(e)}})(C),w="votes"===(null===(e=null==l?void 0:l.commentReactions)||void 0===e?void 0:e.type),L=Boolean(m);I&&console.log("[Comments list state]",R),a().useEffect((()=>{c||((null==r?void 0:r.commentId)?E({ctxFields:o,commentId:r.commentId,resourceId:t,pagination:n,withVotes:w,withRatings:L}):p({resourceId:t,pagination:n,ctxFields:o,withVotes:w,withRatings:L}))}),[t,null==r?void 0:r.commentId,c]),a().useEffect((()=>(h({resourceId:t,disableResourceCleanup:d}),()=>b({resourceId:t,disableResourceCleanup:d}))),[t,d]),a().useEffect((()=>{f||"undefined"!=typeof performance&&performance.mark&&performance.mark("wc-comments-rendered")}),[]);const k=a().useMemo((()=>((e="LOGOUT_ONLY",t)=>{var n,o;switch(e){case"NONE":return{type:"HIDDEN"};case"LOGOUT_ONLY":return t?{type:"LOGOUT",memberAvatarUrl:null===(n=t.profile.photo)||void 0===n?void 0:n.url}:{type:"HIDDEN"};case"LOGIN_AND_LOGOUT":return t?{type:"LOGOUT",memberAvatarUrl:null===(o=t.profile.photo)||void 0===o?void 0:o.url}:{type:"LOGIN"};default:throw(0,$.t1)(e)}})(u,N)),[u,N]);switch(R.type){case"ERROR":{const e=Fe({hideHeader:s,hideRatings:!L,hideTitle:i,userAuthControlState:k}),r=()=>{p({resourceId:t,pagination:n,ctxFields:o,withVotes:w,withRatings:L})},l={FAILED:a().createElement(nl,{onRetry:r}),COMMENT_NOT_FOUND:a().createElement(tl,{onRetry:r})};return a().createElement(al,null,"VISIBLE"===e.type&&a().createElement(Ve,Object.assign({ratings:{type:"DISABLED"}},e.visibilityProps)),l[R.subType])}case"PENDING":{const e=Fe({hideHeader:s,hideRatings:!L,hideTitle:i,userAuthControlState:k});return a().createElement(al,null,"VISIBLE"===e.type&&a().createElement(Ve,Object.assign({commentCount:void 0===R.lastTotals?void 0:R.lastTotals,ratings:{type:"DISABLED"}},e.visibilityProps)),a().createElement(vt,null))}case"READY":{const e=Fe({hideHeader:s,hideRatings:!L,hideTitle:i,userAuthControlState:k});return a().createElement(al,null,"VISIBLE"===e.type&&a().createElement(Ve,Object.assign({commentCount:R.totals,ratings:{type:"ENABLED",total:R.ratings.total,average:R.ratings.average}},e.visibilityProps)),a().createElement(Ri,{listState:R,appHeaderIsVisible:"VISIBLE"===e.type}))}default:throw(0,$.t1)(R)}}));ol.displayName="App";const al=({children:e})=>{const t=(0,v.h)((e=>(0,g.L1)(e))),{overlayLayerContainer:n}=(0,y.m)();return a().createElement(a().Fragment,null,t&&a().createElement(F,null),n?(0,J.createPortal)(a().createElement(Ji,null),n):a().createElement(Ji,null),e)},rl=ol,sl=a().memo((e=>((0,v.h)(g.C7)&&console.log("[Comments root props]",e),a().createElement(Z,{t:e.t},a().createElement(Y,{config:a().useMemo((()=>e),(0,r.values)(e))},a().createElement(w,null,a().createElement(K.DY,null,a().createElement(rl,null))))))));sl.displayName="CommentsRoot";const il=(0,s.Z)(function(e,t=B){function n(n){const{workerError:o,isSSR:r,baseParams:s,isInitialized:i}=(0,v.h)(((e,t,n,o)=>({workerError:o.wcWorkerError,isSSR:o.isSSR,baseParams:e.baseParams,isInitialized:(0,U.D)(e)})));if(o&&!0===o.isSSR&&!1!==r)return a().createElement(a().Fragment,null,"...");if(o&&!1===o.isSSR){if(o&&o.wasWorkerErrorCaptured)return a().createElement(Y,{config:null!=n?n:{}},s.isDebug?a().createElement(F,null):null,a().createElement(t,Object.assign({},n,{workerError:o})));throw new Error(`Worker initialization failed: ${o?o.error:"There is no error, props were not set"}`)}return i?a().createElement(e,Object.assign({},n)):null}return n.displayName=`withInvalidAppState(${e.displayName||e.name||"Component"})`,n}(sl),B)},71561:(e,t,n)=>{n.d(t,{j:()=>o});const o=(0,n(69808).Z)({importFn:async()=>n.e(7839).then(n.bind(n,15449)),errorHandling:{type:"HANDLE"},loader:{type:"CHILDREN"}})},1181:(e,t,n)=>{n.d(t,{N:()=>l});var o=n(95685),a=n.n(o),r=n(27762),s=n.n(r);const i="_OOoHO",l=({children:e,className:t,dataHook:n,centerHorizontally:o,centerToScreen:l,offset:c=0})=>{const[d,m]=(0,r.useState)(),[u,p]=(0,r.useState)(),E=(0,r.useRef)(null),h=document.documentElement.clientWidth;(0,r.useLayoutEffect)((()=>{if(!E.current||"undefined"==typeof document)return;const e=E.current.getBoundingClientRect(),t=document.documentElement.clientHeight,n=Math.round(e.height),o=t<e.top+n+c?"top":"bottom";m(o),p(e)}),[]);const g=()=>"top"===d,v={[g()?"bottom":"top"]:0,[g()?"marginBottom":"marginTop"]:`${c}px`};if(o&&(v.left=(null==u?void 0:u.width)?`-${u.width/2}px`:"auto"),l&&u){const e=u.width+u.x,t=e-h;v.left=h<e?`-${t+(u.x-t)/2}px`:"auto"}return s().createElement("div",{className:a()(i,t),ref:E,style:v,"data-hook":n},e)}},65756:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(27762);const a=({size:e,...t})=>o.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e||"24",height:e||"24",...t},o.createElement("path",{fillRule:"evenodd",d:"M6 5a1 1 0 011-1h11.54a.5.5 0 01.41.787L16.2 8.713a.5.5 0 000 .574l2.75 3.926a.5.5 0 01-.41.787H7v6H6V5zm1 0h10.58l-2.198 3.14a1.5 1.5 0 000 1.72L17.579 13H7V5z"}));a.displayName="Flag";var r=a},976:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(27762);const a=({size:e,...t})=>o.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e||"24",height:e||"24",...t},o.createElement("path",{fillRule:"evenodd",d:"M11.5,3 C16.187,3 20,6.813 20,11.5 C20,16.187 16.187,20 11.5,20 C6.813,20 3,16.187 3,11.5 C3,6.813 6.813,3 11.5,3 Z M11.5,4 C7.364,4 4,7.364 4,11.5 C4,15.636 7.364,19 11.5,19 C15.636,19 19,15.636 19,11.5 C19,7.364 15.636,4 11.5,4 Z M14.3012,9.0425 L15.0082,9.7505 L10.4482,14.3105 L7.9912,11.8535 L8.6982,11.1465 L10.4482,12.8965 L14.3012,9.0425 Z"}));a.displayName="Select";var r=a},65037:(e,t,n)=>{n.d(t,{P:()=>O});var o=n(47014),a=n(79699),r=n(34313),s=n(46474),i=n(42455),l=(n(17607),Object.defineProperty),c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,E=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&E(e,n,t[n]);if(m)for(var n of m(t))p.call(t,n)&&E(e,n,t[n]);return e};const g=(e,t)=>n=>{class a{constructor(e,t){this.tree=e,this.traversal=t}filter(e){return new a(this.tree,this.traversal.composePrism(s.P.fromPredicate(e)))}set(e){return(0,o.p)(this.traversal.asFold().getAll(this.tree),(0,r.m)((e=>e._modId)),g(this.tree,e))}}const l=(e,t)=>n=>{const o=n,{_modId:a}=o,r=((e,t)=>{var n={};for(var o in e)u.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&m)for(var o of m(e))t.indexOf(o)<0&&p.call(e,o)&&(n[o]=e[o]);return n})(o,["_modId"]);return e.includes(a)?t(r):r},E=e=>Array.isArray(e)?e:(0,r.o)(e),g=(e,n)=>a=>(0,s.a)(((e,r)=>h(h({},e),t(r.reduce(((e,t)=>{return(0,o.p)(t,l(a,n),E,(r=e,e=>[...r,...e]));var r}),[])))))(e),v=(0,s.u)(n,(t=>{return[(n=h({},t),o={_modId:(0,i.O)()},c(n,d(o))),e(t)];var n,o}));return new a(v,(0,s.f)(s.t)())};var v=Object.defineProperty,y=Object.defineProperties,b=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const R=e=>e.nodes,w=e=>({nodes:e}),L=e=>({id:"root",type:a.J.UNRECOGNIZED,nodes:e.nodes}),k=e=>function(t){const n={modifier:t};return{filter(e){return n.modifier=t.filter.bind(n.modifier)(e),n.modifier.set=this.set,n.modifier.filter=this.filter,n.modifier},set(o){const a=t.set.bind(n.modifier)(o);return r=((e,t)=>{for(var n in t||(t={}))I.call(t,n)&&N(e,n,t[n]);if(C)for(var n of C(t))f.call(t,n)&&N(e,n,t[n]);return e})({},e),s={nodes:a.nodes},y(r,b(s));var r,s}}},O=e=>(0,o.p)(e,L,g(R,w),k(e))},63691:(e,t,n)=>{n.d(t,{g:()=>a});var o=n(79699);const a=e=>{if(0===e.nodes.length)return!0;if(e.nodes.length>1)return!1;{const t=e.nodes[0],{nodes:n,type:a,paragraphData:r}=t;return 0===n.length&&a===o.J.PARAGRAPH&&[void 0,0].includes(null==r?void 0:r.indentation)}}},42455:(e,t,n)=>{n.d(t,{O:()=>a});var o=n(17607);function a(e=""){return`${Math.random().toString(36).substr(2,5)}${(0,o.uniqueId)(e)}`}},69017:(e,t,n)=>{n.d(t,{P:()=>u});var o=n(17607),a=Object.defineProperty,r=Object.defineProperties,s=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const m=e=>{let t=0;const n=e=>0===e.length?[]:e.map((e=>{const o=e,{id:a,nodes:m}=o,u=((e,t)=>{var n={};for(var o in e)l.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&i)for(var o of i(e))t.indexOf(o)<0&&c.call(e,o)&&(n[o]=e[o]);return n})(o,["id","nodes"]);return p=((e,t)=>{for(var n in t||(t={}))l.call(t,n)&&d(e,n,t[n]);if(i)for(var n of i(t))c.call(t,n)&&d(e,n,t[n]);return e})({},u),E={id:""+t++,nodes:n(m)},r(p,s(E));var p,E}));return n(e)},u=(e={nodes:[]},t={nodes:[]})=>{const n=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(t));if(!(0,o.isEqual)(n.documentStyle,a.documentStyle))return!1;if(n.nodes.length!==a.nodes.length)return!1;const r=m(n.nodes),s=m(a.nodes);return!!(0,o.isEqual)(r,s)}},38378:(e,t,n)=>{n.d(t,{_:()=>a,l:()=>r});var o=n(17607);function a(e){return(0,o.isArray)(e.blocks)&&(0,o.isObject)(e.entityMap)}function r(e){return(0,o.isArray)(e.nodes)}}}]);
//# sourceMappingURL=5862.chunk.min.js.map