(("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_forum_client=("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_forum_client||[]).push([[9349],{98575:e=>{e.exports={USER_PRIVACY_STATUS_PRIVATE:"PRIVATE",USER_PRIVACY_STATUS_PUBLIC:"PUBLIC"}},96116:(e,r,n)=>{"use strict";var t=n(34169),o=n(17607),l=t(n(170)),i=n(98575),s=n(57849);const u="guest",d="user",a="moderator",c="admin",m="owner",f="forum",h="category",v="post",R="comment",E="member",w="all";function p(e,r){return e?{...e,getResourceId:()=>r}:r}e.exports={ROLE_GUEST:u,ROLE_USER:d,ROLE_MODERATOR:a,ROLE_ADMIN:c,ROLE_OWNER:m,RESOURCE_FORUM:f,RESOURCE_CATEGORY:h,RESOURCE_POST:v,RESOURCE_COMMENT:R,RESOURCE_MEMBER:E,PERMISSIONS_ALL:w,resourcify:p,permissionsChecker:function(e,r,n){let{isOldForum:t=!1,isMemberAppInstalled:y=!1,isMemberAreaInstalled:g=!1}=void 0===e?{}:e;const I=t||y||g,b=(e,r)=>(e.addRole("guest"),e.addRole("user"),e.addRole("moderator","user"),e.addRole("admin","user"),e.addRole("owner","admin"),e.addResource("forum"),e.addResource("category"),e.addResource("post","category"),e.addResource("comment","post"),e.addResource("member"),e.allow("guest","category","read",A(S(C),W)),e.allow("guest","category","share"),r&&(I&&e.allow("guest","category","subscribe",S(k)),e.allow("guest","post",["like","vote"],A(S(C),W))),e.allow("guest","member","edit",L),e.allow("user","category","share"),e.allow("user","category","read",A(T(W,U("read"),U("write")),T(A(S(C),W),A(C,S(D)),A(W,S(D))))),I&&e.allow("user","category","subscribe",r?T(W,U("read"),U("write")):A(T(W,U("read"),U("write")),S(D))),e.allow("user","category","create-post",T(r?A(S(j),W):A(S(j),W,S(D)),U("write"))),e.allow("user","post",["like","vote"],r?T(W,U("read"),U("write")):A(T(W,U("read"),U("write")),S(D))),e.allow("user","post","edit",r?Y:A(Y,S(D))),e.allow("user","post","delete",Y),e.allow("user","post","create-comment",A(S(N),T(W,U("read"),U("write")),r?()=>!0:S(D))),e.allow("user","post",["add-top-comment","remove-top-comment","add-best-answer-comment","remove-best-answer-comment"],Y),I?(e.allow("user","post","report",r?A(S(Y),S(x("owner"))):A(S(Y),S(x("owner")),S(D))),e.allow("user","post","subscribe",r?T(U("read"),U("write")):A(T(U("read"),U("write")),S(D)))):e.deny("user","post","subscribe"),I&&e.allow("user","comment","report",r?A(S(Y),S(x("owner"))):A(S(Y),S(x("owner")),S(D))),e.allow("user","comment",["like","vote"],r?T(U("read"),U("write")):A(T(U("read"),U("write")),S(D))),e.allow("user","comment","edit",r?Y:A(Y,S(D))),e.allow("user","comment","delete",Y),I&&(e.allow("user","member","subscribe",A(S(L),S(D))),e.allow("user","member","list",S(D)),e.allow("user","member","report",A(A(S(L),S(M("owner"))),S(D)))),e.allow("user","member","edit",L),e.allow("user","member","delete",A(L,S(M("owner")))),e.allow("moderator","category","read"),e.allow("moderator","category",["create-post","edit","subscribe"],U("moderate")),e.allow("moderator","post",["pin","toggle-comments","move","create-comment","add-top-comment","remove-top-comment","add-best-answer-comment","remove-best-answer-comment","like"],U("moderate")),e.allow("moderator","post","delete",A(U("moderate"),S(x("admin","owner")))),e.allow("moderator","post","create-comment",A(S(N),U("moderate"))),e.allow("moderator","comment",["like","vote"],U("moderate")),e.deny("moderator","post","edit",S(Y)),e.deny("moderator","post","report",U("moderate")),e.deny("moderator","comment","report",U("moderate")),e.allow("admin","forum","reorder-categories"),e.allow("admin","category",["read","subscribe","create","create-post","edit","delete"]),e.allow("admin","post",["pin","toggle-comments","move","create-comment","delete","add-top-comment","remove-top-comment","add-best-answer-comment","remove-best-answer-comment","like","vote"]),e.allow("admin","post","create-comment",S(N)),e.allow("admin","comment",["delete","like","vote"]),e.allow("admin","member","block",A(S(M("admin","owner")),S(L))),e.allow("admin","member","delete",S(M("admin","owner"))),e.allow("admin","member","promote-moderator",A(S(V),S(M("admin","owner")),S(L))),e.deny("admin","post","edit",S(Y)),e.deny("admin","post","report"),e.deny("admin","comment","report"),e.allow("owner","forum","edit"),e.allow("owner","member","block",S(M("owner"))),e.allow("owner","member","delete",S(M("owner"))),e.allow("owner","member","promote",A(S(V),S(M("owner")))),e.deny("owner","member","report"),e),O=b(new l.default),_=b(new l.default,I),P={ROLE_GUEST:u,ROLE_USER:d,ROLE_MODERATOR:a,ROLE_ADMIN:c,ROLE_OWNER:m,RESOURCE_FORUM:f,RESOURCE_CATEGORY:h,RESOURCE_POST:v,RESOURCE_COMMENT:R,RESOURCE_MEMBER:E,PERMISSIONS_ALL:w,resourcify:p,setUserIdentity:e=>{const r={...e};let n=(0,s.getUserRole)(r);(0,o.isEmpty)(r)&&(n="guest"),(0,o.isEmpty)(n)&&(n=r.isOwner?"owner":"user"),(0,o.get)(r,"isBlocked")&&(n="guest"),g||(r.privacyStatus=i.USER_PRIVACY_STATUS_PUBLIC),O.setUserIdentity(B(r,n)),_.setUserIdentity(B(r,n))},can:(e,r)=>O.can(e,r),canSee:(e,r)=>_.can(e,r)};return P.setUserIdentity(r),P;function S(e){var r=this;return function(){for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return!e.apply(r,t)}}function A(){for(var e=this,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return function(){for(var r=arguments.length,t=new Array(r),l=0;l<r;l++)t[l]=arguments[l];return(0,o.every)(n,(r=>r.apply(e,t)))}}function T(){for(var e=this,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return function(){for(var r=arguments.length,t=new Array(r),l=0;l<r;l++)t[l]=arguments[l];return(0,o.some)(n,(r=>r.apply(e,t)))}}function U(e){return(r,t)=>{const l=(0,o.get)(r,"permissions."+e,[]);return(0,o.includes)(l,w)||(0,o.includes)(l,n(t)._id)}}function L(e,r){return e._id===r._id||e.siteMemberId===r.siteMemberId&&void 0!==e.siteMemberId}function Y(e,r){return e._id&&r.ownerId&&e._id===r.ownerId||e.siteMemberId===r.ownerSId&&void 0!==e.siteMemberId||e.userId===r.ownerSId&&void 0!==e.userId}function D(e){return e.privacyStatus===i.USER_PRIVACY_STATUS_PRIVATE}function k(e){return e.isBlocked}function N(e,r){return r.isCommentsDisabled}function M(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(e,n)=>(0,o.includes)(r,(0,s.getUserRole)(n))}function x(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(e,n)=>(0,o.includes)(r,(0,s.getUserRole)((0,o.get)(n,"owner")))}function C(e,r){return n(r).type?"membersOnly"===n(r).type:n(r).isPrivate}function W(e,r){if("private"===n(r).type){return((e,r)=>e.some((e=>r.includes(e))))(n(r).groups||[],e.groups||[])}return!0}function j(e,r){return n(r).isWriteProtected}function V(e,r){return r.isBlocked}function B(e,r){return{...e,getRoles:()=>[r]}}}}},57849:(e,r,n)=>{"use strict";r.__esModule=!0,r.getUserRole=void 0;var t=n(17607),o=n(83413);r.getUserRole=e=>(0,t.get)(e,"appStore["+o.FORUM_APP_ID+"].permissions.role")||(0,t.get)(e,"permissions.role")},34961:(e,r,n)=>{"use strict";n.d(r,{K:()=>l});const t={en:{s:"1s",ss:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd"},nl:{s:"1sec.",ss:"%dsec.",m:"1min.",mm:"%dmin.",h:"1u.",hh:"%du."},cs:{s:"1sek",ss:"%dsek",m:"1min",mm:"%dmin",h:"1hod",hh:"%dhod"},da:{s:"1s",ss:"%ds",m:"1m",mm:"%dm",h:"1t",hh:"%dt"},de:{s:"1Sek.",ss:"%dSek.",m:"1Min.",mm:"%dMin.",h:"1Std.",hh:"%dStd."},fr:{s:"1s",ss:"%ds",m:"1min",mm:"%dmin",h:"1h",hh:"%dh"},hi:{s:"1\u0938\u0947",ss:"%d\u0938\u0947",m:"1\u092e\u093f",mm:"%d\u092e\u093f",h:"1\u0918\u0902\u091f\u093e",hh:"%d\u0918\u0902\u091f\u093e"},it:{s:"1sec",ss:"%dsec",m:"1min",mm:"%dmin",h:"1ora",hh:"%dore"},ja:{s:"1\u79d2",ss:"%d\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593"},ko:{s:"1\ucd08",ss:"%d\ucd08",m:"1\ubd84",mm:"%d\ubd84",h:"1\uc2dc\uac04",hh:"%d\uc2dc\uac04"},lt:{s:"1s",ss:"%ds",m:"1min",mm:"%dmin",h:"1val",hh:"%dval"},nb:{s:"1sek",ss:"%dsek",m:"1min",mm:"%dmin",h:"1time",hh:"%dtimer"},pl:{s:"1s",ss:"%ds",m:"1min",mm:"%dmin",h:"1h",hh:"%dh"},pt:{s:"1s",ss:"%ds",m:"1min",mm:"%dmin",h:"1h",hh:"%dh"},es:{s:"1seg",ss:"%dseg",m:"1min",mm:"%dmin",h:"1h",hh:"%dhs"},sv:{s:"1s",ss:"%ds",m:"1min",mm:"%dmin",h:"1h",hh:"%dh"},th:{s:"1\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1\u0e19\u0e32\u0e17\u0e35",mm:"%d\u0e19\u0e32\u0e17\u0e35",h:"1\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07"},tr:{s:"1sn.",ss:"%dsn.",m:"1dk.",mm:"%ddk.",h:"1sa.",hh:"%dsa."},ru:{s:"1\u0441\u0435\u043a.",ss:"%d\u0441\u0435\u043a.",m:"1d\u043c\u0438\u043d.",mm:"%d\u043c\u0438\u043d.",h:"1\u0447.",hh:"%d\u0447."},"zh-cn":{s:"1\u79d2",ss:"%d\u79d2",m:"1d\u5206\u9418",mm:"%d\u5206\u9418",h:"1\u5c0f\u6642",hh:"%d\u5c0f\u6642"},uk:{s:"1\u0441.",ss:"%d\u0441.",m:"1d\u0445\u0432.",mm:"%d\u0445\u0432.",h:"1\u0433.",hh:"%d\u0433."}};var o;!function(e){e.SECONDS="second",e.MINUTES="minute",e.HOURS="hour",e.DAYS="day"}(o||(o={}));const l=(e,{floorSeconds:r=!1,extraShortExpression:n=!1}={},l={})=>{let i;return s=>{i||void 0===Intl.RelativeTimeFormat||(i=new Intl.RelativeTimeFormat(e,Object.assign({},l)));let u=(new Date).getTime()-new Date(s).getTime();isNaN(u)&&(console.error(`[@wix/wix-i18n-config/relative-time-formatter] received invalid time: ${s}`),u=1e3);const d=(e=>{const r=e<0?-e:e;switch(!0){case r<6e4:return o.SECONDS;case r<36e5:return o.MINUTES;case r<864e5:return o.HOURS;default:return o.DAYS}})(u),a=((e,r,n)=>{let t;switch(r){case o.SECONDS:t=n?1:e/1e3;break;case o.MINUTES:t=e/1e3/60;break;case o.HOURS:t=e/1e3/60/60;break;case o.DAYS:t=e/1e3/60/60/24;break;default:t=e}return-Math.round(t)})(u,d,r),c=n||!i?((e,r,n)=>{const l={[o.SECONDS]:"ss",[o.MINUTES]:"mm",[o.HOURS]:"hh",[o.DAYS]:"dd"},i=-1===n?l[r][0]:l[r],s=t[e]?t[e][i]:null;return s?s.replace("%d",""+-n):null})(e,d,a):null;return c||(i?i.format(a,d):s)}}},170:e=>{e.exports=function(){function e(r,n,t){function o(i,s){if(!n[i]){if(!r[i]){if(l)return l(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[i]={exports:{}};r[i][0].call(d.exports,(function(e){return o(r[i][1][e]||e)}),d,d.exports,e,r,n,t)}return n[i].exports}for(var l=void 0,i=0;i<t.length;i++)o(t[i]);return o}return e}()({1:[function(e,r,n){"use strict";function t(){var e=this,r={};return e.add=function(n,t){if(t=void 0===t?null:t,e.has(n))throw new Error('Item "'+n+'" already exists in the registry');var o=[];return null!==t&&(Array.isArray(t)||(t=[t]),t.forEach((function(t){if(!e.has(t))throw new Error('Parent role "'+t+'" for "'+n+'" not exists in the registry');o.push(t),r[t].children.push(n)}))),r[n]={id:n,parents:o,children:[]},e},e.get=function(r){if(!e.has(r))throw new Error('Item "'+r+'" not exists in the registry');return r},e.has=function(e){return void 0!==r[e]},e.getParents=function(n){if(!e.has(n))throw new Error('Item "'+n+'" not exists in the registry');return r[n].parents},e.inherits=function(n,t,o){if(o=void 0!==o&&o,!e.has(n)||!e.has(t))throw new Error("Items not exists in the registry");var l=-1!==r[n].parents.indexOf(t);if(l||o)return l;for(var i=0;i<r[n].parents.length;i++){var s=r[n].parents[i];if(e.inherits(s,t))return!0}return!1},e.remove=function(n){if(!e.has(n))throw new Error('Item "'+n+'" not exists in the registry');return r[n].children.forEach((function(e){var t=r[e].parents.indexOf(n);-1!==t&&r[e].parents.splice(t,1)})),r[n].parents.forEach((function(e){var t=r[e].children.indexOf(n);-1!==t&&r[e].children.splice(t,1)})),delete r[n],e},e.removeAll=function(){return r={},e},e.getItems=function(){return JSON.parse(JSON.stringify(r))},e}r.exports=t},{}],"/src/index.js":[function(e,r,n){var t=e("./acl-registry");function o(){var e=this;e.TYPE_ALLOW="TYPE_ALLOW",e.TYPE_DENY="TYPE_DENY",e.OP_ADD="OP_ADD",e.OP_REMOVE="OP_REMOVE",e.USER_IDENTITY_ROLE="acl.role";var r=null,n=new t,o={},l={allResources:{allRoles:{allPrivileges:{type:e.TYPE_DENY,assert:null},byPrivilegeId:{}},byRoleId:{}},byResourceId:{}},i=null,s=null;function u(r,n,t,l,i,s){if(t=void 0===t?null:t,l=void 0===l?null:l,i=void 0===i?null:i,s=void 0===s?null:s,n=n.toUpperCase(),e.TYPE_ALLOW!==n&&e.TYPE_DENY!==n)throw new Error("Unsupported rule type");Array.isArray(t)?0===t.length&&(t=[null]):t=[t];var u=t;t=[],u.forEach((function(r){null!==r?t.push(e.getRole(r)):t.push(null)})),Array.isArray(l)?0===l.length&&(l=[null]):null===l&&Object.keys(o).length>0?-1===(l=Object.keys(o)).indexOf(null)&&l.unshift(null):l=[l];var a=l;switch(l=[],a.forEach((function(r){if(null!==r){var n=v(r=e.getResource(r));(l=l.concat(n)).push(r)}else l.push(null)})),null===i?i=[]:Array.isArray(i)||(i=[i]),r){case e.OP_ADD:l.forEach((function(e){t.forEach((function(r){var t=d(e,r,!0);0===i.length?(R(t,"allPrivileges.type",n),R(t,"allPrivileges.assert",s),void 0===t.byPrivilegeId&&(t.byPrivilegeId={})):i.forEach((function(e){R(t,"byPrivilegeId."+e+".type",n),R(t,"byPrivilegeId."+e+".assert",s)}))}))}));break;case e.OP_REMOVE:l.forEach((function(r){t.forEach((function(t){var o=d(r,t);if(null!==o)if(0===i.length){if(null===r&&null===t)return void(o.allPrivileges.type===n&&(R(o,"allPrivileges.type",e.TYPE_DENY),R(o,"allPrivileges.assert",null),o.byPrivilegeId={}));void 0!==o.allPrivileges&&void 0!==o.allPrivileges.type&&o.allPrivileges.type===n&&delete o.allPrivileges}else i.forEach((function(e){void 0!==o.byPrivilegeId&&void 0!==o.byPrivilegeId[e]&&o.byPrivilegeId[e].type===n&&delete o.byPrivilegeId[e]}))}))}));break;default:throw new Error("Unsupported operation")}return e}function d(e,r,n){var t;e=void 0===e?null:e,r=void 0===r?null:r,n=void 0!==n&&n;do{if(null===e){t=l.allResources;break}var o=e;if(void 0===l.byResourceId[o]){if(!n)return null;l.byResourceId[o]={}}t=l.byResourceId[o]}while(0);if(null===r){if(void 0===t.allRoles){if(!n)return null;R(t,"allRoles.byPrivilegeId",{})}return t.allRoles}var i=r;if(void 0===t.byRoleId||void 0===t.byRoleId[i]){if(!n)return null;R(t,"byRoleId."+i+".byPrivilegeId",{})}return t.byRoleId[i]}function a(e,r){var n,t={visited:{},stack:[]};if(null!==(n=c(e,r,t)))return n;for(;null!==(e=E(t.stack));)if(void 0===t.visited[e]&&null!==(n=c(e,r,t)))return n;return null}function c(r,t,o){if(t=void 0===t?null:t,null===(o=void 0===o?null:o))throw new Error("$dfs parameter may not be null");var l;if(null!==(l=d(t,r))){for(var i in l.byPrivilegeId)if(e.TYPE_DENY===h(t,r,i))return!1;var s;if(null!==(s=h(t,r,null)))return e.TYPE_ALLOW===s}return o.visited[r]=!0,n.getParents(r).forEach((function(e){o.stack.push(e)})),null}function m(e,r,n){if(r=void 0===r?null:r,null===(n=void 0===n?null:n))throw new Error("$privilege parameter may not be null");var t,o={visited:{},stack:[]};if(null!==(t=f(e,r,n,o)))return t;for(;null!==(e=E(o.stack));)if(void 0===o.visited[e]&&null!==(t=f(e,r,n,o)))return t;return null}function f(r,t,o,l){if(t=void 0===t?null:t,l=void 0===l?null:l,null===(o=void 0===o?null:o))throw new Error("$privilege parameter may not be null");if(null===l)throw new Error("$dfs parameter may not be null");var i,s;return null!==(i=h(t,r,o))?e.TYPE_ALLOW===i:null!==(s=h(t,r,null))?e.TYPE_ALLOW===s:(l.visited[r]=!0,n.getParents(r).forEach((function(e){l.stack.push(e)})),null)}function h(r,n,t){t=void 0===t?null:t;var o,l=d(r=void 0===r?null:r,n=void 0===n?null:n);if(null===l)return null;if(null===t){if(void 0===l.allPrivileges)return null;o=l.allPrivileges}else{if(void 0===l.byPrivilegeId||void 0===l.byPrivilegeId[t])return null;o=l.byPrivilegeId[t]}var u=null;return null!==o.assert&&(u=o.assert.call(e,s===e.USER_IDENTITY_ROLE&&null!==e.getUserIdentity()?e.getUserIdentity():n,null!==i?i:r,t)),null===o.assert||!0===u?o.type:null!==r||null!==n||null!==t?null:e.TYPE_ALLOW===o.type?e.TYPE_DENY:e.TYPE_ALLOW}function v(e){var r=[];return o[e].children.forEach((function(e){var n=v(e);n.push(e),r=r.concat(n)})),r}function R(e,r,n){for(var t=r.split("."),o=t.length,l=0;l<o-1;l++){var i=t[l];e[i]||(e[i]={}),e=e[i]}e[t[o-1]]=n}function E(e){var r="",n="";if(e.hasOwnProperty("length"))return e.length?e.pop():null;for(r in e)e.hasOwnProperty(r)&&(n=r);if(n){var t=e[n];return delete e[n],t}return null}e.getUserIdentity=function(){return r},e.setUserIdentity=function(n){if(!(n instanceof Object)||"function"!=typeof n.getRoles)throw new Error("Incorrect user identity");return e.hasRole(e.USER_IDENTITY_ROLE)&&e.removeRole(e.USER_IDENTITY_ROLE),e.addRole(e.USER_IDENTITY_ROLE,n.getRoles()),r=n,e},e.clearUserIdentity=function(){return r=null,e.removeRole(e.USER_IDENTITY_ROLE),e},e.can=function(r,n){if(r=void 0===r?null:r,n=void 0===n?null:n,null===e.getUserIdentity())throw new Error("User identity is null");return e.isAllowed(e.USER_IDENTITY_ROLE,r,n)},e.allow=function(r,n,t,o){return r=void 0===r?null:r,n=void 0===n?null:n,t=void 0===t?null:t,o=void 0===o?null:o,u(e.OP_ADD,e.TYPE_ALLOW,r,n,t,o)},e.deny=function(r,n,t,o){return r=void 0===r?null:r,n=void 0===n?null:n,t=void 0===t?null:t,o=void 0===o?null:o,u(e.OP_ADD,e.TYPE_DENY,r,n,t,o)},e.removeAllow=function(r,n,t,o){return r=void 0===r?null:r,n=void 0===n?null:n,t=void 0===t?null:t,o=void 0===o?null:o,u(e.OP_REMOVE,e.TYPE_ALLOW,r,n,t,o)},e.removeDeny=function(r,n,t,o){return r=void 0===r?null:r,n=void 0===n?null:n,t=void 0===t?null:t,o=void 0===o?null:o,u(e.OP_REMOVE,e.TYPE_DENY,r,n,t,o)},e.isAllowed=function(r,n,t){var l,u;if(n=void 0===n?null:n,t=void 0===t?null:t,s=null,i=null,null!==(r=void 0===r?null:r)&&(s=r,r=e.getRole(r)),null!==n&&(i=n,n=e.getResource(n)),null===t)for(;;){if(null!==r&&null!==(l=a(r,n,t)))return l;var c;if(null!==(c=d(n,null))){for(t in c.byPrivilegeId)if(e.TYPE_DENY===h(n,null,t))return!1;if(null!==(u=h(n,null,null)))return e.TYPE_ALLOW===u}n=o[n].parent}else for(;;){if(null!==r&&null!==(l=m(r,n,t)))return l;var f;if(null!==(f=h(n,null,t)))return e.TYPE_ALLOW===f;if(null!==(u=h(n,null,null))&&((l=e.TYPE_ALLOW===u)||null===n))return l;n=o[n].parent}},e.addResource=function(r,n){if(n=void 0===n?null:n,"string"!=typeof r||""===r)throw new Error("addResource() expects resource to be a not empty string");var t=r;if(e.hasResource(t))throw new Error("Resource '"+t+"' already exists in the ACL");if(null!==n){if(!e.hasResource(n))throw new Error("Parent resource '"+n+"' not exists in the ACL");o[n].children.push(t)}return o[t]={id:t,parent:n,children:[]},e},e.getResource=function(r){if(!e.hasResource(r))throw new Error("Resource '"+r+"' not found");return r instanceof Object&&"function"==typeof r.getResourceId&&(r=r.getResourceId()),o[r].id},e.getResources=function(){return Object.keys(o)},e.hasResource=function(e){return e instanceof Object&&"function"==typeof e.getResourceId&&(e=e.getResourceId()),void 0!==o[e]},e.inheritsResource=function(r,n,t){var l=null;if(r=e.getResource(r),n=e.getResource(n),null===o[r].parent)return!1;if((l=o[r].parent)===n)return!0;if(t)return!1;for(;null!==o[l].parent;)if(n===(l=o[l].parent))return!0;return!1},e.removeResource=function(r){if(!e.hasResource(r))throw new Error("Resource '"+r+"' not found");r instanceof Object&&"function"==typeof r.getResourceId&&(r=r.getResourceId());var n=[r],t=o[r].parent;return null!==t&&o[t].children.splice(o[t].children.indexOf(r),1),o[r].children.forEach((function(r){e.removeResource(r),n.push(r)})),n.forEach((function(e){for(var r in l.byResourceId)e===r&&delete l.byResourceId[r]})),delete o[r],e},e.removeResourceAll=function(){for(var r in o)for(var n in l.byResourceId)r===n&&delete l.byResourceId[n];return o={},e},e.addRole=function(r,t){if(t=void 0===t?null:t,"string"!=typeof r||""===r)throw new Error("addRole() expects role to be a not empty string");return n.add(r,t),e},e.getRole=function(e){return n.get(e)},e.getRoles=function(){return Object.keys(n.getItems())},e.hasRole=function(e){return n.has(e)},e.inheritsRole=function(e,r,t){return t=void 0!==t&&t,n.inherits(e,r,t)},e.removeRole=function(r){for(var t in n.remove(r),void 0!==l.allResources.byRoleId[r]&&delete l.allResources.byRoleId[r],l.byResourceId){var o=l.byResourceId[t];void 0!==o.byRoleId&&void 0!==o.byRoleId[r]&&delete o.byRoleId[r]}return e},e.removeRoleAll=function(){for(var r in n.removeAll(),l.allResources.byRoleId)delete l.allResources.byRoleId[r];for(var t in l.byResourceId)for(var o in l.byResourceId[t].byRoleId)delete l.byResourceId[t].byRoleId[o];return e}}r.exports=o},{"./acl-registry":1}]},{},[])("/src/index.js")}}]);
//# sourceMappingURL=9349.chunk.min.js.map